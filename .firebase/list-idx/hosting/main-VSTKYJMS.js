import{A as Yi,B as Yg,C as Zg,D as I,E as Ve,F as fe,G as su,H as Kg,I as Zi,J as Me,K as Ut,L as Gs,M as au,N as Xg,O as wr,P as Ki,Q as Jg,R as em,S as un,T as je,a as y,b as $,c as ft,d as Vg,e as $s,f as jg,g as Bg,h as g,i as Dr,j as Hs,k as Ug,l as $g,m as me,n as Hg,o as ou,p as zg,q as It,r as Wg,s as Gg,t as zs,u as de,v as qg,w as Qg,x as Ke,y as ln,z as Ws}from"./chunk-R5RUPKPW.js";function tm(t,e){return Object.is(t,e)}var he=null,qs=!1,Qs=1,$t=Symbol("SIGNAL");function H(t){let e=he;return he=t,e}function nm(){return he}var Ji={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function uu(t){if(qs)throw new Error("");if(he===null)return;he.consumerOnSignalRead(t);let e=he.nextProducerIndex++;if(Xs(he),e<he.producerNode.length&&he.producerNode[e]!==t&&Xi(he)){let n=he.producerNode[e];Ks(n,he.producerIndexOfThis[e])}he.producerNode[e]!==t&&(he.producerNode[e]=t,he.producerIndexOfThis[e]=Xi(he)?sm(t,he,e):0),he.producerLastReadVersion[e]=t.version}function oI(){Qs++}function rm(t){if(!(Xi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Qs)){if(!t.producerMustRecompute(t)&&!fu(t)){t.dirty=!1,t.lastCleanEpoch=Qs;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Qs}}function im(t){if(t.liveConsumerNode===void 0)return;let e=qs;qs=!0;try{for(let n of t.liveConsumerNode)n.dirty||sI(n)}finally{qs=e}}function om(){return he?.consumerAllowSignalWrites!==!1}function sI(t){t.dirty=!0,im(t),t.consumerMarkedDirty?.(t)}function Zs(t){return t&&(t.nextProducerIndex=0),H(t)}function du(t,e){if(H(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Xi(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ks(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function fu(t){Xs(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(rm(n),r!==n.version))return!0}return!1}function hu(t){if(Xs(t),Xi(t))for(let e=0;e<t.producerNode.length;e++)Ks(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function sm(t,e,n){if(am(t),t.liveConsumerNode.length===0&&cm(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=sm(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ks(t,e){if(am(t),t.liveConsumerNode.length===1&&cm(t))for(let r=0;r<t.producerNode.length;r++)Ks(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Xs(i),i.producerIndexOfThis[r]=e}}function Xi(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Xs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function am(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function cm(t){return t.producerNode!==void 0}function lm(t){let e=Object.create(aI);e.computation=t;let n=()=>{if(rm(e),uu(e),e.value===Ys)throw e.error;return e.value};return n[$t]=e,n}var cu=Symbol("UNSET"),lu=Symbol("COMPUTING"),Ys=Symbol("ERRORED"),aI=$(y({},Ji),{value:cu,dirty:!0,error:null,equal:tm,producerMustRecompute(t){return t.value===cu||t.value===lu},producerRecomputeValue(t){if(t.value===lu)throw new Error("Detected cycle in computations.");let e=t.value;t.value=lu;let n=Zs(t),r;try{r=t.computation()}catch(i){r=Ys,t.error=i}finally{du(t,n)}if(e!==cu&&e!==Ys&&r!==Ys&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function cI(){throw new Error}var um=cI;function dm(){um()}function fm(t){um=t}var lI=null;function hm(t){let e=Object.create(gm);e.value=t;let n=()=>(uu(e),e.value);return n[$t]=e,n}function pu(t,e){om()||dm(),t.equal(t.value,e)||(t.value=e,uI(t))}function pm(t,e){om()||dm(),pu(t,e(t.value))}var gm=$(y({},Ji),{equal:tm,value:void 0});function uI(t){t.version++,oI(),im(t),lI?.()}function A(t){return typeof t=="function"}function Er(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Js=Er(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ln(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(A(r))try{r()}catch(o){e=o instanceof Js?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{mm(o)}catch(s){e=e??[],s instanceof Js?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Js(e)}}add(e){var n;if(e&&e!==this)if(this.closed)mm(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ln(n,e)}remove(e){let{_finalizers:n}=this;n&&Ln(n,e),e instanceof t&&e._removeParent(this)}};ce.EMPTY=(()=>{let t=new ce;return t.closed=!0,t})();var gu=ce.EMPTY;function ea(t){return t instanceof ce||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function mm(t){A(t)?t():t.unsubscribe()}var ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ir={setTimeout(t,e,...n){let{delegate:r}=Ir;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ir;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ta(t){Ir.setTimeout(()=>{let{onUnhandledError:e}=ht;if(e)e(t);else throw t})}function Vn(){}var vm=mu("C",void 0,void 0);function ym(t){return mu("E",void 0,t)}function _m(t){return mu("N",t,void 0)}function mu(t,e,n){return{kind:t,value:e,error:n}}var jn=null;function br(t){if(ht.useDeprecatedSynchronousErrorHandling){let e=!jn;if(e&&(jn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=jn;if(jn=null,n)throw r}}else t()}function Cm(t){ht.useDeprecatedSynchronousErrorHandling&&jn&&(jn.errorThrown=!0,jn.error=t)}var Bn=class extends ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ea(e)&&e.add(this)):this.destination=hI}static create(e,n,r){return new Ht(e,n,r)}next(e){this.isStopped?yu(_m(e),this):this._next(e)}error(e){this.isStopped?yu(ym(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yu(vm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dI=Function.prototype.bind;function vu(t,e){return dI.call(t,e)}var _u=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){na(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){na(r)}else na(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){na(n)}}},Ht=class extends Bn{constructor(e,n,r){super();let i;if(A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ht.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vu(e.next,o),error:e.error&&vu(e.error,o),complete:e.complete&&vu(e.complete,o)}):i=e}this.destination=new _u(i)}};function na(t){ht.useDeprecatedSynchronousErrorHandling?Cm(t):ta(t)}function fI(t){throw t}function yu(t,e){let{onStoppedNotification:n}=ht;n&&Ir.setTimeout(()=>n(t,e))}var hI={closed:!0,next:Vn,error:fI,complete:Vn};var Sr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ce(t){return t}function Cu(...t){return Du(t)}function Du(t){return t.length===0?Ce:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var j=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=gI(n)?n:new Ht(n,r,i);return br(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Dm(r),new r((i,o)=>{let s=new Ht({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Sr](){return this}pipe(...n){return Du(n)(this)}toPromise(n){return n=Dm(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Dm(t){var e;return(e=t??ht.Promise)!==null&&e!==void 0?e:Promise}function pI(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function gI(t){return t&&t instanceof Bn||pI(t)&&ea(t)}function wu(t){return A(t?.lift)}function k(t){return e=>{if(wu(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function N(t,e,n,r,i){return new Eu(t,e,n,r,i)}var Eu=class extends Bn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mr(){return k((t,e)=>{let n=null;t._refCount++;let r=N(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Tr=class extends j{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,wu(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ce;let n=this.getSubject();e.add(this.source.subscribe(N(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ce.EMPTY)}return e}refCount(){return Mr()(this)}};var wm=Er(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=(()=>{class t extends j{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ra(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new wm}next(n){br(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){br(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){br(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gu:(this.currentObservers=null,o.push(n),new ce(()=>{this.currentObservers=null,Ln(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new j;return n.source=this,n}}return t.create=(e,n)=>new ra(e,n),t})(),ra=class extends re{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:gu}};var De=class extends re{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var eo={now(){return(eo.delegate||Date).now()},delegate:void 0};var ia=class extends re{constructor(e=1/0,n=1/0,r=eo){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var oa=class extends ce{constructor(e,n){super()}schedule(e,n=0){return this}};var to={setInterval(t,e,...n){let{delegate:r}=to;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=to;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ar=class extends oa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return to.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&to.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ln(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xr.now=eo.now;var Nr=class extends xr{constructor(e,n=xr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var no=new Nr(Ar);var sa=class extends Ar{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var aa=class extends Nr{};var Iu=new aa(sa);var Te=new j(t=>t.complete());function Em(t){return t&&A(t.schedule)}function bu(t){return t[t.length-1]}function Rr(t){return A(bu(t))?t.pop():void 0}function bt(t){return Em(bu(t))?t.pop():void 0}function Im(t,e){return typeof bu(t)=="number"?t.pop():e}var ca=t=>t&&typeof t.length=="number"&&typeof t!="function";function la(t){return A(t?.then)}function ua(t){return A(t[Sr])}function da(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function fa(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ha=mI();function pa(t){return A(t?.[ha])}function ga(t){return jg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield $s(n.read());if(i)return yield $s(void 0);yield yield $s(r)}}finally{n.releaseLock()}})}function ma(t){return A(t?.getReader)}function Z(t){if(t instanceof j)return t;if(t!=null){if(ua(t))return vI(t);if(ca(t))return yI(t);if(la(t))return _I(t);if(da(t))return bm(t);if(pa(t))return CI(t);if(ma(t))return DI(t)}throw fa(t)}function vI(t){return new j(e=>{let n=t[Sr]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yI(t){return new j(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _I(t){return new j(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ta)})}function CI(t){return new j(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function bm(t){return new j(e=>{wI(t,e).catch(n=>e.error(n))})}function DI(t){return bm(ga(t))}function wI(t,e){var n,r,i,o;return Vg(this,void 0,void 0,function*(){try{for(n=Bg(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Be(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Xe(t,e=0){return k((n,r)=>{n.subscribe(N(r,i=>Be(r,t,()=>r.next(i),e),()=>Be(r,t,()=>r.complete(),e),i=>Be(r,t,()=>r.error(i),e)))})}function pt(t,e=0){return k((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Sm(t,e){return Z(t).pipe(pt(e),Xe(e))}function Mm(t,e){return Z(t).pipe(pt(e),Xe(e))}function Tm(t,e){return new j(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Am(t,e){return new j(n=>{let r;return Be(n,e,()=>{r=t[ha](),Be(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}function va(t,e){if(!t)throw new Error("Iterable cannot be null");return new j(n=>{Be(n,e,()=>{let r=t[Symbol.asyncIterator]();Be(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function xm(t,e){return va(ga(t),e)}function Nm(t,e){if(t!=null){if(ua(t))return Sm(t,e);if(ca(t))return Tm(t,e);if(la(t))return Mm(t,e);if(da(t))return va(t,e);if(pa(t))return Am(t,e);if(ma(t))return xm(t,e)}throw fa(t)}function J(t,e){return e?Nm(t,e):Z(t)}function b(...t){let e=bt(t);return J(t,e)}function kr(t,e){let n=A(t)?t:()=>t,r=i=>i.error(n());return new j(e?i=>e.schedule(r,0,i):r)}function Su(t){return!!t&&(t instanceof j||A(t.lift)&&A(t.subscribe))}var zt=Er(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function S(t,e){return k((n,r)=>{let i=0;n.subscribe(N(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:EI}=Array;function II(t,e){return EI(e)?t(...e):t(e)}function ya(t){return S(e=>II(t,e))}var{isArray:bI}=Array,{getPrototypeOf:SI,prototype:MI,keys:TI}=Object;function _a(t){if(t.length===1){let e=t[0];if(bI(e))return{args:e,keys:null};if(AI(e)){let n=TI(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function AI(t){return t&&typeof t=="object"&&SI(t)===MI}function Ca(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Da(...t){let e=bt(t),n=Rr(t),{args:r,keys:i}=_a(t);if(r.length===0)return J([],e);let o=new j(xI(r,e,i?s=>Ca(i,s):Ce));return n?o.pipe(ya(n)):o}function xI(t,e,n=Ce){return r=>{Rm(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Rm(e,()=>{let l=J(t[c],e),u=!1;l.subscribe(N(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Rm(t,e,n){t?Be(n,t,e):e()}function km(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=v=>l<r?p(v):c.push(v),p=v=>{o&&e.next(v),l++;let D=!1;Z(n(v,u++)).subscribe(N(e,M=>{i?.(M),o?h(M):e.next(M)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<r;){let M=c.shift();s?Be(e,s,()=>p(M)):p(M)}f()}catch(M){e.error(M)}}))};return t.subscribe(N(e,h,()=>{d=!0,f()})),()=>{a?.()}}function pe(t,e,n=1/0){return A(e)?pe((r,i)=>S((o,s)=>e(r,o,i,s))(Z(t(r,i))),n):(typeof e=="number"&&(n=e),k((r,i)=>km(r,i,t,n)))}function ro(t=1/0){return pe(Ce,t)}function Om(){return ro(1)}function Or(...t){return Om()(J(t,bt(t)))}function wa(t){return new j(e=>{Z(t()).subscribe(e)})}function Mu(...t){let e=Rr(t),{args:n,keys:r}=_a(t),i=new j(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Z(n[u]).subscribe(N(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Ca(r,a):a),o.complete())}))}});return e?i.pipe(ya(e)):i}function Pr(...t){let e=bt(t),n=Im(t,1/0),r=t;return r.length?r.length===1?Z(r[0]):ro(n)(J(r,e)):Te}function ze(t,e){return k((n,r)=>{let i=0;n.subscribe(N(r,o=>t.call(e,o,i++)&&r.next(o)))})}function dn(t){return k((e,n)=>{let r=null,i=!1,o;r=e.subscribe(N(n,void 0,void 0,s=>{o=Z(t(s,dn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Pm(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(N(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Fr(t,e){return A(e)?pe(t,e,1):pe(t,1)}function fn(t){return k((e,n)=>{let r=!1;e.subscribe(N(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Wt(t){return t<=0?()=>Te:k((e,n)=>{let r=0;e.subscribe(N(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Tu(t){return S(()=>t)}function Au(t,e=Ce){return t=t??NI,k((n,r)=>{let i,o=!0;n.subscribe(N(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function NI(t,e){return t===e}function Ea(t=RI){return k((e,n)=>{let r=!1;e.subscribe(N(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function RI(){return new zt}function io(t){return k((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Je(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ze((i,o)=>t(i,o,r)):Ce,Wt(1),n?fn(e):Ea(()=>new zt))}function Lr(t){return t<=0?()=>Te:k((e,n)=>{let r=[];e.subscribe(N(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function xu(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ze((i,o)=>t(i,o,r)):Ce,Lr(1),n?fn(e):Ea(()=>new zt))}function Vr(t,e){return k(Pm(t,e,arguments.length>=2,!0))}function oo(t={}){let{connector:e=()=>new re,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,u=d=!1},p=()=>{let v=s;h(),v?.unsubscribe()};return k((v,D)=>{l++,!d&&!u&&f();let M=c=c??e();D.add(()=>{l--,l===0&&!d&&!u&&(a=Nu(p,i))}),M.subscribe(D),!s&&l>0&&(s=new Ht({next:Q=>M.next(Q),error:Q=>{d=!0,f(),a=Nu(h,n,Q),M.error(Q)},complete:()=>{u=!0,f(),a=Nu(h,r),M.complete()}}),Z(v).subscribe(s))})(o)}}function Nu(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Ht({next:()=>{r.unsubscribe(),t()}});return Z(e(...n)).subscribe(r)}function Ia(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,oo({connector:()=>new ia(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ru(t){return k((e,n)=>{let r=!1,i=0;e.subscribe(N(n,o=>(r||(r=!t(o,i++)))&&n.next(o)))})}function ku(...t){let e=bt(t);return k((n,r)=>{(e?Or(t,n,e):Or(t,n)).subscribe(r)})}function ie(t,e){return k((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(N(r,c=>{i?.unsubscribe();let l=0,u=o++;Z(t(c,u)).subscribe(i=N(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ba(t,e){return A(e)?ie(()=>t,e):ie(()=>t)}function Ou(t){return k((e,n)=>{Z(t).subscribe(N(n,()=>n.complete(),Vn)),!n.closed&&e.subscribe(n)})}function ge(t,e,n){let r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?k((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(N(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ce}function Pu(...t){let e=Rr(t);return k((n,r)=>{let i=t.length,o=new Array(i),s=t.map(()=>!1),a=!1;for(let c=0;c<i;c++)Z(t[c]).subscribe(N(r,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ce))&&(s=null))},Vn));n.subscribe(N(r,c=>{if(a){let l=[c,...o];r.next(e?e(...l):l)}}))})}var kI="https://g.co/ng/security#xss",E=class extends Error{constructor(e,n){super(Od(e,n)),this.code=e}};function Od(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function _o(t){return{toString:t}.toString()}var Sa="__parameters__";function OI(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Dv(t,e,n){return _o(()=>{let r=OI(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Sa)?c[Sa]:Object.defineProperty(c,Sa,{value:[]})[Sa];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Yt=globalThis;function K(t){for(let e in t)if(t[e]===K)return e;throw Error("Could not find renamed property on target object.")}function PI(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function xe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(xe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Fm(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var FI=K({__forward_ref__:K});function Kn(t){return t.__forward_ref__=Kn,t.toString=function(){return xe(this())},t}function Ae(t){return wv(t)?t():t}function wv(t){return typeof t=="function"&&t.hasOwnProperty(FI)&&t.__forward_ref__===Kn}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function we(t){return{providers:t.providers||[],imports:t.imports||[]}}function ac(t){return Lm(t,Iv)||Lm(t,bv)}function Ev(t){return ac(t)!==null}function Lm(t,e){return t.hasOwnProperty(e)?t[e]:null}function LI(t){let e=t&&(t[Iv]||t[bv]);return e||null}function Vm(t){return t&&(t.hasOwnProperty(jm)||t.hasOwnProperty(VI))?t[jm]:null}var Iv=K({\u0275prov:K}),jm=K({\u0275inj:K}),bv=K({ngInjectableDef:K}),VI=K({ngInjectorDef:K}),C=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=w({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Sv(t){return t&&!!t.\u0275providers}var jI=K({\u0275cmp:K}),BI=K({\u0275dir:K}),UI=K({\u0275pipe:K}),$I=K({\u0275mod:K}),Pa=K({\u0275fac:K}),ao=K({__NG_ELEMENT_ID__:K}),Bm=K({__NG_ENV_ID__:K});function Mv(t){return typeof t=="string"?t:t==null?"":String(t)}function HI(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Mv(t)}function zI(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new E(-200,t)}function Pd(t,e){throw new E(-201,!1)}var P=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(P||{}),Yu;function Tv(){return Yu}function et(t){let e=Yu;return Yu=t,e}function Av(t,e,n){let r=ac(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&P.Optional)return null;if(e!==void 0)return e;Pd(t,"Injector")}var WI={},lo=WI,Zu="__NG_DI_FLAG__",Fa="ngTempTokenPath",GI="ngTokenPath",qI=/\n/gm,QI="\u0275",Um="__source",$r;function YI(){return $r}function hn(t){let e=$r;return $r=t,e}function ZI(t,e=P.Default){if($r===void 0)throw new E(-203,!1);return $r===null?Av(t,void 0,e):$r.get(t,e&P.Optional?null:void 0,e)}function m(t,e=P.Default){return(Tv()||ZI)(Ae(t),e)}function _(t,e=P.Default){return m(t,cc(e))}function cc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ku(t){let e=[];for(let n=0;n<t.length;n++){let r=Ae(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=P.Default;for(let s=0;s<r.length;s++){let a=r[s],c=KI(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(m(i,o))}else e.push(m(r))}return e}function xv(t,e){return t[Zu]=e,t.prototype[Zu]=e,t}function KI(t){return t[Zu]}function XI(t,e,n,r){let i=t[Fa];throw e[Um]&&i.unshift(e[Um]),t.message=JI(`
`+t.message,i,n,r),t[GI]=i,t[Fa]=null,t}function JI(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==QI?t.slice(2):t;let i=xe(e);if(Array.isArray(e))i=e.map(xe).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):xe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(qI,`
  `)}`}var ti=xv(Dv("Optional"),8);var Nv=xv(Dv("SkipSelf"),4);function zr(t,e){let n=t.hasOwnProperty(Pa);return n?t[Pa]:null}function Fd(t,e){t.forEach(n=>Array.isArray(n)?Fd(n,e):e(n))}function Rv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function La(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function eb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function tb(t,e,n){let r=Co(t,e);return r>=0?t[r|1]=n:(r=~r,eb(t,r,e,n)),r}function Fu(t,e){let n=Co(t,e);if(n>=0)return t[n|1]}function Co(t,e){return nb(t,e,1)}function nb(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Wr={},tt=[],Gr=new C(""),kv=new C("",-1),Ov=new C(""),Va=class{get(e,n=lo){if(n===lo){let r=new Error(`NullInjectorError: No provider for ${xe(e)}!`);throw r.name="NullInjectorError",r}return n}},Pv=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Pv||{}),Tt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Tt||{}),mn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(mn||{});function rb(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Xu(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];ob(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ib(t){return t===3||t===4||t===6}function ob(t){return t.charCodeAt(0)===64}function uo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?$m(t,n,i,null,e[++r]):$m(t,n,i,null,null))}}return t}function $m(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Fv="ng-template";function sb(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&rb(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ld(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ld(t){return t.type===4&&t.value!==Fv}function ab(t,e,n){let r=t.type===4&&!n?Fv:t.value;return e===r}function cb(t,e,n){let r=4,i=t.attrs,o=i!==null?db(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!gt(r)&&!gt(c))return!1;if(s&&gt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!ab(t,c,n)||c===""&&e.length===1){if(gt(r))return!1;s=!0}}else if(r&8){if(i===null||!sb(t,i,c,n)){if(gt(r))return!1;s=!0}}else{let l=e[++a],u=lb(c,i,Ld(t),n);if(u===-1){if(gt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(gt(r))return!1;s=!0}}}}return gt(r)||s}function gt(t){return(t&1)===0}function lb(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return fb(e,t)}function ub(t,e,n=!1){for(let r=0;r<e.length;r++)if(cb(t,e[r],n))return!0;return!1}function db(t){for(let e=0;e<t.length;e++){let n=t[e];if(ib(n))return e}return t.length}function fb(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Hm(t,e){return t?":not("+e.trim()+")":e}function hb(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!gt(s)&&(e+=Hm(o,i),i=""),r=s,o=o||!gt(r);n++}return i!==""&&(e+=Hm(o,i)),e}function pb(t){return t.map(hb).join(",")}function gb(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!gt(i))break;i=o}r++}return{attrs:e,classes:n}}function Rt(t){return _o(()=>{let e=Uv(t),n=$(y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Pv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Tt.Emulated,styles:t.styles||tt,_:null,schemas:t.schemas||null,tView:null,id:""});$v(n);let r=t.dependencies;return n.directiveDefs=Wm(r,!1),n.pipeDefs=Wm(r,!0),n.id=yb(n),n})}function mb(t){return Hn(t)||Lv(t)}function vb(t){return t!==null}function Ee(t){return _o(()=>({type:t.type,bootstrap:t.bootstrap||tt,declarations:t.declarations||tt,imports:t.imports||tt,exports:t.exports||tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function zm(t,e){if(t==null)return Wr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=mn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==mn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Ie(t){return _o(()=>{let e=Uv(t);return $v(e),e})}function Hn(t){return t[jI]||null}function Lv(t){return t[BI]||null}function Vv(t){return t[UI]||null}function jv(t){let e=Hn(t)||Lv(t)||Vv(t);return e!==null?e.standalone:!1}function Bv(t,e){let n=t[$I]||null;if(!n&&e===!0)throw new Error(`Type ${xe(t)} does not have '\u0275mod' property.`);return n}function Uv(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Wr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||tt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zm(t.inputs,e),outputs:zm(t.outputs),debugInfo:null}}function $v(t){t.features?.forEach(e=>e(t))}function Wm(t,e){if(!t)return null;let n=e?Vv:mb;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(vb)}function yb(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Vd(t){return{\u0275providers:t}}function _b(...t){return{\u0275providers:Hv(!0,t),\u0275fromNgModule:!0}}function Hv(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Fd(e,s=>{let a=s;Ju(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&zv(i,o),n}function zv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];jd(i,o=>{e(o,r)})}}function Ju(t,e,n,r){if(t=Ae(t),!t)return!1;let i=null,o=Vm(t),s=!o&&Hn(t);if(!o&&!s){let c=t.ngModule;if(o=Vm(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Ju(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Fd(o.imports,u=>{Ju(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&zv(l,e)}if(!a){let l=zr(i)||(()=>new i);e({provide:i,useFactory:l,deps:tt},i),e({provide:Ov,useValue:i,multi:!0},i),e({provide:Gr,useValue:()=>m(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;jd(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function jd(t,e){for(let n of t)Sv(n)&&(n=n.\u0275providers),Array.isArray(n)?jd(n,e):e(n)}var Cb=K({provide:String,useValue:K});function Wv(t){return t!==null&&typeof t=="object"&&Cb in t}function Db(t){return!!(t&&t.useExisting)}function wb(t){return!!(t&&t.useFactory)}function qr(t){return typeof t=="function"}function Eb(t){return!!t.useClass}var lc=new C(""),Na={},Ib={},Lu;function Bd(){return Lu===void 0&&(Lu=new Va),Lu}var it=class{},fo=class extends it{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,td(e,s=>this.processProvider(s)),this.records.set(kv,jr(void 0,this)),i.has("environment")&&this.records.set(it,jr(void 0,this));let o=this.records.get(lc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ov,tt,P.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=H(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),H(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=hn(this),r=et(void 0),i;try{return e()}finally{hn(n),et(r)}}get(e,n=lo,r=P.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Bm))return e[Bm](this);r=cc(r);let i,o=hn(this),s=et(void 0);try{if(!(r&P.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Ab(e)&&ac(e);l&&this.injectableDefInScope(l)?c=jr(ed(e),Na):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&P.Self?Bd():this.parent;return n=r&P.Optional&&n===lo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Fa]=a[Fa]||[]).unshift(xe(e)),o)throw a;return XI(a,e,"R3InjectorError",this.source)}else throw a}finally{et(s),hn(o)}}resolveInjectorInitializers(){let e=H(null),n=hn(this),r=et(void 0),i;try{let o=this.get(Gr,tt,P.Self);for(let s of o)s()}finally{hn(n),et(r),H(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(xe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(e){e=Ae(e);let n=qr(e)?e:Ae(e&&e.provide),r=Sb(e);if(!qr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=jr(void 0,Na,!0),i.factory=()=>Ku(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=H(null);try{return n.value===Na&&(n.value=Ib,n.value=n.factory()),typeof n.value=="object"&&n.value&&Tb(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{H(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ae(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ed(t){let e=ac(t),n=e!==null?e.factory:zr(t);if(n!==null)return n;if(t instanceof C)throw new E(204,!1);if(t instanceof Function)return bb(t);throw new E(204,!1)}function bb(t){if(t.length>0)throw new E(204,!1);let n=LI(t);return n!==null?()=>n.factory(t):()=>new t}function Sb(t){if(Wv(t))return jr(void 0,t.useValue);{let e=Gv(t);return jr(e,Na)}}function Gv(t,e,n){let r;if(qr(t)){let i=Ae(t);return zr(i)||ed(i)}else if(Wv(t))r=()=>Ae(t.useValue);else if(wb(t))r=()=>t.useFactory(...Ku(t.deps||[]));else if(Db(t))r=()=>m(Ae(t.useExisting));else{let i=Ae(t&&(t.useClass||t.provide));if(Mb(t))r=()=>new i(...Ku(t.deps));else return zr(i)||ed(i)}return r}function jr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Mb(t){return!!t.deps}function Tb(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Ab(t){return typeof t=="function"||typeof t=="object"&&t instanceof C}function td(t,e){for(let n of t)Array.isArray(n)?td(n,e):n&&Sv(n)?td(n.\u0275providers,e):e(n)}function Zt(t,e){t instanceof fo&&t.assertNotDestroyed();let n,r=hn(t),i=et(void 0);try{return e()}finally{hn(r),et(i)}}function xb(){return Tv()!==void 0||YI()!=null}function Nb(t){let e=Yt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Rb(t){return typeof t=="function"}var Kt=0,B=1,x=2,Ne=3,mt=4,yt=5,ja=6,Ba=7,vt=8,Qr=9,Gt=10,ve=11,ho=12,Gm=13,ni=14,At=15,Yr=16,Br=17,Zr=18,uc=19,qv=20,pn=21,Vu=22,nt=23,vn=25,Qv=1;var zn=7,Ua=8,$a=9,rt=10,Ha=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ha||{});function gn(t){return Array.isArray(t)&&typeof t[Qv]=="object"}function Xt(t){return Array.isArray(t)&&t[Qv]===!0}function Yv(t){return(t.flags&4)!==0}function dc(t){return t.componentOffset>-1}function Ud(t){return(t.flags&1)===1}function yn(t){return!!t.template}function nd(t){return(t[x]&512)!==0}var rd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Zv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ri(){return Kv}function Kv(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ob),kb}ri.ngInherit=!0;function kb(){let t=Jv(this),e=t?.current;if(e){let n=t.previous;if(n===Wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ob(t,e,n,r,i){let o=this.declaredInputs[r],s=Jv(t)||Pb(t,{previous:Wr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new rd(l&&l.currentValue,n,c===Wr),Zv(t,e,i,n)}var Xv="__ngSimpleChanges__";function Jv(t){return t[Xv]||null}function Pb(t,e){return t[Xv]=e}var qm=null;var St=function(t,e,n){qm?.(t,e,n)},Fb="svg",Lb="math";function xt(t){for(;Array.isArray(t);)t=t[Kt];return t}function ey(t,e){return xt(e[t])}function _t(t,e){return xt(e[t.index])}function ty(t,e){return t.data[e]}function Dn(t,e){let n=e[t];return gn(n)?n:n[Kt]}function $d(t){return(t[x]&128)===128}function Vb(t){return Xt(t[Ne])}function za(t,e){return e==null?null:t[e]}function ny(t){t[Br]=0}function ry(t){t[x]&1024||(t[x]|=1024,$d(t)&&fc(t))}function jb(t,e){for(;t>0;)e=e[ni],t--;return e}function po(t){return!!(t[x]&9216||t[nt]?.dirty)}function id(t){t[Gt].changeDetectionScheduler?.notify(7),t[x]&64&&(t[x]|=1024),po(t)&&fc(t)}function fc(t){t[Gt].changeDetectionScheduler?.notify(0);let e=Wn(t);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!$d(e)));)e=Wn(e)}function iy(t,e){if((t[x]&256)===256)throw new E(911,!1);t[pn]===null&&(t[pn]=[]),t[pn].push(e)}function Bb(t,e){if(t[pn]===null)return;let n=t[pn].indexOf(e);n!==-1&&t[pn].splice(n,1)}function Wn(t){let e=t[Ne];return Xt(e)?e[Ne]:e}var U={lFrame:hy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var oy=!1;function Ub(){return U.lFrame.elementDepthCount}function $b(){U.lFrame.elementDepthCount++}function Hb(){U.lFrame.elementDepthCount--}function sy(){return U.bindingsEnabled}function zb(){return U.skipHydrationRootTNode!==null}function Wb(t){return U.skipHydrationRootTNode===t}function Gb(){U.skipHydrationRootTNode=null}function oe(){return U.lFrame.lView}function ot(){return U.lFrame.tView}function Xn(t){return U.lFrame.contextLView=t,t[vt]}function Jn(t){return U.lFrame.contextLView=null,t}function Ue(){let t=ay();for(;t!==null&&t.type===64;)t=t.parent;return t}function ay(){return U.lFrame.currentTNode}function qb(){let t=U.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Do(t,e){let n=U.lFrame;n.currentTNode=t,n.isParent=e}function cy(){return U.lFrame.isParent}function Qb(){U.lFrame.isParent=!1}function ly(){return oy}function Qm(t){oy=t}function Yb(t){return U.lFrame.bindingIndex=t}function Hd(){return U.lFrame.bindingIndex++}function Zb(t){let e=U.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Kb(){return U.lFrame.inI18n}function Xb(t,e){let n=U.lFrame;n.bindingIndex=n.bindingRootIndex=t,od(e)}function Jb(){return U.lFrame.currentDirectiveIndex}function od(t){U.lFrame.currentDirectiveIndex=t}function e0(t){let e=U.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function uy(t){U.lFrame.currentQueryIndex=t}function t0(t){let e=t[B];return e.type===2?e.declTNode:e.type===1?t[yt]:null}function dy(t,e,n){if(n&P.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&P.Host);)if(i=t0(o),i===null||(o=o[ni],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=U.lFrame=fy();return r.currentTNode=e,r.lView=t,!0}function zd(t){let e=fy(),n=t[B];U.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fy(){let t=U.lFrame,e=t===null?null:t.child;return e===null?hy(t):e}function hy(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function py(){let t=U.lFrame;return U.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var gy=py;function Wd(){let t=py();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function n0(t){return(U.lFrame.contextLView=jb(t,U.lFrame.contextLView))[vt]}function ii(){return U.lFrame.selectedIndex}function Gn(t){U.lFrame.selectedIndex=t}function my(){let t=U.lFrame;return ty(t.tView,t.selectedIndex)}function r0(){return U.lFrame.currentNamespace}var vy=!0;function Gd(){return vy}function qd(t){vy=t}function i0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Kv(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Qd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ra(t,e,n){yy(t,e,3,n)}function ka(t,e,n,r){(t[x]&3)===n&&yy(t,e,n,r)}function ju(t,e){let n=t[x];(n&3)===e&&(n&=16383,n+=1,t[x]=n)}function yy(t,e,n,r){let i=r!==void 0?t[Br]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Br]+=65536),(a<o||o==-1)&&(o0(t,n,e,c),t[Br]=(t[Br]&4294901760)+c+2),c++}function Ym(t,e){St(4,t,e);let n=H(null);try{e.call(t)}finally{H(n),St(5,t,e)}}function o0(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[x]>>14<t[Br]>>16&&(t[x]&3)===e&&(t[x]+=16384,Ym(a,o)):Ym(a,o)}var Hr=-1,qn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function s0(t){return t instanceof qn}function a0(t){return(t.flags&8)!==0}function c0(t){return(t.flags&16)!==0}var Bu={},sd=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=cc(r);let i=this.injector.get(e,Bu,r);return i!==Bu||n===Bu?i:this.parentInjector.get(e,n,r)}};function _y(t){return t!==Hr}function Wa(t){return t&32767}function l0(t){return t>>16}function Ga(t,e){let n=l0(t),r=e;for(;n>0;)r=r[ni],n--;return r}var ad=!0;function Zm(t){let e=ad;return ad=t,e}var u0=256,Cy=u0-1,Dy=5,d0=0,Mt={};function f0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ao)&&(r=n[ao]),r==null&&(r=n[ao]=d0++);let i=r&Cy,o=1<<i;e.data[t+(i>>Dy)]|=o}function qa(t,e){let n=wy(t,e);if(n!==-1)return n;let r=e[B];r.firstCreatePass&&(t.injectorIndex=e.length,Uu(r.data,t),Uu(e,null),Uu(r.blueprint,null));let i=Yd(t,e),o=t.injectorIndex;if(_y(i)){let s=Wa(i),a=Ga(i,e),c=a[B].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Uu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wy(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Yd(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=My(i),r===null)return Hr;if(n++,i=i[ni],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Hr}function cd(t,e,n){f0(t,e,n)}function Ey(t,e,n){if(n&P.Optional||t!==void 0)return t;Pd(e,"NodeInjector")}function Iy(t,e,n,r){if(n&P.Optional&&r===void 0&&(r=null),!(n&(P.Self|P.Host))){let i=t[Qr],o=et(void 0);try{return i?i.get(e,r,n&P.Optional):Av(e,r,n&P.Optional)}finally{et(o)}}return Ey(r,e,n)}function by(t,e,n,r=P.Default,i){if(t!==null){if(e[x]&2048&&!(r&P.Self)){let s=v0(t,e,n,r,Mt);if(s!==Mt)return s}let o=Sy(t,e,n,r,Mt);if(o!==Mt)return o}return Iy(e,n,r,i)}function Sy(t,e,n,r,i){let o=g0(n);if(typeof o=="function"){if(!dy(e,t,r))return r&P.Host?Ey(i,n,r):Iy(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&P.Optional))Pd(n);else return s}finally{gy()}}else if(typeof o=="number"){let s=null,a=wy(t,e),c=Hr,l=r&P.Host?e[At][yt]:null;for((a===-1||r&P.SkipSelf)&&(c=a===-1?Yd(t,e):e[a+8],c===Hr||!Xm(r,!1)?a=-1:(s=e[B],a=Wa(c),e=Ga(c,e)));a!==-1;){let u=e[B];if(Km(o,a,u.data)){let d=h0(a,e,n,s,r,l);if(d!==Mt)return d}c=e[a+8],c!==Hr&&Xm(r,e[B].data[a+8]===l)&&Km(o,a,e)?(s=u,a=Wa(c),e=Ga(c,e)):a=-1}}return i}function h0(t,e,n,r,i,o){let s=e[B],a=s.data[t+8],c=r==null?dc(a)&&ad:r!=s&&(a.type&3)!==0,l=i&P.Host&&o===a,u=p0(a,s,n,c,l);return u!==null?Kr(e,s,u,a):Mt}function p0(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&yn(h)&&h.type===n)return c}return null}function Kr(t,e,n,r){let i=t[n],o=e.data;if(s0(i)){let s=i;s.resolving&&zI(HI(o[n]));let a=Zm(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?et(s.injectImpl):null,u=dy(t,r,P.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&i0(n,o[n],e)}finally{l!==null&&et(l),Zm(a),s.resolving=!1,gy()}}return i}function g0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ao)?t[ao]:void 0;return typeof e=="number"?e>=0?e&Cy:m0:e}function Km(t,e,n){let r=1<<t;return!!(n[e+(t>>Dy)]&r)}function Xm(t,e){return!(t&P.Self)&&!(t&P.Host&&e)}var $n=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return by(this._tNode,this._lView,e,cc(r),n)}};function m0(){return new $n(Ue(),oe())}function oi(t){return _o(()=>{let e=t.prototype.constructor,n=e[Pa]||ld(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Pa]||ld(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ld(t){return wv(t)?()=>{let e=ld(Ae(t));return e&&e()}:zr(t)}function v0(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[x]&2048&&!(s[x]&512);){let a=Sy(o,s,n,r|P.Self,Mt);if(a!==Mt)return a;let c=o.parent;if(!c){let l=s[qv];if(l){let u=l.get(n,Mt,r);if(u!==Mt)return u}c=My(s),s=s[ni]}o=c}return i}function My(t){let e=t[B],n=e.type;return n===2?e.declTNode:n===1?t[yt]:null}function Jm(t,e=null,n=null,r){let i=Ty(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ty(t,e=null,n=null,r,i=new Set){let o=[n||tt,_b(t)];return r=r||(typeof t=="object"?void 0:xe(t)),new fo(o,e||Bd(),r||null,i)}var Un=class Un{static create(e,n){if(Array.isArray(e))return Jm({name:""},n,e,"");{let r=e.name??"";return Jm({name:r},e.parent,e.providers,r)}}};Un.THROW_IF_NOT_FOUND=lo,Un.NULL=new Va,Un.\u0275prov=w({token:Un,providedIn:"any",factory:()=>m(kv)}),Un.__NG_ELEMENT_ID__=-1;var Nt=Un;var y0=new C("");y0.__NG_ELEMENT_ID__=t=>{let e=Ue();if(e===null)throw new E(204,!1);if(e.type&2)return e.value;if(t&P.Optional)return null;throw new E(204,!1)};var _0="ngOriginalError";function $u(t){return t[_0]}var Ay=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=C0,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),ud=class extends Ay{constructor(e){super(),this._lView=e}onDestroy(e){return iy(this._lView,e),()=>Bb(this._lView,e)}};function C0(){return new ud(oe())}var si=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new De(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var dd=class extends re{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,xb()&&(this.destroyRef=_(Ay,{optional:!0})??void 0,this.pendingTasks=_(si,{optional:!0})??void 0)}emit(e){let n=H(null);try{super.next(e)}finally{H(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ce&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},te=dd;function Qa(...t){}function xy(t){let e,n;function r(){t=Qa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function ev(t){return queueMicrotask(()=>t()),()=>{t=Qa}}var Zd="isAngularZone",Ya=Zd+"_ID",D0=0,q=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new te(!1),this.onMicrotaskEmpty=new te(!1),this.onStable=new te(!1),this.onError=new te(!1),typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,I0(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Zd)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,w0,Qa,Qa);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},w0={};function Kd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function E0(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{xy(()=>{t.callbackScheduled=!1,fd(t),t.isCheckStableRunning=!0,Kd(t),t.isCheckStableRunning=!1})}),fd(t))}function I0(t){let e=()=>{E0(t)},n=D0++;t._inner=t._inner.fork({name:"angular",properties:{[Zd]:!0,[Ya]:n,[Ya+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(b0(c))return r.invokeTask(o,s,a,c);try{return tv(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),nv(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return tv(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!S0(c)&&e(),nv(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,fd(t),Kd(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function fd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function tv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nv(t){t._nesting--,Kd(t)}var Za=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new te,this.onMicrotaskEmpty=new te,this.onStable=new te,this.onError=new te}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function b0(t){return Ny(t,"__ignore_ng_zone__")}function S0(t){return Ny(t,"__scheduler_tick__")}function Ny(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function M0(t="zone.js",e){return t==="noop"?new Za:t==="zone.js"?new q(e):t}var _n=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&$u(e);for(;n&&$u(n);)n=$u(n);return n||null}},T0=new C("",{providedIn:"root",factory:()=>{let t=_(q),e=_(_n);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function A0(){return hc(Ue(),oe())}function hc(t,e){return new er(_t(t,e))}var er=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=A0;let t=e;return t})();function Ry(t){return(t.flags&128)===128}var ky=new Map,x0=0;function N0(){return x0++}function R0(t){ky.set(t[uc],t)}function k0(t){ky.delete(t[uc])}var rv="__ngContext__";function Qn(t,e){gn(e)?(t[rv]=e[uc],R0(e)):t[rv]=e}function Oy(t){return Fy(t[ho])}function Py(t){return Fy(t[mt])}function Fy(t){for(;t!==null&&!Xt(t);)t=t[mt];return t}var hd;function Ly(t){hd=t}function O0(){if(hd!==void 0)return hd;if(typeof document<"u")return document;throw new E(210,!1)}var pc=new C("",{providedIn:"root",factory:()=>P0}),P0="ng",Xd=new C(""),st=new C("",{providedIn:"platform",factory:()=>"unknown"});var Jd=new C("",{providedIn:"root",factory:()=>O0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var F0="h",L0="b";var V0=()=>null;function ef(t,e,n=!1){return V0(t,e,n)}var Vy=!1,j0=new C("",{providedIn:"root",factory:()=>Vy});var pd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kI})`}};function tf(t){return t instanceof pd?t.changingThisBreaksApplicationSecurity:t}function jy(t){return t instanceof Function?t():t}var qt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(qt||{}),B0;function nf(t,e){return B0(t,e)}function Ur(t,e,n,r,i){if(r!=null){let o,s=!1;Xt(r)?o=r:gn(r)&&(s=!0,r=r[Kt]);let a=xt(r);t===0&&n!==null?i==null?zy(e,n,a):Ka(e,n,a,i||null,!0):t===1&&n!==null?Ka(e,n,a,i||null,!0):t===2?tS(e,a,s):t===3&&e.destroyNode(a),o!=null&&rS(e,t,o,n,i)}}function U0(t,e){return t.createText(e)}function $0(t,e,n){t.setValue(e,n)}function By(t,e,n){return t.createElement(e,n)}function H0(t,e){Uy(t,e),e[Kt]=null,e[yt]=null}function z0(t,e,n,r,i,o){r[Kt]=i,r[yt]=e,gc(t,r,n,1,i,o)}function Uy(t,e){e[Gt].changeDetectionScheduler?.notify(8),gc(t,e,e[ve],2,null,null)}function W0(t){let e=t[ho];if(!e)return Hu(t[B],t);for(;e;){let n=null;if(gn(e))n=e[ho];else{let r=e[rt];r&&(n=r)}if(!n){for(;e&&!e[mt]&&e!==t;)gn(e)&&Hu(e[B],e),e=e[Ne];e===null&&(e=t),gn(e)&&Hu(e[B],e),n=e&&e[mt]}e=n}}function G0(t,e,n,r){let i=rt+r,o=n.length;r>0&&(n[i-1][mt]=e),r<o-rt?(e[mt]=n[i],Rv(n,rt+r,e)):(n.push(e),e[mt]=null),e[Ne]=n;let s=e[Yr];s!==null&&n!==s&&$y(s,e);let a=e[Zr];a!==null&&a.insertView(t),id(e),e[x]|=128}function $y(t,e){let n=t[$a],r=e[Ne];if(gn(r))t[x]|=Ha.HasTransplantedViews;else{let i=r[Ne][At];e[At]!==i&&(t[x]|=Ha.HasTransplantedViews)}n===null?t[$a]=[e]:n.push(e)}function rf(t,e){let n=t[$a],r=n.indexOf(e);n.splice(r,1)}function gd(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n];if(r){let i=r[Yr];i!==null&&i!==t&&rf(i,r),e>0&&(t[n-1][mt]=r[mt]);let o=La(t,rt+e);H0(r[B],r);let s=o[Zr];s!==null&&s.detachView(o[B]),r[Ne]=null,r[mt]=null,r[x]&=-129}return r}function Hy(t,e){if(!(e[x]&256)){let n=e[ve];n.destroyNode&&gc(t,e,n,3,null,null),W0(e)}}function Hu(t,e){if(e[x]&256)return;let n=H(null);try{e[x]&=-129,e[x]|=256,e[nt]&&hu(e[nt]),Q0(t,e),q0(t,e),e[B].type===1&&e[ve].destroy();let r=e[Yr];if(r!==null&&Xt(e[Ne])){r!==e[Ne]&&rf(r,e);let i=e[Zr];i!==null&&i.detachView(t)}k0(e)}finally{H(n)}}function q0(t,e){let n=t.cleanup,r=e[Ba];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ba]=null);let i=e[pn];if(i!==null){e[pn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Q0(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof qn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];St(4,a,c);try{c.call(a)}finally{St(5,a,c)}}else{St(4,i,o);try{o.call(i)}finally{St(5,i,o)}}}}}function Y0(t,e,n){return Z0(t,e.parent,n)}function Z0(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Kt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Tt.None||o===Tt.Emulated)return null}return _t(r,n)}}function Ka(t,e,n,r,i){t.insertBefore(e,n,r,i)}function zy(t,e,n){t.appendChild(e,n)}function iv(t,e,n,r,i){r!==null?Ka(t,e,n,r,i):zy(t,e,n)}function Wy(t,e){return t.parentNode(e)}function K0(t,e){return t.nextSibling(e)}function X0(t,e,n){return eS(t,e,n)}function J0(t,e,n){return t.type&40?_t(t,n):null}var eS=J0,ov;function of(t,e,n,r){let i=Y0(t,r,e),o=e[ve],s=r.parent||e[yt],a=X0(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)iv(o,i,n[c],a,!1);else iv(o,i,n,a,!1);ov!==void 0&&ov(o,r,e,n,i)}function so(t,e){if(e!==null){let n=e.type;if(n&3)return _t(e,t);if(n&4)return md(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return so(t,r);{let i=t[e.index];return Xt(i)?md(-1,i):xt(i)}}else{if(n&128)return so(t,e.next);if(n&32)return nf(e,t)()||xt(t[e.index]);{let r=Gy(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wn(t[At]);return so(i,r)}else return so(t,e.next)}}}return null}function Gy(t,e){if(e!==null){let r=t[At][yt],i=e.projection;return r.projection[i]}return null}function md(t,e){let n=rt+t+1;if(n<e.length){let r=e[n],i=r[B].firstChild;if(i!==null)return so(r,i)}return e[zn]}function tS(t,e,n){t.removeChild(null,e,n)}function sf(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Qn(xt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)sf(t,e,n.child,r,i,o,!1),Ur(e,t,i,a,o);else if(c&32){let l=nf(n,r),u;for(;u=l();)Ur(e,t,i,u,o);Ur(e,t,i,a,o)}else c&16?nS(t,e,r,n,i,o):Ur(e,t,i,a,o);n=s?n.projectionNext:n.next}}function gc(t,e,n,r,i,o){sf(n,r,t.firstChild,e,i,o,!1)}function nS(t,e,n,r,i,o){let s=n[At],c=s[yt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ur(e,t,i,u,o)}else{let l=c,u=s[Ne];Ry(r)&&(l.flags|=128),sf(t,e,l,u,i,o,!0)}}function rS(t,e,n,r,i){let o=n[zn],s=xt(n);o!==s&&Ur(e,t,r,o,i);for(let a=rt;a<n.length;a++){let c=n[a];gc(c[B],c,t,e,r,o)}}function iS(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:qt.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qt.Important),t.setStyle(n,r,i,o))}}function oS(t,e,n){t.setAttribute(e,"style",n)}function qy(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Qy(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Xu(t,e,r),i!==null&&qy(t,e,i),o!==null&&oS(t,e,o)}var ai={};function $e(t=1){Yy(ot(),oe(),ii()+t,!1)}function Yy(t,e,n,r){if(!r)if((e[x]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ra(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ka(e,o,0,n)}Gn(n)}function z(t,e=P.Default){let n=oe();if(n===null)return m(t,e);let r=Ue();return by(r,n,Ae(t),e)}function Zy(t,e,n,r,i,o){let s=H(null);try{let a=null;i&mn.SignalBased&&(a=e[r][$t]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&mn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Zv(e,a,r,o)}finally{H(s)}}function sS(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Gn(~i);else{let o=i,s=n[++r],a=n[++r];Xb(s,o);let c=e[o];a(2,c)}}}finally{Gn(-1)}}function mc(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Kt]=i,d[x]=r|4|128|8|64,(l!==null||t&&t[x]&2048)&&(d[x]|=2048),ny(d),d[Ne]=d[ni]=t,d[vt]=n,d[Gt]=s||t&&t[Gt],d[ve]=a||t&&t[ve],d[Qr]=c||t&&t[Qr]||null,d[yt]=o,d[uc]=N0(),d[ja]=u,d[qv]=l,d[At]=e.type==2?t[At]:d,d}function vc(t,e,n,r,i){let o=t.data[e];if(o===null)o=aS(t,e,n,r,i),Kb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=qb();o.injectorIndex=s===null?-1:s.injectorIndex}return Do(o,!0),o}function aS(t,e,n,r,i){let o=ay(),s=cy(),a=s?o:o&&o.parent,c=t.data[e]=fS(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Ky(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xy(t,e,n,r,i){let o=ii(),s=r&2;try{Gn(-1),s&&e.length>vn&&Yy(t,e,vn,!1),St(s?2:0,i),n(r,i)}finally{Gn(o),St(s?3:1,i)}}function Jy(t,e,n){if(Yv(e)){let r=H(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{H(r)}}}function e_(t,e,n){sy()&&(yS(t,e,n,_t(n,e)),(n.flags&64)===64&&s_(t,e,n))}function t_(t,e,n=_t){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function n_(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=af(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function af(t,e,n,r,i,o,s,a,c,l,u){let d=vn+r,f=d+i,h=cS(d,f),p=typeof l=="function"?l():l;return h[B]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function cS(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ai);return n}function lS(t,e,n,r){let o=r.get(j0,Vy)||n===Tt.ShadowDom,s=t.selectRootElement(e,o);return uS(s),s}function uS(t){dS(t)}var dS=()=>null;function fS(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return zb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function sv(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=mn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?av(r,n,l,a,c):av(r,n,l,a)}return r}function av(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function hS(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=sv(0,d.inputs,u,c,h),l=sv(1,d.outputs,u,l,p);let v=c!==null&&s!==null&&!Ld(e)?MS(c,u,s):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function pS(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function r_(t,e,n,r,i,o,s,a){let c=_t(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(cf(t,n,u,r,i),dc(e)&&gS(n,e.index)):e.type&3?(r=pS(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function gS(t,e){let n=Dn(e,t);n[x]&16||(n[x]|=64)}function i_(t,e,n,r){if(sy()){let i=r===null?null:{"":-1},o=CS(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&o_(t,e,n,s,i,a),i&&DS(n,r,i)}n.mergedAttrs=uo(n.mergedAttrs,n.attrs)}function o_(t,e,n,r,i,o){for(let l=0;l<r.length;l++)cd(qa(n,e),t,r[l].type);ES(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Ky(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=uo(n.mergedAttrs,u.hostAttrs),IS(t,n,e,c,u),wS(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}hS(t,n,o)}function mS(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vS(s)!=a&&s.push(a),s.push(n,r,o)}}function vS(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function yS(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;dc(n)&&bS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||qa(n,e),Qn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Kr(e,t,a,n);if(Qn(l,e),s!==null&&SS(e,a-i,l,c,n,s),yn(c)){let u=Dn(n.index,e);u[vt]=Kr(e,t,a,n)}}}function s_(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Jb();try{Gn(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];od(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&_S(c,l)}}finally{Gn(-1),od(s)}}function _S(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function CS(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(ub(e,s.selectors,!1))if(r||(r=[]),yn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;vd(t,e,c)}else r.unshift(s),vd(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function vd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function DS(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new E(-301,!1);r.push(e[i],o)}}}function wS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yn(e)&&(n[""]=t)}}function ES(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function IS(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=zr(i.type,!0)),s=new qn(o,yn(i),z);t.blueprint[r]=s,n[r]=s,mS(t,e,r,Ky(t,n,i.hostVars,ai),i)}function bS(t,e,n){let r=_t(e,t),i=n_(n),o=t[Gt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=yc(t,mc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function SS(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Zy(r,n,c,l,u,d)}}function MS(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function a_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function c_(t,e){let n=t.contentQueries;if(n!==null){let r=H(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];uy(o),a.contentQueries(2,e[s],s)}}}finally{H(r)}}}function yc(t,e){return t[ho]?t[Gm][mt]=e:t[ho]=e,t[Gm]=e,e}function yd(t,e,n){uy(0);let r=H(null);try{e(t,n)}finally{H(r)}}function TS(t){return t[Ba]??=[]}function AS(t){return t.cleanup??=[]}function l_(t,e){let n=t[Qr],r=n?n.get(_n,null):null;r&&r.handleError(e)}function cf(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];Zy(u,l,r,a,c,i)}}function xS(t,e,n){let r=ey(e,t);$0(t[ve],r,n)}function NS(t,e){let n=Dn(e,t),r=n[B];RS(r,n);let i=n[Kt];i!==null&&n[ja]===null&&(n[ja]=ef(i,n[Qr])),lf(r,n,n[vt])}function RS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function lf(t,e,n){zd(e);try{let r=t.viewQuery;r!==null&&yd(1,r,n);let i=t.template;i!==null&&Xy(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Zr]?.finishViewCreation(t),t.staticContentQueries&&c_(t,e),t.staticViewQueries&&yd(2,t.viewQuery,n);let o=t.components;o!==null&&kS(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[x]&=-5,Wd()}}function kS(t,e){for(let n=0;n<e.length;n++)NS(t,e[n])}function OS(t,e,n,r){let i=H(null);try{let o=e.tView,a=t[x]&4096?4096:16,c=mc(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Yr]=l;let u=t[Zr];return u!==null&&(c[Zr]=u.createEmbeddedView(o)),lf(o,c,n),c}finally{H(i)}}function cv(t,e){return!e||e.firstChild===null||Ry(t)}function PS(t,e,n,r=!0){let i=e[B];if(G0(i,e,t,n),r){let s=md(n,t),a=e[ve],c=Wy(a,t[zn]);c!==null&&z0(i,t[yt],a,e,c,s)}let o=e[ja];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Xa(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(xt(o)),Xt(o)&&FS(o,r);let s=n.type;if(s&8)Xa(t,e,n.child,r);else if(s&32){let a=nf(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Gy(e,n);if(Array.isArray(a))r.push(...a);else{let c=Wn(e[At]);Xa(c[B],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function FS(t,e){for(let n=rt;n<t.length;n++){let r=t[n],i=r[B].firstChild;i!==null&&Xa(r[B],r,i,e)}t[zn]!==t[Kt]&&e.push(t[zn])}var u_=[];function LS(t){return t[nt]??VS(t)}function VS(t){let e=u_.pop()??Object.create(BS);return e.lView=t,e}function jS(t){t.lView[nt]!==t&&(t.lView=null,u_.push(t))}var BS=$(y({},Ji),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{fc(t.lView)},consumerOnSignalRead(){this.lView[nt]=this}});function US(t){let e=t[nt]??Object.create($S);return e.lView=t,e}var $S=$(y({},Ji),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Wn(t.lView);for(;e&&!d_(e[B]);)e=Wn(e);e&&ry(e)},consumerOnSignalRead(){this.lView[nt]=this}});function d_(t){return t.type!==2}var HS=100;function f_(t,e=!0,n=0){let r=t[Gt],i=r.rendererFactory,o=!1;o||i.begin?.();try{zS(t,n)}catch(s){throw e&&l_(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function zS(t,e){let n=ly();try{Qm(!0),_d(t,e);let r=0;for(;po(t);){if(r===HS)throw new E(103,!1);r++,_d(t,1)}}finally{Qm(n)}}function WS(t,e,n,r){let i=e[x];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Gt].inlineEffectRunner?.flush(),zd(e);let a=!0,c=null,l=null;o||(d_(t)?(l=LS(e),c=Zs(l)):nm()===null?(a=!1,l=US(e),c=Zs(l)):e[nt]&&(hu(e[nt]),e[nt]=null));try{ny(e),Yb(t.bindingStartIndex),n!==null&&Xy(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Ra(e,h,null)}else{let h=t.preOrderHooks;h!==null&&ka(e,h,0,null),ju(e,0)}if(s||GS(e),h_(e,0),t.contentQueries!==null&&c_(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&Ra(e,h)}else{let h=t.contentHooks;h!==null&&ka(e,h,1),ju(e,1)}sS(t,e);let d=t.components;d!==null&&g_(e,d,0);let f=t.viewQuery;if(f!==null&&yd(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&Ra(e,h)}else{let h=t.viewHooks;h!==null&&ka(e,h,2),ju(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Vu]){for(let h of e[Vu])h();e[Vu]=null}o||(e[x]&=-73)}catch(u){throw o||fc(e),u}finally{l!==null&&(du(l,c),a&&jS(l)),Wd()}}function h_(t,e){for(let n=Oy(t);n!==null;n=Py(n))for(let r=rt;r<n.length;r++){let i=n[r];p_(i,e)}}function GS(t){for(let e=Oy(t);e!==null;e=Py(e)){if(!(e[x]&Ha.HasTransplantedViews))continue;let n=e[$a];for(let r=0;r<n.length;r++){let i=n[r];ry(i)}}}function qS(t,e,n){let r=Dn(e,t);p_(r,n)}function p_(t,e){$d(t)&&_d(t,e)}function _d(t,e){let r=t[B],i=t[x],o=t[nt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&fu(o)),s||=!1,o&&(o.dirty=!1),t[x]&=-9217,s)WS(r,t,r.template,t[vt]);else if(i&8192){h_(t,1);let a=r.components;a!==null&&g_(t,a,1)}}function g_(t,e,n){for(let r=0;r<e.length;r++)qS(t,e[r],n)}function uf(t,e){let n=ly()?64:1088;for(t[Gt].changeDetectionScheduler?.notify(e);t;){t[x]|=n;let r=Wn(t);if(nd(t)&&!r)return t;t=r}return null}var Yn=class{get rootNodes(){let e=this._lView,n=e[B];return Xa(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vt]}set context(e){this._lView[vt]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ne];if(Xt(e)){let n=e[Ua],r=n?n.indexOf(this):-1;r>-1&&(gd(e,r),La(n,r))}this._attachedToViewContainer=!1}Hy(this._lView[B],this._lView)}onDestroy(e){iy(this._lView,e)}markForCheck(){uf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[x]&=-129}reattach(){id(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,f_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=nd(this._lView),n=this._lView[Yr];n!==null&&!e&&rf(n,this._lView),Uy(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e;let n=nd(this._lView),r=this._lView[Yr];r!==null&&!n&&$y(r,this._lView),id(this._lView)}},ci=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ZS;let t=e;return t})(),QS=ci,YS=class extends QS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=OS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Yn(i)}};function ZS(){return KS(Ue(),oe())}function KS(t,e){return t.type&4?new YS(e,t,hc(t,e)):null}var BU=new RegExp(`^(\\d+)*(${L0}|${F0})*(.*)`);var XS=()=>null;function lv(t,e){return XS(t,e)}var go=class{},m_=new C("",{providedIn:"root",factory:()=>!1});var v_=new C(""),Cd=class{},Ja=class{};function JS(t){let e=Error(`No component factory found for ${xe(t)}.`);return e[eM]=t,e}var eM="ngComponent";var Dd=class{resolveComponentFactory(e){throw JS(e)}},wf=class wf{};wf.NULL=new Dd;var Xr=wf,Jr=class{},li=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>tM();let t=e;return t})();function tM(){let t=oe(),e=Ue(),n=Dn(e.index,t);return(gn(n)?n:t)[ve]}var nM=(()=>{let e=class e{};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var uv=new Set;function _c(t){uv.has(t)||(uv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var y_=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function wd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Fm(i,a);else if(o==2){let c=a,l=e[++s];r=Fm(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ec=class extends Xr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Hn(e);return new mo(n,this.ngModule)}};function dv(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:mn.None;e?n.push({propName:s,templateName:r,isSignal:(a&mn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function rM(t){let e=t.toLowerCase();return e==="svg"?Fb:e==="math"?Lb:null}var mo=class extends Ja{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=dv(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return dv(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=pb(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=H(null);try{i=i||this.ngModule;let s=i instanceof it?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new sd(e,s):e,c=a.get(Jr,null);if(c===null)throw new E(407,!1);let l=a.get(nM,null),u=a.get(y_,null),d=a.get(go,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",v=r?lS(h,r,this.componentDef.encapsulation,a):By(h,p,rM(p)),D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let M=null;v!==null&&(M=ef(v,a,!0));let Q=af(0,null,null,1,0,null,null,null,null,null,null),T=mc(null,Q,null,D,null,null,f,h,a,null,M);zd(T);let le,Le;try{let dt=this.componentDef,Cr,iu=null;dt.findHostDirectiveDefs?(Cr=[],iu=new Map,dt.findHostDirectiveDefs(dt,Cr,iu),Cr.push(dt)):Cr=[dt];let rI=iM(T,v),iI=oM(rI,v,dt,Cr,T,f,h);Le=ty(Q,vn),v&&cM(h,dt,v,r),n!==void 0&&lM(Le,this.ngContentSelectors,n),le=aM(iI,dt,Cr,iu,T,[uM]),lf(Q,T,null)}finally{Wd()}return new Ed(this.componentType,le,hc(Le,T),T,Le)}finally{H(o)}}},Ed=class extends Cd{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Yn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;cf(o[B],o,i,e,n),this.previousInputValues.set(e,n);let s=Dn(this._tNode.index,o);uf(s,1)}}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function iM(t,e){let n=t[B],r=vn;return t[r]=e,vc(n,r,2,"#host",null)}function oM(t,e,n,r,i,o,s){let a=i[B];sM(r,t,e,s);let c=null;e!==null&&(c=ef(e,i[Qr]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=mc(i,n_(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&vd(a,t,r.length-1),yc(i,d),i[t.index]=d}function sM(t,e,n,r){for(let i of t)e.mergedAttrs=uo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(wd(e,e.mergedAttrs,!0),n!==null&&Qy(r,n,e))}function aM(t,e,n,r,i,o){let s=Ue(),a=i[B],c=_t(s,i);o_(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Kr(i,a,d,s);Qn(f,i)}s_(a,i,s),c&&Qn(c,i);let l=Kr(i,a,s.directiveStart+s.componentOffset,s);if(t[vt]=i[vt]=l,o!==null)for(let u of o)u(l,e);return Jy(a,s,i),l}function cM(t,e,n,r){if(r)Xu(t,n,["ng-version","18.2.0"]);else{let{attrs:i,classes:o}=gb(e.selectors[0]);i&&Xu(t,n,i),o&&o.length>0&&qy(t,n,o.join(" "))}}function lM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function uM(){let t=Ue();Qd(oe()[B],t)}var wn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=dM;let t=e;return t})();function dM(){let t=Ue();return hM(t,oe())}var fM=wn,__=class extends fM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return hc(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yd(this._hostTNode,this._hostLView);if(_y(e)){let n=Ga(e,this._hostLView),r=Wa(e),i=n[B].data[r+8];return new $n(i,n)}else return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=fv(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,cv(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Rb(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new mo(Hn(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?l:this.parentInjector).get(it,null);v&&(o=v)}let u=Hn(c.componentType??{}),d=lv(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,cv(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Vb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ne],l=new __(c,c[yt],c[Ne]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return PS(s,i,o,r),e.attachToViewContainerRef(),Rv(zu(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=fv(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=gd(this._lContainer,n);r&&(La(zu(this._lContainer),n),Hy(r[B],r))}detach(e){let n=this._adjustIndex(e,-1),r=gd(this._lContainer,n);return r&&La(zu(this._lContainer),n)!=null?new Yn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function fv(t){return t[Ua]}function zu(t){return t[Ua]||(t[Ua]=[])}function hM(t,e){let n,r=e[t.index];return Xt(r)?n=r:(n=a_(r,e,null,t),e[t.index]=n,yc(e,n)),gM(n,e,t,r),new __(n,t,e)}function pM(t,e){let n=t[ve],r=n.createComment(""),i=_t(e,t),o=Wy(n,i);return Ka(n,o,r,K0(n,i),!1),r}var gM=yM,mM=()=>!1;function vM(t,e,n){return mM(t,e,n)}function yM(t,e,n,r){if(t[zn])return;let i;n.type&8?i=xt(r):i=pM(e,n),t[zn]=i}function _M(t){return typeof t=="function"&&t[$t]!==void 0}function wo(t,e){_c("NgSignals");let n=hm(t),r=n[$t];return e?.equal&&(r.equal=e.equal),n.set=i=>pu(r,i),n.update=i=>pm(r,i),n.asReadonly=CM.bind(n),n}function CM(){let t=this[$t];if(t.readonlyFn===void 0){let e=()=>this();e[$t]=t,t.readonlyFn=e}return t.readonlyFn}function C_(t){return _M(t)&&typeof t.set=="function"}function DM(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(bM))}return o}return tc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((d,f)=>{a.push(""),s.push(r(d).then(h=>{a[l+f]=h,u.splice(u.indexOf(d),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>SM(o));e.push(c)}),EM(),Promise.all(e).then(()=>{})}var tc=new Map,wM=new Set;function EM(){let t=tc;return tc=new Map,t}function IM(){return tc.size===0}function bM(t){return typeof t=="string"?t:t.text()}function SM(t){wM.delete(t)}function MM(t){return Object.getPrototypeOf(t.prototype).constructor}function Jt(t){let e=MM(t.type),n=!0,r=[t];for(;e;){let i;if(yn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new E(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Ma(t.inputs),s.inputTransforms=Ma(t.inputTransforms),s.declaredInputs=Ma(t.declaredInputs),s.outputs=Ma(t.outputs);let a=i.hostBindings;a&&RM(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&xM(t,c),l&&NM(t,l),TM(t,i),PI(t.outputs,i.outputs),yn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Jt&&(n=!1)}}e=Object.getPrototypeOf(e)}AM(r)}function TM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function AM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uo(i.hostAttrs,n=uo(n,i.hostAttrs))}}function Ma(t){return t===Wr?{}:t===tt?[]:t}function xM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function NM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function RM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Cn=class{},vo=class{};var nc=class extends Cn{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ec(this);let o=Bv(e);this._bootstrapComponents=jy(o.bootstrap),this._r3Injector=Ty(e,n,[{provide:Cn,useValue:this},{provide:Xr,useValue:this.componentFactoryResolver},...r],xe(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rc=class extends vo{constructor(e){super(),this.moduleType=e}create(e){return new nc(this.moduleType,e,[])}};function kM(t,e,n){return new nc(t,e,n,!1)}var Id=class extends Cn{constructor(e){super(),this.componentFactoryResolver=new ec(this),this.instance=null;let n=new fo([...e.providers,{provide:Cn,useValue:this},{provide:Xr,useValue:this.componentFactoryResolver}],e.parent||Bd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function df(t,e,n=null){return new Id({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function D_(t){return PM(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function OM(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function PM(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Cc(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function FM(t){return(t.flags&32)===32}function LM(t,e,n,r,i,o,s,a,c){let l=e.consts,u=vc(e,t,4,s||null,a||null);i_(e,n,u,za(l,c)),Qd(e,u);let d=u.tView=af(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function VM(t,e,n,r,i,o,s,a,c,l){let u=n+vn,d=e.firstCreatePass?LM(u,e,t,r,i,o,s,a,c):e.data[u];Do(d,!1);let f=jM(e,t,d,n);Gd()&&of(e,t,f,d),Qn(f,t);let h=a_(f,t,f,d);return t[u]=h,yc(t,h),vM(h,d,t),Ud(d)&&e_(e,t,d),c!=null&&t_(t,d,l),d}function tr(t,e,n,r,i,o,s,a){let c=oe(),l=ot(),u=za(l.consts,o);return VM(c,l,t,e,n,r,i,u,s,a),tr}var jM=BM;function BM(t,e,n,r){return qd(!0),e[ve].createComment("")}function UM(t,e,n,r){return Cc(t,Hd(),n)?e+Mv(n)+r:ai}function Ta(t,e){return t<<17|e<<2}function Zn(t){return t>>17&32767}function $M(t){return(t&2)==2}function HM(t,e){return t&131071|e<<17}function bd(t){return t|2}function ei(t){return(t&131068)>>2}function Wu(t,e){return t&-131069|e<<2}function zM(t){return(t&1)===1}function Sd(t){return t|1}function WM(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Zn(s),c=ei(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Co(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Zn(t[a+1]);t[r+1]=Ta(f,a),f!==0&&(t[f+1]=Wu(t[f+1],r)),t[a+1]=HM(t[a+1],r)}else t[r+1]=Ta(a,0),a!==0&&(t[a+1]=Wu(t[a+1],r)),a=r;else t[r+1]=Ta(c,0),a===0?a=r:t[c+1]=Wu(t[c+1],r),c=r;l&&(t[r+1]=bd(t[r+1])),hv(t,u,r,!0),hv(t,u,r,!1),GM(e,u,t,r,o),s=Ta(a,c),o?e.classBindings=s:e.styleBindings=s}function GM(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Co(o,e)>=0&&(n[r+1]=Sd(n[r+1]))}function hv(t,e,n,r){let i=t[n+1],o=e===null,s=r?Zn(i):ei(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];qM(c,e)&&(a=!0,t[s+1]=r?Sd(l):bd(l)),s=r?Zn(l):ei(l)}a&&(t[n+1]=r?bd(i):Sd(i))}function qM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Co(t,e)>=0:!1}function kt(t,e,n){let r=oe(),i=Hd();if(Cc(r,i,e)){let o=ot(),s=my();r_(o,s,r,t,e,r[ve],n,!1)}return kt}function pv(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";cf(t,n,o[s],s,r)}function nr(t,e){return QM(t,e,null,!0),nr}function QM(t,e,n,r){let i=oe(),o=ot(),s=Zb(2);if(o.firstUpdatePass&&ZM(o,t,s,r),e!==ai&&Cc(i,s,e)){let a=o.data[ii()];tT(o,a,i,i[ve],t,i[s+1]=nT(e,n),r,s)}}function YM(t,e){return e>=t.expandoStartIndex}function ZM(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ii()],s=YM(t,n);rT(o,r)&&e===null&&!s&&(e=!1),e=KM(i,o,e,r),WM(i,o,e,n,s,r)}}function KM(t,e,n,r){let i=e0(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gu(null,t,e,n,r),n=yo(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Gu(i,t,e,n,r),o===null){let c=XM(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Gu(null,t,e,c[1],r),c=yo(c,e.attrs,r),JM(t,e,r,c))}else o=eT(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function XM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ei(r)!==0)return t[Zn(r)]}function JM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Zn(i)]=r}function eT(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=yo(r,s,n)}return yo(r,e.attrs,n)}function Gu(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=yo(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function yo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),tb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function tT(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=zM(l)?gv(c,e,n,i,ei(l),s):void 0;if(!ic(u)){ic(o)||$M(l)&&(o=gv(c,null,n,i,a,s));let d=ey(ii(),n);iS(r,s,d,i,o)}}function gv(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===ai&&(f=d?tt:void 0);let h=d?Fu(f,r):u===r?f:void 0;if(l&&!ic(h)&&(h=Fu(c,r)),ic(h)&&(a=h,s))return a;let p=t[i+1];i=s?Zn(p):ei(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Fu(c,r))}return a}function ic(t){return t!==void 0}function nT(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=xe(tf(t)))),t}function rT(t,e){return(t.flags&(e?8:16))!==0}function iT(t,e,n,r,i,o){let s=e.consts,a=za(s,i),c=vc(e,t,2,r,a);return i_(e,n,c,za(s,o)),c.attrs!==null&&wd(c,c.attrs,!1),c.mergedAttrs!==null&&wd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function se(t,e,n,r){let i=oe(),o=ot(),s=vn+t,a=i[ve],c=o.firstCreatePass?iT(s,o,i,e,n,r):o.data[s],l=oT(o,i,c,a,e,t);i[s]=l;let u=Ud(c);return Do(c,!0),Qy(a,l,c),!FM(c)&&Gd()&&of(o,i,l,c),Ub()===0&&Qn(l,i),$b(),u&&(e_(o,i,c),Jy(o,c,i)),r!==null&&t_(i,c),se}function ue(){let t=Ue();cy()?Qb():(t=t.parent,Do(t,!1));let e=t;Wb(e)&&Gb(),Hb();let n=ot();return n.firstCreatePass&&(Qd(n,t),Yv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&a0(e)&&pv(n,e,oe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&c0(e)&&pv(n,e,oe(),e.stylesWithoutHost,!1),ue}function en(t,e,n,r){return se(t,e,n,r),ue(),en}var oT=(t,e,n,r,i,o)=>(qd(!0),By(r,i,r0()));function Eo(){return oe()}var oc="en-US";var sT=oc;function aT(t){typeof t=="string"&&(sT=t.toLowerCase().replace(/_/g,"-"))}var cT=(t,e,n)=>{};function Re(t,e,n,r){let i=oe(),o=ot(),s=Ue();return w_(o,i,i[ve],s,t,e,r),Re}function lT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ba],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function w_(t,e,n,r,i,o,s){let a=Ud(r),l=t.firstCreatePass&&AS(t),u=e[vt],d=TS(e),f=!0;if(r.type&3||s){let v=_t(r,e),D=s?s(v):v,M=d.length,Q=s?le=>s(xt(le[r.index])):r.index,T=null;if(!s&&a&&(T=lT(t,e,i,r.index)),T!==null){let le=T.__ngLastListenerFn__||T;le.__ngNextListenerFn__=o,T.__ngLastListenerFn__=o,f=!1}else{o=vv(r,e,u,o),cT(v,i,o);let le=n.listen(D,i,o);d.push(o,le),l&&l.push(i,Q,M,M+1)}}else o=vv(r,e,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let v=p.length;if(v)for(let D=0;D<v;D+=2){let M=p[D],Q=p[D+1],Le=e[M][Q].subscribe(o),dt=d.length;d.push(o,Le),l&&l.push(i,r.index,dt,-(dt+1))}}}function mv(t,e,n,r){let i=H(null);try{return St(6,e,n),n(r)!==!1}catch(o){return l_(t,o),!1}finally{St(7,e,n),H(i)}}function vv(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Dn(t.index,e):e;uf(s,5);let a=mv(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=mv(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function tn(t=1){return n0(t)}function ui(t,e=""){let n=oe(),r=ot(),i=t+vn,o=r.firstCreatePass?vc(r,i,1,e,null):r.data[i],s=uT(r,n,o,e,t);n[i]=s,Gd()&&of(r,n,s,o),Do(o,!1)}var uT=(t,e,n,r,i)=>(qd(!0),U0(e[ve],r));function ff(t){return E_("",t,""),ff}function E_(t,e,n){let r=oe(),i=UM(r,t,e,n);return i!==ai&&xS(r,ii(),i),E_}function Io(t,e,n){C_(e)&&(e=e());let r=oe(),i=Hd();if(Cc(r,i,e)){let o=ot(),s=my();r_(o,s,r,t,e,r[ve],n,!1)}return Io}function Dc(t,e){let n=C_(t);return n&&t.set(e),n}function bo(t,e){let n=oe(),r=ot(),i=Ue();return w_(r,n,n[ve],i,t,e),bo}function dT(t,e,n){let r=ot();if(r.firstCreatePass){let i=yn(t);Md(n,r.data,r.blueprint,i,!0),Md(e,r.data,r.blueprint,i,!1)}}function Md(t,e,n,r,i){if(t=Ae(t),Array.isArray(t))for(let o=0;o<t.length;o++)Md(t[o],e,n,r,i);else{let o=ot(),s=oe(),a=Ue(),c=qr(t)?t:Ae(t.provide),l=Gv(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(qr(t)||!t.multi){let h=new qn(l,i,z),p=Qu(c,e,i?u:u+f,d);p===-1?(cd(qa(a,s),o,c),qu(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=Qu(c,e,u+f,d),p=Qu(c,e,u,u+f),v=h>=0&&n[h],D=p>=0&&n[p];if(i&&!D||!i&&!v){cd(qa(a,s),o,c);let M=pT(i?hT:fT,n.length,i,r,l);!i&&D&&(n[p].providerFactory=M),qu(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),s.push(M)}else{let M=I_(n[i?p:h],l,!i&&r);qu(o,t,h>-1?h:p,M)}!i&&r&&D&&n[p].componentProviders++}}}function qu(t,e,n,r){let i=qr(e),o=Eb(e);if(i||o){let c=(o?Ae(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function I_(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Qu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function fT(t,e,n,r){return Td(this.multi,[])}function hT(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Kr(n,n[B],this.providerFactory.index,r);o=a.slice(0,s),Td(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Td(i,o);return o}function Td(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function pT(t,e,n,r,i){let o=new qn(t,n,z);return o.multi=[],o.index=e,o.componentProviders=0,I_(o,i,r&&!n),o}function So(t,e=[]){return n=>{n.providersResolver=(r,i)=>dT(r,i?i(t):t,e)}}var gT=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Hv(!1,r.type),o=i.length>0?df([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=w({token:e,providedIn:"environment",factory:()=>new e(m(it))});let t=e;return t})();function En(t){_c("NgStandalone"),t.getStandaloneInjector=e=>e.get(gT).getOrCreateStandaloneInjector(t)}var Aa=null;function mT(t){Aa!==null&&(t.defaultEncapsulation!==Aa.defaultEncapsulation||t.preserveWhitespaces!==Aa.preserveWhitespaces)||(Aa=t)}var Qt=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},b_=new Qt("18.2.0");var di=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var hf=new C(""),Mo=new C(""),wc=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,pf||(vT(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{q.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(m(q),m(Ec),m(Mo))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),Ec=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return pf?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function vT(t){pf=t}var pf;function rr(t){return!!t&&typeof t.then=="function"}function S_(t){return!!t&&typeof t.subscribe=="function"}var M_=new C(""),T_=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=_(M_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(rr(s))r.push(s);else if(S_(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gf=new C("");function yT(){fm(()=>{throw new E(600,!1)})}function _T(t){return t.isBoundToModule}var CT=10;function DT(t,e,n){try{let r=n();return rr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function A_(t,e){return Array.isArray(e)?e.reduce(A_,t):y(y({},t),e)}var In=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(T0),this.afterRenderEffectManager=_(y_),this.zonelessEnabled=_(m_),this.externalTestViews=new Set,this.beforeRender=new re,this.afterTick=new re,this.componentTypes=[],this.components=[],this.isStable=_(si).hasPendingTasks.pipe(S(r=>!r)),this._injector=_(it)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Ja;if(!this._injector.get(T_).done){let h=!o&&jv(r),p=!1;throw new E(405,p)}let a;o?a=r:a=this._injector.get(Xr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=_T(a)?void 0:this._injector.get(Cn),l=i||a.selector,u=a.create(Nt.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(hf,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Oa(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new E(101,!1);let i=H(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,H(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Jr,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<CT;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)wT(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>po(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>po(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Oa(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(gf,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Oa(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new E(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Oa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function wT(t,e,n,r){if(!n&&!po(t))return;f_(t,e,n&&!r?0:1)}var Ad=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},mf=(()=>{let e=class e{compileModuleSync(r){return new rc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Bv(r),s=jy(o.declarations).reduce((a,c)=>{let l=Hn(c);return l&&a.push(new mo(l)),a},[]);return new Ad(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ET=new C("");function IT(t,e,n){let r=new rc(n);return Promise.resolve(r)}function yv(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var bT=(()=>{let e=class e{constructor(){this.zone=_(q),this.changeDetectionScheduler=_(go),this.applicationRef=_(In)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ST({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new q(x_()),[{provide:q,useFactory:t},{provide:Gr,multi:!0,useFactory:()=>{let n=_(bT,{optional:!0});return()=>n.initialize()}},{provide:Gr,multi:!0,useFactory:()=>{let n=_(MT);return()=>{n.initialize()}}},e===!0?{provide:v_,useValue:!0}:[]]}function x_(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var MT=(()=>{let e=class e{constructor(){this.subscription=new ce,this.initialized=!1,this.zone=_(q),this.pendingTasks=_(si)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{q.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{q.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var TT=(()=>{let e=class e{constructor(){this.appRef=_(In),this.taskService=_(si),this.ngZone=_(q),this.zonelessEnabled=_(m_),this.disableScheduling=_(v_,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ce,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ya):null,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Za||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?ev:xy;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ya+this.angularZoneId))}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ev(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AT(){return typeof $localize<"u"&&$localize.locale||oc}var vf=new C("",{providedIn:"root",factory:()=>_(vf,P.Optional|P.SkipSelf)||AT()});var yf=new C("");function xa(t){return!!t.platformInjector}function xT(t){let e=xa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(q);return n.run(()=>{xa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(_n,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),xa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(yf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{Oa(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return DT(r,n,()=>{let o=e.get(T_);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(vf,oc);if(aT(s||oc),xa(t)){let a=e.get(In);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return NT(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function NT(t,e){let n=t.injector.get(In);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new E(-403,!1);e.push(t)}var N_=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=()=>M0(i?.ngZone,x_({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),s=i?.ignoreChangesOutsideZone,a=[ST({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:go,useExisting:TT}],c=kM(r.moduleType,this.injector,a);return xT({moduleRef:c,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let o=A_({},i);return IT(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new E(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(yf,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(m(Nt))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),co=null,R_=new C("");function RT(t){if(co&&!co.get(R_,!1))throw new E(400,!1);yT(),co=t;let e=t.get(N_);return PT(t),e}function _f(t,e,n=[]){let r=`Platform: ${e}`,i=new C(r);return(o=[])=>{let s=k_();if(!s||s.injector.get(R_,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):RT(kT(a,r))}return OT(i)}}function kT(t=[],e){return Nt.create({name:e,providers:[{provide:lc,useValue:"platform"},{provide:yf,useValue:new Set([()=>co=null])},...t]})}function OT(t){let e=k_();if(!e)throw new E(401,!1);return e}function k_(){return co?.get(N_)??null}function PT(t){t.get(Xd,null)?.forEach(n=>n())}function Cf(){return!1}var ir=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FT;let t=e;return t})();function FT(t){return LT(Ue(),oe(),(t&16)===16)}function LT(t,e,n){if(dc(t)&&!n){let r=Dn(t.index,e);return new Yn(r,r)}else if(t.type&175){let r=e[At];return new Yn(r,e)}return null}var xd=class{constructor(){}supports(e){return D_(e)}create(e){return new Nd(e)}},VT=(t,e)=>e,Nd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||VT}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<_v(r,i,o)?n:r,a=_v(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!D_(e))throw new E(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,OM(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Rd(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new sc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new sc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rd=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},kd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},sc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new kd,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _v(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Cv(){return new Df([new xd])}var Df=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Cv()),deps:[[e,new Nv,new ti]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new E(901,!1)}};e.\u0275prov=w({token:e,providedIn:"root",factory:Cv});let t=e;return t})();var O_=_f(null,"core",[]),P_=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(m(In))},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({});let t=e;return t})();var F_=new C("");function Ic(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function To(t,e){_c("NgSignals");let n=lm(t);return e?.equal&&(n[$t].equal=e.equal),n}function nn(t){let e=H(null);try{return t()}finally{H(e)}}var U_=null;function Ot(){return U_}function $_(t){U_??=t}var bc=class{};var ke=new C(""),H_=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>_(UT),providedIn:"platform"});let t=e;return t})();var UT=(()=>{let e=class e extends H_{constructor(){super(),this._doc=_(ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ot().getBaseHref(this._doc)}onPopState(r){let i=Ot().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ot().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function z_(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function L_(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function or(t){return t&&t[0]!=="?"?"?"+t:t}var Mc=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>_(W_),providedIn:"root"});let t=e;return t})(),$T=new C(""),W_=(()=>{let e=class e extends Mc{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return z_(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+or(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+or(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+or(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(m(H_),m($T,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ao=(()=>{let e=class e{constructor(r){this._subject=new te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=WT(L_(V_(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+or(i))}normalize(r){return e.stripTrailingSlash(zT(this._basePath,V_(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+or(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+or(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=or,e.joinWithSlash=z_,e.stripTrailingSlash=L_,e.\u0275fac=function(i){return new(i||e)(m(Mc))},e.\u0275prov=w({token:e,factory:()=>HT(),providedIn:"root"});let t=e;return t})();function HT(){return new Ao(m(Mc))}function zT(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function V_(t){return t.replace(/\/index.html$/,"")}function WT(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function G_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ef=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},q_=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Ef(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),j_(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);j_(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(z(wn),z(ci),z(Df))},e.\u0275dir=Ie({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function j_(t,e){t.context.$implicit=e.item}var Tc=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new If,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){B_("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){B_("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(z(wn),z(ci))},e.\u0275dir=Ie({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),If=class{constructor(){this.$implicit=null,this.ngIf=null}};function B_(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${xe(e)}'.`)}var bn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({});let t=e;return t})(),Q_="browser",GT="server";function xo(t){return t===GT}var Sc=class{};var Mf=class extends bc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Tf=class t extends Mf{static makeCurrent(){$_(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=qT();return n==null?null:QT(n)}resetBaseElement(){No=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return G_(document.cookie,e)}},No=null;function qT(){return No=No||document.querySelector("base"),No?No.getAttribute("href"):null}function QT(t){return new URL(t,document.baseURI).pathname}var Af=class{addToWindow(e){Yt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new E(5103,!1);return o},Yt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Yt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Yt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Yt.frameworkStabilizers||(Yt.frameworkStabilizers=[]),Yt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Ot().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},YT=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),Ro=new C(""),J_=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new E(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(m(Ro),m(q))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),fi=class{constructor(e){this._doc=e}},bf="ng-app-id",eC=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xo(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${bf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(bf),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(bf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(m(ke),m(pc),m(Jd,8),m(st))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),Sf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Rf=/%COMP%/g,tC="%COMP%",ZT=`_nghost-${tC}`,KT=`_ngcontent-${tC}`,XT=!0,JT=new C("",{providedIn:"root",factory:()=>XT});function eA(t){return KT.replace(Rf,t)}function tA(t){return ZT.replace(Rf,t)}function nC(t,e){return e.map(n=>n.replace(Rf,t))}var Z_=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=xo(c),this.defaultRenderer=new ko(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Tt.ShadowDom&&(i=$(y({},i),{encapsulation:Tt.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Ac?o.applyToHost(r):o instanceof Oo&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Tt.Emulated:s=new Ac(l,u,i,this.appId,d,a,c,f);break;case Tt.ShadowDom:return new xf(l,u,r,i,a,c,this.nonce,f);default:s=new Oo(l,u,i,d,a,c,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(m(J_),m(eC),m(pc),m(JT),m(ke),m(st),m(q),m(Jd))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),ko=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Sf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(K_(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(K_(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Sf[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Sf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(qt.DashCase|qt.Important)?e.style.setProperty(n,r,i&qt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&qt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ot().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function K_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var xf=class extends ko{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=nC(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Oo=class extends ko{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?nC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ac=class extends Oo{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=eA(l),this.hostAttr=tA(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},nA=(()=>{let e=class e extends fi{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(m(ke))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),rA=(()=>{let e=class e extends fi{constructor(r){super(r),this.delegate=_(F_,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(m(ke))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),X_=["alt","control","meta","shift"],iA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oA={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},sA=(()=>{let e=class e extends fi{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ot().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),X_.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=iA[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),X_.forEach(a=>{if(a!==o){let c=oA[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(m(ke))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function aA(){Tf.makeCurrent()}function cA(){return new _n}function lA(){return Ly(document),document}var uA=[{provide:st,useValue:Q_},{provide:Xd,useValue:aA,multi:!0},{provide:ke,useFactory:lA,deps:[]}],rC=_f(O_,"browser",uA),dA=new C(""),fA=[{provide:Mo,useClass:Af,deps:[]},{provide:hf,useClass:wc,deps:[q,Ec,Mo]},{provide:wc,useClass:wc,deps:[q,Ec,Mo]}],hA=[{provide:lc,useValue:"root"},{provide:_n,useFactory:cA,deps:[]},{provide:Ro,useClass:nA,multi:!0,deps:[ke,q,st]},{provide:Ro,useClass:sA,multi:!0,deps:[ke]},{provide:Ro,useClass:rA,multi:!0},Z_,eC,J_,{provide:Jr,useExisting:Z_},{provide:Sc,useClass:YT,deps:[]},[]],iC=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:pc,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(m(dA,12))},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({providers:[...hA,...fA],imports:[bn,P_]});let t=e;return t})();var oC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(m(ke))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pA={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Nf=new C("HammerGestureConfig"),sC=new C("HammerLoader"),gA=(()=>{let e=class e{constructor(){this.events=[],this.overrides={}}buildHammer(r){let i=new Hammer(r,this.options);i.get("pinch").set({enable:!0}),i.get("rotate").set({enable:!0});for(let o in this.overrides)i.get(o).set(this.overrides[o]);return i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),mA=(()=>{let e=class e extends fi{constructor(r,i,o,s){super(r),this._config=i,this.console=o,this.loader=s,this._loaderPromise=null}supports(r){return!(!pA.hasOwnProperty(r.toLowerCase())&&!this.isCustomEvent(r)||!window.Hammer&&!this.loader)}addEventListener(r,i,o){let s=this.manager.getZone();if(i=i.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||s.runOutsideAngular(()=>this.loader());let a=!1,c=()=>{a=!0};return s.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){c=()=>{};return}a||(c=this.addEventListener(r,i,o))}).catch(()=>{c=()=>{}})),()=>{c()}}return s.runOutsideAngular(()=>{let a=this._config.buildHammer(r),c=function(l){s.runGuarded(function(){o(l)})};return a.on(i,c),()=>{a.off(i,c),typeof a.destroy=="function"&&a.destroy()}})}isCustomEvent(r){return this._config.events.indexOf(r)>-1}};e.\u0275fac=function(i){return new(i||e)(m(ke),m(Nf),m(di),m(sC,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),aC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({providers:[{provide:Ro,useClass:mA,multi:!0,deps:[ke,Nf,di,[new ti,sC]]},{provide:Nf,useClass:gA,deps:[]}]});let t=e;return t})();var O="primary",Ko=Symbol("RouteTitle"),Lf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yi(t){return new Lf(t)}function yA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function _A(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Pt(t[n],e[n]))return!1;return!0}function Pt(t,e){let n=t?Vf(t):void 0,r=e?Vf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!mC(t[i],e[i]))return!1;return!0}function Vf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function mC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function vC(t){return t.length>0?t[t.length-1]:null}function Sn(t){return Su(t)?t:rr(t)?J(Promise.resolve(t)):b(t)}var CA={exact:_C,subset:CC},yC={exact:DA,subset:wA,ignored:()=>!0};function lC(t,e,n){return CA[n.paths](t.root,e.root,n.matrixParams)&&yC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function DA(t,e){return Pt(t,e)}function _C(t,e,n){if(!ar(t.segments,e.segments)||!Rc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!_C(t.children[r],e.children[r],n))return!1;return!0}function wA(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>mC(t[n],e[n]))}function CC(t,e,n){return DC(t,e,e.segments,n)}function DC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ar(i,n)||e.hasChildren()||!Rc(i,n,r))}else if(t.segments.length===n.length){if(!ar(t.segments,n)||!Rc(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!CC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ar(t.segments,i)||!Rc(t.segments,i,r)||!t.children[O]?!1:DC(t.children[O],e,o,r)}}function Rc(t,e,n){return e.every((r,i)=>yC[n](t[i].parameters,r.parameters))}var on=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){return bA.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kc(this)}},sr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yi(this.parameters),this._parameterMap}toString(){return EC(this)}};function EA(t,e){return ar(t,e)&&t.every((n,r)=>Pt(n.parameters,e[r].parameters))}function ar(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function IA(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===O&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==O&&(n=n.concat(e(i,r)))}),n}var uh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>new Uo,providedIn:"root"});let t=e;return t})(),Uo=class{parse(e){let n=new Bf(e);return new on(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Po(e.root,!0)}`,r=TA(e.queryParams),i=typeof e.fragment=="string"?`#${SA(e.fragment)}`:"";return`${n}${r}${i}`}},bA=new Uo;function kc(t){return t.segments.map(e=>EC(e)).join("/")}function Po(t,e){if(!t.hasChildren())return kc(t);if(e){let n=t.children[O]?Po(t.children[O],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==O&&r.push(`${i}:${Po(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=IA(t,(r,i)=>i===O?[Po(t.children[O],!1)]:[`${i}:${Po(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[O]!=null?`${kc(t)}/${n[0]}`:`${kc(t)}/(${n.join("//")})`}}function wC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xc(t){return wC(t).replace(/%3B/gi,";")}function SA(t){return encodeURI(t)}function jf(t){return wC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oc(t){return decodeURIComponent(t)}function uC(t){return Oc(t.replace(/\+/g,"%20"))}function EC(t){return`${jf(t.path)}${MA(t.parameters)}`}function MA(t){return Object.entries(t).map(([e,n])=>`;${jf(e)}=${jf(n)}`).join("")}function TA(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xc(n)}=${xc(i)}`).join("&"):`${xc(n)}=${xc(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var AA=/^[^\/()?;#]+/;function kf(t){let e=t.match(AA);return e?e[0]:""}var xA=/^[^\/()?;=#]+/;function NA(t){let e=t.match(xA);return e?e[0]:""}var RA=/^[^=?&#]+/;function kA(t){let e=t.match(RA);return e?e[0]:""}var OA=/^[^&#]+/;function PA(t){let e=t.match(OA);return e?e[0]:""}var Bf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[O]=new Y(e,n)),r}parseSegment(){let e=kf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new sr(Oc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=NA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=kf(this.remaining);i&&(r=i,this.capture(r))}e[Oc(n)]=Oc(r)}parseQueryParam(e){let n=kA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=PA(this.remaining);s&&(r=s,this.capture(r))}let i=uC(n),o=uC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=kf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=O);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[O]:new Y([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function IC(t){return t.segments.length>0?new Y([],{[O]:t}):t}function bC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=bC(i);if(r===O&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Y(t.segments,e);return FA(n)}function FA(t){if(t.numberOfChildren===1&&t.children[O]){let e=t.children[O];return new Y(t.segments.concat(e.segments),e.children)}return t}function $o(t){return t instanceof on}function LA(t,e,n=null,r=null){let i=SC(t);return MC(i,e,n,r)}function SC(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Y(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=IC(r);return e??i}function MC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Of(i,i,i,n,r);let o=VA(e);if(o.toRoot())return Of(i,i,new Y([],{}),n,r);let s=jA(o,i,t),a=s.processChildren?Vo(s.segmentGroup,s.index,o.commands):AC(s.segmentGroup,s.index,o.commands);return Of(i,s.segmentGroup,a,n,r)}function Pc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ho(t){return typeof t=="object"&&t!=null&&t.outlets}function Of(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=TC(t,e,n);let a=IC(bC(s));return new on(a,o,i)}function TC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=TC(o,e,n)}),new Y(t.segments,r)}var Fc=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Pc(r[0]))throw new E(4003,!1);let i=r.find(Ho);if(i&&i!==vC(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function VA(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fc(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Fc(n,e,r)}var gi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function jA(t,e,n){if(t.isAbsolute)return new gi(e,!0,0);if(!n)return new gi(e,!1,NaN);if(n.parent===null)return new gi(n,!0,0);let r=Pc(t.commands[0])?0:1,i=n.segments.length-1+r;return BA(n,i,t.numberOfDoubleDots)}function BA(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new gi(r,!1,i-o)}function UA(t){return Ho(t[0])?t[0].outlets:{[O]:t}}function AC(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return Vo(t,e,n);let r=$A(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Y(t.segments.slice(0,r.pathIndex),{});return o.children[O]=new Y(t.segments.slice(r.pathIndex),t.children),Vo(o,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?Uf(t,e,n):r.match?Vo(t,0,i):Uf(t,e,n)}function Vo(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=UA(n),i={};if(Object.keys(r).some(o=>o!==O)&&t.children[O]&&t.numberOfChildren===1&&t.children[O].segments.length===0){let o=Vo(t.children[O],e,n);return new Y(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=AC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Y(t.segments,i)}}function $A(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ho(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!fC(c,l,s))return o;r+=2}else{if(!fC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Uf(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ho(o)){let c=HA(o.outlets);return new Y(r,c)}if(i===0&&Pc(n[0])){let c=t.segments[e];r.push(new sr(c.path,dC(n[0]))),i++;continue}let s=Ho(o)?o.outlets[O]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Pc(a)?(r.push(new sr(s,dC(a))),i+=2):(r.push(new sr(s,{})),i++)}return new Y(r,{})}function HA(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Uf(new Y([],{}),0,r))}),e}function dC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function fC(t,e,n){return t==n.path&&Pt(e,n.parameters)}var jo="imperative",be=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(be||{}),at=class{constructor(e,n){this.id=e,this.url=n}},zo=class extends at{constructor(e,n,r="imperative",i=null){super(e,n),this.type=be.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cr=class extends at{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ge=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ge||{}),$f=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}($f||{}),rn=class extends at{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},lr=class extends at{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=be.NavigationSkipped}},Wo=class extends at{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lc=class extends at{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hf=class extends at{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zf=class extends at{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wf=class extends at{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gf=class extends at{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qf=class{constructor(e){this.route=e,this.type=be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qf=class{constructor(e){this.route=e,this.type=be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yf=class{constructor(e){this.snapshot=e,this.type=be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zf=class{constructor(e){this.snapshot=e,this.type=be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kf=class{constructor(e){this.snapshot=e,this.type=be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xf=class{constructor(e){this.snapshot=e,this.type=be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Go=class{},_i=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function zA(t,e){return t.providers&&!t._injector&&(t._injector=df(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ct(t){return t.outlet||O}function WA(t,e){let n=t.filter(r=>Ct(r)===e);return n.push(...t.filter(r=>Ct(r)!==e)),n}function Xo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Jf=class{get injector(){return Xo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zc(this.rootInjector),this.attachRef=null}},zc=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Jf(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(m(it))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=eh(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=eh(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=th(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return th(e,this._root).map(n=>n.value)}};function eh(t,e){if(t===e.value)return e;for(let n of e.children){let r=eh(t,n);if(r)return r}return null}function th(t,e){if(t===e.value)return[e];for(let n of e.children){let r=th(t,n);if(r.length)return r.unshift(e),r}return[]}var We=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function pi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var jc=class extends Vc{constructor(e,n){super(e),this.snapshot=n,dh(this,e)}toString(){return this.snapshot.toString()}};function xC(t){let e=GA(t),n=new De([new sr("",{})]),r=new De({}),i=new De({}),o=new De({}),s=new De(""),a=new Ci(n,r,o,s,i,O,t,e.root);return a.snapshot=e.root,new jc(new We(a,[]),e)}function GA(t){let e={},n={},r={},i="",o=new mi([],e,r,i,n,O,t,null,{});return new Uc("",new We(o,[]))}var Ci=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(S(l=>l[Ko]))??b(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(S(e=>yi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(S(e=>yi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bc(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),t.params),data:y(y({},e.data),t.data),resolve:y(y(y(y({},t.data),e.data),i?.data),t._resolvedData)}:r={params:y({},t.params),data:y({},t.data),resolve:y(y({},t.data),t._resolvedData??{})},i&&RC(i)&&(r.resolve[Ko]=i.title),r}var mi=class{get title(){return this.data?.[Ko]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Uc=class extends Vc{constructor(e,n){super(n),this.url=e,dh(this,n)}toString(){return NC(this._root)}};function dh(t,e){e.value._routerState=t,e.children.forEach(n=>dh(t,n))}function NC(t){let e=t.children.length>0?` { ${t.children.map(NC).join(", ")} } `:"";return`${t.value}${e}`}function Pf(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Pt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Pt(e.params,n.params)||t.paramsSubject.next(n.params),_A(e.url,n.url)||t.urlSubject.next(n.url),Pt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function nh(t,e){let n=Pt(t.params,e.params)&&EA(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||nh(t.parent,e.parent))}function RC(t){return typeof t.title=="string"||t.title===null}var qA=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=O,this.activateEvents=new te,this.deactivateEvents=new te,this.attachEvents=new te,this.detachEvents=new te,this.parentContexts=_(zc),this.location=_(wn),this.changeDetector=_(ir),this.inputBinder=_(fh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new rh(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ie({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ri]});let t=e;return t})(),rh=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ci?this.route:e===zc?this.childContexts:this.parent.get(e,n)}},fh=new C("");function QA(t,e,n){let r=qo(t,e._root,n?n._root:void 0);return new jc(r,e)}function qo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=YA(t,e,n);return new We(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>qo(t,a)),s}}let r=ZA(e.value),i=e.children.map(o=>qo(t,o));return new We(r,i)}}function YA(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qo(t,r,i);return qo(t,r)})}function ZA(t){return new Ci(new De(t.url),new De(t.params),new De(t.queryParams),new De(t.fragment),new De(t.data),t.outlet,t.component,t)}var Qo=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},kC="ngNavigationCancelingError";function $c(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=$o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=OC(!1,Ge.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function OC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[kC]=!0,n.cancellationCode=e,n}function KA(t){return PC(t)&&$o(t.url)}function PC(t){return!!t&&t[kC]}var XA=(t,e,n,r)=>S(i=>(new ih(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ih=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Pf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=pi(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=pi(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=pi(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=pi(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Pf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Pf(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Hc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},vi=class{constructor(e,n){this.component=e,this.route=n}};function JA(t,e,n){let r=t._root,i=e?e._root:null;return Fo(r,i,n,[r.value])}function ex(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function wi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ev(t)?t:e.get(t):r}function Fo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=pi(e);return t.children.forEach(s=>{tx(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Bo(a,n.getContext(s),i)),i}function tx(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=nx(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Hc(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Fo(t,e,a?a.children:null,r,i):Fo(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new vi(a.outlet.component,s))}else s&&Bo(e,a,i),i.canActivateChecks.push(new Hc(r)),o.component?Fo(t,null,a?a.children:null,r,i):Fo(t,null,n,r,i);return i}function nx(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ar(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ar(t.url,e.url)||!Pt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nh(t,e)||!Pt(t.queryParams,e.queryParams);case"paramsChange":default:return!nh(t,e)}}function Bo(t,e,n){let r=pi(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Bo(s,e.children.getContext(o),n):Bo(s,null,n):Bo(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new vi(e.outlet.component,i)):n.canDeactivateChecks.push(new vi(null,i)):n.canDeactivateChecks.push(new vi(null,i))}function Jo(t){return typeof t=="function"}function rx(t){return typeof t=="boolean"}function ix(t){return t&&Jo(t.canLoad)}function ox(t){return t&&Jo(t.canActivate)}function sx(t){return t&&Jo(t.canActivateChild)}function ax(t){return t&&Jo(t.canDeactivate)}function cx(t){return t&&Jo(t.canMatch)}function FC(t){return t instanceof zt||t?.name==="EmptyError"}var Nc=Symbol("INITIAL_VALUE");function Di(){return ie(t=>Da(t.map(e=>e.pipe(Wt(1),ku(Nc)))).pipe(S(e=>{for(let n of e)if(n!==!0){if(n===Nc)return Nc;if(n===!1||lx(n))return n}return!0}),ze(e=>e!==Nc),Wt(1)))}function lx(t){return $o(t)||t instanceof Qo}function ux(t,e){return pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?b($(y({},n),{guardsResult:!0})):dx(s,r,i,t).pipe(pe(a=>a&&rx(a)?fx(r,o,t,e):b(a)),S(a=>$(y({},n),{guardsResult:a})))})}function dx(t,e,n,r){return J(t).pipe(pe(i=>vx(i.component,i.route,n,e,r)),Je(i=>i!==!0,!0))}function fx(t,e,n,r){return J(e).pipe(Fr(i=>Or(px(i.route.parent,r),hx(i.route,r),mx(t,i.path,n),gx(t,i.route,n))),Je(i=>i!==!0,!0))}function hx(t,e){return t!==null&&e&&e(new Kf(t)),b(!0)}function px(t,e){return t!==null&&e&&e(new Yf(t)),b(!0)}function gx(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return b(!0);let i=r.map(o=>wa(()=>{let s=Xo(e)??n,a=wi(o,s),c=ox(a)?a.canActivate(e,t):Zt(s,()=>a(e,t));return Sn(c).pipe(Je())}));return b(i).pipe(Di())}function mx(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>ex(s)).filter(s=>s!==null).map(s=>wa(()=>{let a=s.guards.map(c=>{let l=Xo(s.node)??n,u=wi(c,l),d=sx(u)?u.canActivateChild(r,t):Zt(l,()=>u(r,t));return Sn(d).pipe(Je())});return b(a).pipe(Di())}));return b(o).pipe(Di())}function vx(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return b(!0);let s=o.map(a=>{let c=Xo(e)??i,l=wi(a,c),u=ax(l)?l.canDeactivate(t,e,n,r):Zt(c,()=>l(t,e,n,r));return Sn(u).pipe(Je())});return b(s).pipe(Di())}function yx(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return b(!0);let o=i.map(s=>{let a=wi(s,t),c=ix(a)?a.canLoad(e,n):Zt(t,()=>a(e,n));return Sn(c)});return b(o).pipe(Di(),LC(r))}function LC(t){return Cu(ge(e=>{if(typeof e!="boolean")throw $c(t,e)}),S(e=>e===!0))}function _x(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return b(!0);let o=i.map(s=>{let a=wi(s,t),c=cx(a)?a.canMatch(e,n):Zt(t,()=>a(e,n));return Sn(c)});return b(o).pipe(Di(),LC(r))}var Yo=class{constructor(e){this.segmentGroup=e||null}},Zo=class extends Error{constructor(e){super(),this.urlTree=e}};function hi(t){return kr(new Yo(t))}function Cx(t){return kr(new E(4e3,!1))}function Dx(t){return kr(OC(!1,Ge.GuardRejected))}var oh=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return b(r);if(i.numberOfChildren>1||!i.children[O])return Cx(`${e.redirectTo}`);i=i.children[O]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:v}=i,D=Zt(o,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:v}));if(D instanceof on)throw new Zo(D);n=D}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Zo(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new on(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Y(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},sh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wx(t,e,n,r,i){let o=hh(t,e,n);return o.matched?(r=zA(e,r),_x(r,e,n,i).pipe(S(s=>s===!0?o:y({},sh)))):b(o)}function hh(t,e,n){if(e.path==="**")return Ex(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?y({},sh):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yA)(n,t,e);if(!i)return y({},sh);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?y(y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Ex(t){return{matched:!0,parameters:t.length>0?vC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function hC(t,e,n,r){return n.length>0&&Sx(t,n,r)?{segmentGroup:new Y(e,bx(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&Mx(t,n,r)?{segmentGroup:new Y(t.segments,Ix(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function Ix(t,e,n,r){let i={};for(let o of n)if(Wc(t,e,o)&&!r[Ct(o)]){let s=new Y([],{});i[Ct(o)]=s}return y(y({},r),i)}function bx(t,e){let n={};n[O]=e;for(let r of t)if(r.path===""&&Ct(r)!==O){let i=new Y([],{});n[Ct(r)]=i}return n}function Sx(t,e,n){return n.some(r=>Wc(t,e,r)&&Ct(r)!==O)}function Mx(t,e,n){return n.some(r=>Wc(t,e,r))}function Wc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Tx(t,e,n,r){return Ct(t)!==r&&(r===O||!Wc(e,n,t))?!1:hh(e,t,n).matched}function Ax(t,e,n){return e.length===0&&!t.children[n]}var ah=class{};function xx(t,e,n,r,i,o,s="emptyOnly"){return new ch(t,e,n,r,i,s,o).recognize()}var Nx=31,ch=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new oh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}recognize(){let e=hC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(S(({children:n,rootSnapshot:r})=>{let i=new We(r,n),o=new Uc("",i),s=LA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new mi([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),O,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,O,n).pipe(S(r=>({children:r,rootSnapshot:n})),dn(r=>{if(r instanceof Zo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yo?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(S(s=>s instanceof We?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return J(o).pipe(Fr(s=>{let a=r.children[s],c=WA(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Vr((s,a)=>(s.push(...a),s)),fn(null),xu(),pe(s=>{if(s===null)return hi(r);let a=VC(s);return Rx(a),b(a)}))}processSegment(e,n,r,i,o,s,a){return J(n).pipe(Fr(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(dn(l=>{if(l instanceof Yo)return b(null);throw l}))),Je(c=>!!c),dn(c=>{if(FC(c))return Ax(r,i,o)?b(new ah):hi(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Tx(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):hi(i):hi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=hh(n,i,o);if(!c)return hi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Nx&&(this.allowRedirects=!1));let h=new mi(o,l,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,pC(i),Ct(i),i.component??i._loadedComponent??null,i,gC(i)),p=Bc(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(pe(D=>this.processSegment(e,r,n,D.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=wx(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ie(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ie(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new mi(f,d,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,pC(r),Ct(r),r.component??r._loadedComponent??null,r,gC(r)),v=Bc(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:D,slicedSegments:M}=hC(n,f,h,l);if(M.length===0&&D.hasChildren())return this.processChildren(u,l,D,p).pipe(S(T=>new We(p,T)));if(l.length===0&&M.length===0)return b(new We(p,[]));let Q=Ct(r)===o;return this.processSegment(u,l,D,M,Q?O:o,!0,p).pipe(S(T=>new We(p,T instanceof We?[T]:[])))}))):hi(n)))}getChildConfig(e,n,r){return n.children?b({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?b({routes:n._loadedRoutes,injector:n._loadedInjector}):yx(e,n,r,this.urlSerializer).pipe(pe(i=>i?this.configLoader.loadChildren(e,n).pipe(ge(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Dx(n))):b({routes:[],injector:e})}};function Rx(t){t.sort((e,n)=>e.value.outlet===O?-1:n.value.outlet===O?1:e.value.outlet.localeCompare(n.value.outlet))}function kx(t){let e=t.value.routeConfig;return e&&e.path===""}function VC(t){let e=[],n=new Set;for(let r of t){if(!kx(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=VC(r.children);e.push(new We(r.value,i))}return e.filter(r=>!n.has(r))}function pC(t){return t.data||{}}function gC(t){return t.resolve||{}}function Ox(t,e,n,r,i,o){return pe(s=>xx(t,e,n,r,s.extractedUrl,i,o).pipe(S(({state:a,tree:c})=>$(y({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Px(t,e){return pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return b(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of jC(c))s.add(l);let a=0;return J(s).pipe(Fr(c=>o.has(c)?Fx(c,r,t,e):(c.data=Bc(c,c.parent,t).resolve,b(void 0))),ge(()=>a++),Lr(1),pe(c=>a===s.size?b(n):Te))})}function jC(t){let e=t.children.map(n=>jC(n)).flat();return[t,...e]}function Fx(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!RC(i)&&(o[Ko]=i.title),Lx(o,t,e,r).pipe(S(s=>(t._resolvedData=s,t.data=Bc(t,t.parent,n).resolve,null)))}function Lx(t,e,n,r){let i=Vf(t);if(i.length===0)return b({});let o={};return J(i).pipe(pe(s=>Vx(t[s],e,n,r).pipe(Je(),ge(a=>{if(a instanceof Qo)throw $c(new Uo,a);o[s]=a}))),Lr(1),Tu(o),dn(s=>FC(s)?Te:kr(s)))}function Vx(t,e,n,r){let i=Xo(e)??r,o=wi(t,i),s=o.resolve?o.resolve(e,n):Zt(i,()=>o(e,n));return Sn(s)}function Ff(t){return ie(e=>{let n=t(e);return n?J(n).pipe(S(()=>e)):b(e)})}var BC=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===O);return i}getResolvedTitleForRoute(r){return r.data[Ko]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>_(jx),providedIn:"root"});let t=e;return t})(),jx=(()=>{let e=class e extends BC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(m(oC))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ph=new C("",{providedIn:"root",factory:()=>({})}),Bx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Rt({type:e,selectors:[["ng-component"]],standalone:!0,features:[En],decls:1,vars:0,template:function(i,o){i&1&&en(0,"router-outlet")},dependencies:[qA],encapsulation:2});let t=e;return t})();function gh(t){let e=t.children&&t.children.map(gh),n=e?$(y({},t),{children:e}):y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==O&&(n.component=Bx),n}var mh=new C(""),Ux=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(mf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return b(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Sn(r.loadComponent()).pipe(S(UC),ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),io(()=>{this.componentLoaders.delete(r)})),o=new Tr(i,()=>new re).pipe(Mr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return b({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=$x(i,this.compiler,r,this.onLoadEndListener).pipe(io(()=>{this.childrenLoaders.delete(i)})),a=new Tr(s,()=>new re).pipe(Mr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $x(t,e,n,r){return Sn(t.loadChildren()).pipe(S(UC),pe(i=>i instanceof vo||Array.isArray(i)?b(i):J(e.compileModuleAsync(i))),S(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(mh,[],{optional:!0,self:!0}).flat()),{routes:s.map(gh),injector:o}}))}function Hx(t){return t&&typeof t=="object"&&"default"in t}function UC(t){return Hx(t)?t.default:t}var vh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>_(zx),providedIn:"root"});let t=e;return t})(),zx=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wx=new C("");var Gx=new C(""),qx=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new re,this.transitionAbortSubject=new re,this.configLoader=_(Ux),this.environmentInjector=_(it),this.urlSerializer=_(uh),this.rootContexts=_(zc),this.location=_(Ao),this.inputBindingEnabled=_(fh,{optional:!0})!==null,this.titleStrategy=_(BC),this.options=_(ph,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(vh),this.createViewTransition=_(Wx,{optional:!0}),this.navigationErrorHandler=_(Gx,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>b(void 0),this.rootComponentType=null;let r=o=>this.events.next(new qf(o)),i=o=>this.events.next(new Qf(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next($(y(y({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new De({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:jo,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ze(s=>s.id!==0),S(s=>$(y({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ie(s=>{let a=!1,c=!1;return b(s).pipe(ie(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ge.SupersededByNewNavigation),Te;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?$(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new lr(l.id,this.urlSerializer.serialize(l.rawUrl),f,$f.IgnoredSameUrlNavigation)),l.resolve(!1),Te}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return b(l).pipe(ie(f=>{let h=this.transitions?.getValue();return this.events.next(new zo(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Te:Promise.resolve(f)}),Ox(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ge(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=$(y({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Lc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:v,extras:D}=l,M=new zo(f,this.urlSerializer.serialize(h),p,v);this.events.next(M);let Q=xC(this.rootComponentType).snapshot;return this.currentTransition=s=$(y({},l),{targetSnapshot:Q,urlAfterRedirects:h,extras:$(y({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,b(s)}else{let f="";return this.events.next(new lr(l.id,this.urlSerializer.serialize(l.extractedUrl),f,$f.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Te}}),ge(l=>{let u=new Hf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),S(l=>(this.currentTransition=s=$(y({},l),{guards:JA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),ux(this.environmentInjector,l=>this.events.next(l)),ge(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw $c(this.urlSerializer,l.guardsResult);let u=new zf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),ze(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ge.GuardRejected),!1)),Ff(l=>{if(l.guards.canActivateChecks.length)return b(l).pipe(ge(u=>{let d=new Wf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ie(u=>{let d=!1;return b(u).pipe(Px(this.paramsInheritanceStrategy,this.environmentInjector),ge({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ge.NoDataFromResolver)}}))}),ge(u=>{let d=new Gf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Ff(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(ge(h=>{d.component=h}),S(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Da(u(l.targetSnapshot.root)).pipe(fn(null),Wt(1))}),Ff(()=>this.afterPreactivation()),ie(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?J(d).pipe(S(()=>s)):b(s)}),S(l=>{let u=QA(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=$(y({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),ge(()=>{this.events.next(new Go)}),XA(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Wt(1),ge({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ou(this.transitionAbortSubject.pipe(ge(l=>{throw l}))),io(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ge.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),dn(l=>{if(c=!0,PC(l))this.events.next(new rn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),KA(l)?this.events.next(new _i(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Wo(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=Zt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Qo){let{message:f,cancellationCode:h}=$c(this.urlSerializer,d);this.events.next(new rn(s.id,this.urlSerializer.serialize(s.extractedUrl),f,h)),this.events.next(new _i(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=r.errorHandler(l);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Te}))}))}cancelNavigationTransition(r,i,o){let s=new rn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Qx(t){return t!==jo}var Yx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>_(Zx),providedIn:"root"});let t=e;return t})(),lh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Zx=(()=>{let e=class e extends lh{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=oi(e)))(o||e)}})(),e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$C=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>_(Kx),providedIn:"root"});let t=e;return t})(),Kx=(()=>{let e=class e extends $C{constructor(){super(...arguments),this.location=_(Ao),this.urlSerializer=_(uh),this.options=_(ph,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(vh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new on,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof zo)this.stateMemento=this.createStateMemento();else if(r instanceof lr)this.rawUrlTree=i.initialUrl;else if(r instanceof Lc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof Go?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof rn&&(r.code===Ge.GuardRejected||r.code===Ge.NoDataFromResolver)?this.restoreHistory(i):r instanceof Wo?this.restoreHistory(i,!0):r instanceof cr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof on?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=y(y({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=y(y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=oi(e)))(o||e)}})(),e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Lo||{});function Xx(t,e){t.events.pipe(ze(n=>n instanceof cr||n instanceof rn||n instanceof Wo||n instanceof lr),S(n=>n instanceof cr||n instanceof lr?Lo.COMPLETE:(n instanceof rn?n.code===Ge.Redirect||n.code===Ge.SupersededByNewNavigation:!1)?Lo.REDIRECTING:Lo.FAILED),ze(n=>n!==Lo.REDIRECTING),Wt(1)).subscribe(()=>{e()})}function Jx(t){throw t}var eN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},HC=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=_(di),this.stateManager=_($C),this.options=_(ph,{optional:!0})||{},this.pendingTasks=_(si),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(qx),this.urlSerializer=_(uh),this.location=_(Ao),this.urlHandlingStrategy=_(vh),this._events=new re,this.errorHandler=this.options.errorHandler||Jx,this.navigated=!1,this.routeReuseStrategy=_(Yx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(mh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(fh,{optional:!0}),this.eventsSubscription=new ce,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof rn&&i.code!==Ge.Redirect&&i.code!==Ge.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof cr)this.navigated=!0;else if(i instanceof _i){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=y({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Qx(o.source)},a);this.scheduleNavigation(c,jo,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}rN(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=y({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(gh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":d=y(y({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=SC(h)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return MC(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=$o(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,jo,null,i)}navigate(r,i={skipLocationChange:!1}){return nN(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=y({},eN):i===!1?o=y({},tN):o=i,$o(r))return lC(this.currentUrlTree,r,o);let s=this.parseUrl(r);return lC(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return Xx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nN(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}function rN(t){return!(t instanceof Go)&&!(t instanceof _i)}var iN=new C("");function zC(t,...e){return Vd([{provide:mh,multi:!0,useValue:t},[],{provide:Ci,useFactory:oN,deps:[HC]},{provide:gf,multi:!0,useFactory:sN},e.map(n=>n.\u0275providers)])}function oN(t){return t.routerState.root}function sN(){let t=_(Nt);return e=>{let n=t.get(In);if(e!==n.components[0])return;let r=t.get(HC),i=t.get(aN);t.get(cN)===1&&r.initialNavigation(),t.get(lN,null,P.Optional)?.setUpPreloading(),t.get(iN,null,P.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var aN=new C("",{factory:()=>new re}),cN=new C("",{providedIn:"root",factory:()=>1});var lN=new C("");var WC=[];var JC=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(z(li),z(er))},e.\u0275dir=Ie({type:e});let t=e;return t})(),eD=(()=>{let e=class e extends JC{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=oi(e)))(o||e)}})(),e.\u0275dir=Ie({type:e,features:[Jt]});let t=e;return t})(),_h=new C(""),uN={provide:_h,useExisting:Kn(()=>Ch),multi:!0},Ch=(()=>{let e=class e extends eD{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=oi(e)))(o||e)}})(),e.\u0275dir=Ie({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Re("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[So([uN]),Jt]});let t=e;return t})(),dN={provide:_h,useExisting:Kn(()=>Jc),multi:!0};function fN(){let t=Ot()?Ot().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hN=new C(""),Jc=(()=>{let e=class e extends JC{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!fN())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(z(li),z(er),z(hN,8))},e.\u0275dir=Ie({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Re("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[So([dN]),Jt]});let t=e;return t})();var tD=new C(""),nD=new C("");function rD(t){return t!=null}function iD(t){return rr(t)?J(t):t}function oD(t){let e={};return t.forEach(n=>{e=n!=null?y(y({},e),n):e}),Object.keys(e).length===0?null:e}function sD(t,e){return e.map(n=>n(t))}function pN(t){return!t.validate}function aD(t){return t.map(e=>pN(e)?e:n=>e.validate(n))}function gN(t){if(!t)return null;let e=t.filter(rD);return e.length==0?null:function(n){return oD(sD(n,e))}}function Dh(t){return t!=null?gN(aD(t)):null}function mN(t){if(!t)return null;let e=t.filter(rD);return e.length==0?null:function(n){let r=sD(n,e).map(iD);return Mu(r).pipe(S(oD))}}function wh(t){return t!=null?mN(aD(t)):null}function GC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function vN(t){return t._rawValidators}function yN(t){return t._rawAsyncValidators}function yh(t){return t?Array.isArray(t)?t:[t]:[]}function qc(t,e){return Array.isArray(t)?t.includes(e):t===e}function qC(t,e){let n=yh(e);return yh(t).forEach(i=>{qc(n,i)||n.push(i)}),n}function QC(t,e){return yh(e).filter(n=>!qc(t,n))}var Qc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},bi=class extends Qc{get formDirective(){return null}get path(){return null}},os=class extends Qc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Yc=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},_N={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},M2=$(y({},_N),{"[class.ng-submitted]":"isSubmitted"}),el=(()=>{let e=class e extends Yc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(os,2))},e.\u0275dir=Ie({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&nr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Jt]});let t=e;return t})(),cD=(()=>{let e=class e extends Yc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(bi,10))},e.\u0275dir=Ie({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&nr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Jt]});let t=e;return t})();var es="VALID",Gc="INVALID",Ei="PENDING",ts="DISABLED",Si=class{},Zc=class extends Si{constructor(e,n){super(),this.value=e,this.source=n}},rs=class extends Si{constructor(e,n){super(),this.pristine=e,this.source=n}},is=class extends Si{constructor(e,n){super(),this.touched=e,this.source=n}},Ii=class extends Si{constructor(e,n){super(),this.status=e,this.source=n}};function lD(t){return(tl(t)?t.validators:t)||null}function CN(t){return Array.isArray(t)?Dh(t):t||null}function uD(t,e){return(tl(e)?e.asyncValidators:t)||null}function DN(t){return Array.isArray(t)?wh(t):t||null}function tl(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function wN(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")}function EN(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new E(1002,"")})}var Kc=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=To(()=>this.statusReactive()),this.statusReactive=wo(void 0),this._pristine=To(()=>this.pristineReactive()),this.pristineReactive=wo(!0),this._touched=To(()=>this.touchedReactive()),this.touchedReactive=wo(!1),this._events=new re,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return nn(this.statusReactive)}set status(e){nn(()=>this.statusReactive.set(e))}get valid(){return this.status===es}get invalid(){return this.status===Gc}get pending(){return this.status==Ei}get disabled(){return this.status===ts}get enabled(){return this.status!==ts}get pristine(){return nn(this.pristineReactive)}set pristine(e){nn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return nn(this.touchedReactive)}set touched(e){nn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QC(e,this._rawAsyncValidators))}hasValidator(e){return qc(this._rawValidators,e)}hasAsyncValidator(e){return qc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched($(y({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new is(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new is(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty($(y({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new rs(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new rs(!0,r))}markAsPending(e={}){this.status=Ei;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ii(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending($(y({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ts,this.errors=null,this._forEachChild(i=>{i.disable($(y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zc(this.value,r)),this._events.next(new Ii(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(y({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=es,this._forEachChild(r=>{r.enable($(y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors($(y({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===es||this.status===Ei)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zc(this.value,n)),this._events.next(new Ii(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity($(y({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ts:es}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ei,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=iD(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ii(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new te,this.statusChanges=new te}_calculateStatus(){return this._allControlsDisabled()?ts:this.errors?Gc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ei)?Ei:this._anyControlsHaveStatus(Gc)?Gc:es}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new rs(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new is(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=CN(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=DN(this._rawAsyncValidators)}},Xc=class extends Kc{constructor(e,n,r){super(lD(n),uD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){EN(this,!0,e),Object.keys(e).forEach(r=>{wN(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Eh=new C("CallSetDisabledState",{providedIn:"root",factory:()=>Ih}),Ih="always";function IN(t,e){return[...e.path,t]}function dD(t,e,n=Ih){fD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),SN(t,e),TN(t,e),MN(t,e),bN(t,e)}function YC(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bN(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function fD(t,e){let n=vN(t);e.validator!==null?t.setValidators(GC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=yN(t);e.asyncValidator!==null?t.setAsyncValidators(GC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();YC(e._rawValidators,i),YC(e._rawAsyncValidators,i)}function SN(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&hD(t,e)})}function MN(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&hD(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function hD(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function TN(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function AN(t,e){t==null,fD(t,e)}function xN(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function NN(t){return Object.getPrototypeOf(t.constructor)===eD}function RN(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kN(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Jc?n=o:NN(o)?r=o:i=o}),i||r||n||null}var ON={provide:bi,useExisting:Kn(()=>bh)},ns=Promise.resolve(),bh=(()=>{let e=class e extends bi{get submitted(){return nn(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=To(()=>this.submittedReactive()),this.submittedReactive=wo(!1),this._directives=new Set,this.ngSubmit=new te,this.form=new Xc({},Dh(r),wh(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){ns.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),dD(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){ns.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){ns.then(()=>{let i=this._findContainer(r.path),o=new Xc({});AN(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){ns.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){ns.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),RN(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(z(tD,10),z(nD,10),z(Eh,8))},e.\u0275dir=Ie({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Re("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[So([ON]),Jt]});let t=e;return t})();function ZC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function KC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var PN=class extends Kc{constructor(e=null,n,r){super(lD(n),uD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(KC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){KC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var FN={provide:os,useExisting:Kn(()=>ss)},XC=Promise.resolve(),ss=(()=>{let e=class e extends os{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new PN,this._registered=!1,this.name="",this.update=new te,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=kN(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),xN(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){XC.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Ic(i);XC.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?IN(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(z(bi,9),z(tD,10),z(nD,10),z(_h,10),z(ir,8),z(Eh,8))},e.\u0275dir=Ie({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[So([FN]),Jt,ri]});let t=e;return t})(),pD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ie({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var LN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({});let t=e;return t})();var nl=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Eh,useValue:r.callSetDisabledState??Ih}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({imports:[LN]});let t=e;return t})();var VN="firebase",jN="10.13.0";un(VN,jN,"app");var Mi=new Qt("ANGULARFIRE2_VERSION");var BN=(t,e)=>{let n=e?[e]:em(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ur=class{constructor(){return BN(UN)}},UN="app-check";function Sh(){}var rl=class{zone;delegate;constructor(e,n=Iu){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Mh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sh,{},Sh,Sh)),n.pipe(ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},il=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new rl(Zone.current)),this.insideAngular=n.run(()=>new rl(Zone.current,no)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(m(q))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $N(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function sn(t){return HN($N())(t)}function HN(t){return function(n){return n=n.lift(new Mh(t.ngZone)),n.pipe(pt(t.outsideAngular),Xe(t.insideAngular))}}var GN=new Map,qN={activated:!1,tokenObservers:[]},QN={initialized:!1,enabled:!1};function Dt(t){return GN.get(t)||Object.assign({},qN)}function DD(){return QN}var YN="https://content-firebaseappcheck.googleapis.com/v1";var ZN="exchangeDebugToken",vD={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},G2=24*60*60*1e3;var Ah=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return ft(this,null,function*(){this.stop();try{this.pending=new me,this.pending.promise.catch(n=>{}),yield KN(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new me,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function KN(t){return new Promise(e=>{setTimeout(e,t)})}var XN={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mn=new Gg("appCheck","AppCheck",XN);function wD(t){if(!Dt(t).activated)throw Mn.create("use-before-activation",{appName:t.name})}function ED(r,i){return ft(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(h){throw Mn.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw Mn.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(h){throw Mn.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Mn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function ID(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${YN}/projects/${n}/apps/${r}:${ZN}?key=${i}`,body:{debug_token:e}}}var JN="firebase-app-check-database",eR=1,xh="firebase-app-check-store";var ol=null;function tR(){return ol||(ol=new Promise((t,e)=>{try{let n=indexedDB.open(JN,eR);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Mn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(xh,{keyPath:"compositeKey"})}}}catch(n){e(Mn.create("storage-open",{originalErrorMessage:n?.message}))}}),ol)}function nR(t,e){return rR(iR(t),e)}function rR(t,e){return ft(this,null,function*(){let r=(yield tR()).transaction(xh,"readwrite"),o=r.objectStore(xh).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Mn.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function iR(t){return`${t.options.appId}-${t.name}`}var Nh=new wr("@firebase/app-check");function Th(t,e){return Wg()?nR(t,e).catch(n=>{Nh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function bD(){return DD().enabled}function SD(){return ft(this,null,function*(){let t=DD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var oR={error:"UNKNOWN_ERROR"};function sR(t){return Hs.encodeString(JSON.stringify(t),!1)}function Rh(t,e=!1){return ft(this,null,function*(){let n=t.app;wD(n);let r=Dt(n),i=r.token,o;if(i&&!as(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(as(c)?i=c:yield Th(n,void 0))}if(!e&&i&&as(i))return{token:i.token};let s=!1;if(bD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ED(ID(n,yield SD()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Th(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Dt(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Nh.warn(c.message):Nh.error(c),o=c}let a;return i?o?as(i)?a={token:i.token,internalError:o}:a=_D(o):(a={token:i.token},r.token=i,yield Th(n,i)):a=_D(o),s&&uR(n,a),a})}function aR(t){return ft(this,null,function*(){let e=t.app;wD(e);let{provider:n}=Dt(e);if(bD()){let r=yield SD(),{token:i}=yield ED(ID(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function cR(t,e,n,r){let{app:i}=t,o=Dt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&as(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),yD(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>yD(t))}function MD(t,e){let n=Dt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function yD(t){let{app:e}=t,n=Dt(e),r=n.tokenRefresher;r||(r=lR(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function lR(t){let{app:e}=t;return new Ah(()=>ft(this,null,function*(){let n=Dt(e),r;if(n.token?r=yield Rh(t,!0):r=yield Rh(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Dt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},vD.RETRIAL_MIN_WAIT,vD.RETRIAL_MAX_WAIT)}function uR(t,e){let n=Dt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function as(t){return t.expireTimeMillis-Date.now()>0}function _D(t){return{token:sR(oR),error:t}}var kh=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Dt(this.app);for(let n of e)MD(this.app,n.next);return Promise.resolve()}};function dR(t,e){return new kh(t,e)}function fR(t){return{getToken:e=>Rh(t,e),getLimitedUseToken:()=>aR(t),addTokenListener:e=>cR(t,"INTERNAL",e),removeTokenListener:e=>MD(t.app,e)}}var hR="@firebase/app-check",pR="0.8.7";var gR="app-check",CD="app-check-internal";function mR(){Ki(new Ut(gR,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return dR(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(CD).initialize()})),Ki(new Ut(CD,t=>{let e=t.getProvider("app-check").getImmediate();return fR(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),un(hR,pR)}mR();var vR=["localhost","0.0.0.0","127.0.0.1"],iH=typeof window<"u"&&vR.includes(window.location.hostname);var yR="firebase",_R="10.13.0";je.registerVersion(yR,_R,"app-compat");var CR=["ngOnDestroy"],xD=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(CR.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,d),d})})})});var sl=class{constructor(e){return e}},Ti=new C("angularfire2.app.options"),Ai=new C("angularfire2.app.name");function cs(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=je.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>je.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;DR("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new sl(s)}var DR=(t,...e)=>{Cf()&&typeof console<"u"&&console[t](...e)},wR={provide:sl,useFactory:cs,deps:[Ti,q,[new ti,Ai]]},ND=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ti,useValue:n},{provide:Ai,useValue:r}]}}constructor(n){je.registerVersion("angularfire",Mi.full,"core"),je.registerVersion("angularfire",Mi.full,"app-compat"),je.registerVersion("angular",b_.full,n.toString())}static \u0275fac=function(r){return new(r||t)(m(st))};static \u0275mod=Ee({type:t});static \u0275inj=we({providers:[wR]})}return t})();function al(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return ER(i,s)||(AD("error",`${e} was already initialized on the ${n} Firebase App with different settings.${IR?" You may need to reload as Firebase is not HMR aware.":""}`),AD("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function ER(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var IR=typeof module<"u"&&!!module.hot,AD=(t,...e)=>{Cf()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Oh=new C("angularfire2.auth.use-emulator"),Ph=new C("angularfire2.auth.settings"),Fh=new C("angularfire2.auth.tenant-id"),Lh=new C("angularfire2.auth.langugage-code"),Vh=new C("angularfire2.auth.use-device-language"),jh=new C("angularfire.auth.persistence"),Bh=(t,e,n,r,i,o,s,a)=>al(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),RD=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,u,d,f,h){let p=new re,v=b(void 0).pipe(Xe(s.outsideAngular),ie(()=>o.runOutsideAngular(()=>import("./chunk-5JD3MMDK.js"))),S(()=>cs(n,o,r)),S(D=>Bh(D,o,a,l,u,d,c,f)),Ia({bufferSize:1,refCount:!1}));if(xo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=b(null);else{v.pipe(Je()).subscribe();let D=v.pipe(ie(T=>T.getRedirectResult().then(le=>le,()=>null)),sn,Ia({bufferSize:1,refCount:!1})),M=v.pipe(ie(T=>new j(le=>({unsubscribe:o.runOutsideAngular(()=>T.onAuthStateChanged(Le=>le.next(Le),Le=>le.error(Le),()=>le.complete()))})))),Q=v.pipe(ie(T=>new j(le=>({unsubscribe:o.runOutsideAngular(()=>T.onIdTokenChanged(Le=>le.next(Le),Le=>le.error(Le),()=>le.complete()))}))));this.authState=D.pipe(ba(M),pt(s.outsideAngular),Xe(s.insideAngular)),this.user=D.pipe(ba(Q),pt(s.outsideAngular),Xe(s.insideAngular)),this.idToken=this.user.pipe(ie(T=>T?J(T.getIdToken()):b(null))),this.idTokenResult=this.user.pipe(ie(T=>T?J(T.getIdTokenResult()):b(null))),this.credential=Pr(D,p,this.authState.pipe(ze(T=>!T))).pipe(S(T=>T?.user?T:null),pt(s.outsideAngular),Xe(s.insideAngular))}return xD(this,v,o,{spy:{apply:(D,M,Q)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&Q.then(T=>p.next(T))}}})}static \u0275fac=function(r){return new(r||t)(m(Ti),m(Ai,8),m(st),m(q),m(il),m(Oh,8),m(Ph,8),m(Fh,8),m(Lh,8),m(Vh,8),m(jh,8),m(ur,8))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var kD="@firebase/database",OD="1.0.7";var Xp="";function Jp(t){Xp=t}var Qh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),de(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Yh=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ke(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var dw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qh(e)}}catch{}return new Yh},fr=dw("localStorage"),Zh=dw("sessionStorage");var ki=new wr("@firebase/database"),fw=function(){let t=1;return function(){return t++}}(),hw=function(t){let e=Kg(t),n=new Zg;n.update(e);let r=n.digest();return Hs.encodeByteArray(r)},Rs=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Rs.apply(null,r):typeof r=="object"?e+=de(r):e+=r,e+=" "}return e},hr=null,PD=!0,pw=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ki.logLevel=Xg.VERBOSE,hr=ki.log.bind(ki),e&&Zh.set("logging_enabled",!0)):typeof t=="function"?hr=t:(hr=null,Zh.remove("logging_enabled"))},ye=function(...t){if(PD===!0&&(PD=!1,hr===null&&Zh.get("logging_enabled")===!0&&pw(!0)),hr){let e=Rs.apply(null,t);hr(e)}},ks=function(t){return function(...e){ye(t,...e)}},Kh=function(...t){let e="FIREBASE INTERNAL ERROR: "+Rs(...t);ki.error(e)},Vt=function(...t){let e=`FIREBASE FATAL ERROR: ${Rs(...t)}`;throw ki.error(e),new Error(e)},Se=function(...t){let e="FIREBASE WARNING: "+Rs(...t);ki.warn(e)},SR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Se("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pl=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},MR=function(t){if(It()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Nn="[MIN_NAME]",an="[MAX_NAME]",gr=function(t,e){if(t===e)return 0;if(t===Nn||e===an)return-1;if(e===Nn||t===an)return 1;{let n=FD(t),r=FD(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},TR=function(t,e){return t===e?0:t<e?-1:1},ls=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+de(e))},eg=function(t){if(typeof t!="object"||t===null)return de(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=de(e[r]),n+=":",n+=eg(t[e[r]]);return n+="}",n},gw=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function _e(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var mw=function(t){g(!Pl(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},AR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function NR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var RR=new RegExp("^-?(0*)\\d{1,10}$"),kR=-2147483648,OR=2147483647,FD=function(t){if(RR.test(t)){let e=Number(t);if(e>=kR&&e<=OR)return e}return null},$i=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Se("Exception was thrown by user callback.",n),e},Math.floor(0))}},PR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hs=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Xh=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Se(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Jh=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Se(e)}},ps=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),ll="5",vw="v",yw="s",_w="r",Cw="f",Dw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ww="ls",Ew="p",ep="ac",Iw="websocket",bw="long_polling";var ul=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function FR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Sw(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===Iw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===bw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);FR(t)&&(n.ns=t.namespace);let i=[];return _e(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var tp=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ke(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $g(this.counters_)}};var Uh={},$h={};function tg(t){let e=t.toString();return Uh[e]||(Uh[e]=new tp),Uh[e]}function LR(t,e){let n=t.toString();return $h[n]||($h[n]=e()),$h[n]}var np=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&$i(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var LD="start",VR="close",jR="pLPCommand",BR="pRTLPCB",Mw="id",Tw="pw",Aw="ser",UR="cb",$R="seg",HR="ts",zR="d",WR="dframe",xw=1870,Nw=30,GR=xw-Nw,qR=25e3,QR=3e4,ys=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ks(e),this.stats_=tg(n),this.urlFn=c=>(this.appCheckToken&&(c[ep]=this.appCheckToken),Sw(n,bw,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new np(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(QR)),MR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rp((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===LD)this.id=a,this.password=c;else if(s===VR)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[LD]="t",r[Aw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[UR]=this.scriptTagHolder.uniqueCallbackIdentifier),r[vw]=ll,this.transportSessionId&&(r[yw]=this.transportSessionId),this.lastSessionId&&(r[ww]=this.lastSessionId),this.applicationId&&(r[Ew]=this.applicationId),this.appCheckToken&&(r[ep]=this.appCheckToken),typeof location<"u"&&location.hostname&&Dw.test(location.hostname)&&(r[_w]=Cw);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return It()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!AR()&&!xR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Ug(n),i=gw(r,GR);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(It())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[WR]="t",r[Mw]=e,r[Tw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=de(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},rp=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,It())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=fw(),window[jR+this.uniqueCallbackIdentifier]=e,window[BR+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){ye("frame writing exception"),a.stack&&ye(a.stack),ye(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ye("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Mw]=this.myID,e[Tw]=this.myPW,e[Aw]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Nw+r.length<=xw;){let s=this.pendingSegs.shift();r=r+"&"+$R+i+"="+s.seg+"&"+HR+i+"="+s.ts+"&"+zR+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(qR)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){It()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ye("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var YR=16384,ZR=45e3,dl=null;typeof MozWebSocket<"u"?dl=MozWebSocket:typeof WebSocket<"u"&&(dl=WebSocket);var Ni=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ks(this.connId),this.stats_=tg(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[vw]=ll,!It()&&typeof location<"u"&&location.hostname&&Dw.test(location.hostname)&&(a[_w]=Cw),r&&(a[yw]=r),i&&(a[ww]=i),o&&(a[ep]=o),s&&(a[Ew]=s),Sw(n,Iw,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fr.set("previous_websocket_failure",!0);try{let i;if(It()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ll}/${Xp}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new dl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&dl!==null&&!t.forceDisallow_}static previouslyFailed(){return fr.isInMemoryStorage||fr.get("previous_websocket_failure")===!0}markConnectionHealthy(){fr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=zs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=de(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=gw(r,YR);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ZR))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Rw=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ys,Ni]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Ni&&Ni.isAvailable(),i=r&&!Ni.previouslyFailed();if(n.webSocketOnly&&(r||Se("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ni];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),KR=6e4,XR=5e3,JR=10*1024,ek=100*1024,Hh="t",VD="d",tk="s",jD="r",nk="e",BD="o",UD="a",$D="n",HD="p",rk="h",ip=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ks("c:"+this.id+":"),this.transportManager_=new Rw(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=hs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ek?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>JR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Hh in e){let n=e[Hh];n===UD?this.upgradeIfSecondaryHealthy_():n===jD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===BD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=ls("t",e),r=ls("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:HD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:UD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$D,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=ls("t",e),r=ls("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=ls(Hh,e);if(VD in e){let r=e[VD];if(n===rk){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===$D){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===tk?this.onConnectionShutdown_(r):n===jD?this.onReset_(r):n===nk?Kh("Server Error: "+r):n===BD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kh("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ll!==r&&Se("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(XR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:HD,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var fl=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var hl=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var pl=class t extends hl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ou()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var zD=32,WD=768,G=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function W(){return new G("")}function F(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Rn(t){return t.pieces_.length-t.pieceNum_}function X(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new G(t.pieces_,e)}function ng(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ik(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function _s(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function kw(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new G(e,0)}function ne(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof G)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new G(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Oe(t,e){let n=F(t),r=F(e);if(n===null)return e;if(n===r)return Oe(X(t),X(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ok(t,e){let n=_s(t,0),r=_s(e,0);for(let i=0;i<n.length&&i<r.length;i++){let o=gr(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function rg(t,e){if(Rn(t)!==Rn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ct(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Rn(t)>Rn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var op=class{constructor(e,n){this.errorPrefix_=n,this.parts_=_s(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Zi(this.parts_[r]);Ow(this)}};function sk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Zi(e),Ow(t)}function ak(t){let e=t.parts_.pop();t.byteLength_-=Zi(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ow(t){if(t.byteLength_>WD)throw new Error(t.errorPrefix_+"has a key path longer than "+WD+" bytes ("+t.byteLength_+").");if(t.parts_.length>zD)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zD+") or object contains a cycle "+dr(t))}function dr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var sp=class t extends hl{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var us=1e3,ck=60*5*1e3,GD=30*1e3,lk=1.3,uk=3e4,dk="server_kill",qD=3,ig=(()=>{class t extends fl{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=ks("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=us,this.maxReconnectDelay_=ck,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!It())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sp.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&pl.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(de(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new me,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ke(n,"w")){let i=ln(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Se(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Qg(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=GD)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=qg(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+de(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Kh("Unrecognized action received from server: "+de(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=us,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=us,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uk&&(this.reconnectDelay_=us),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lk)}this.onConnectStatus_(!1)}establishConnection_(){return ft(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ye("getToken() completed but was canceled"):(ye("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new ip(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{Se(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(dk)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Se(f),l())}}})}interrupt(n){ye("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ye("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ws(this.interruptReasons_)&&(this.reconnectDelay_=us,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>eg(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new G(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){ye("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qD&&(this.reconnectDelay_=GD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ye("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";It()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Xp.replace(/\./g,"-")]=1,ou()?n["framework.cordova"]=1:zg()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=pl.getInstance().currentlyOnline();return Ws(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),V=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Oi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new V(Nn,e),i=new V(Nn,n);return this.compare(r,i)!==0}minPost(){return V.MIN}};var cl,gl=class extends Oi{static get __EMPTY_NODE(){return cl}static set __EMPTY_NODE(e){cl=e}compare(e,n){return gr(e.name,n.name)}isDefinedOn(e){throw Dr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return V.MIN}maxPost(){return new V(an,cl)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new V(e,cl)}toString(){return".key"}},Lt=new gl;var Ri=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},wt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??lt.EMPTY_NODE,this.right=s??lt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return lt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return lt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),ap=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new wt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},lt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,wt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ri(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ri(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ri(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ri(this.root_,null,this.comparator_,!0,e)}};lt.EMPTY_NODE=new ap;function fk(t,e){return gr(t.name,e.name)}function og(t,e){return gr(t,e)}var cp;function hk(t){cp=t}var Pw=function(t){return typeof t=="number"?"number:"+mw(t):"string:"+t},Fw=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ke(e,".sv"),"Priority must be a string or number.")}else g(t===cp||t.isEmpty(),"priority of unexpected type.");g(t===cp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var QD,Pi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Fw(this.priorityNode_)}static set __childrenNodeConstructor(n){QD=n}static get __childrenNodeConstructor(){return QD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:F(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=F(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||Rn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(X(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Pw(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=mw(this.value_):n+=this.value_,this.lazyHash_=hw(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Lw,Vw;function pk(t){Lw=t}function gk(t){Vw=t}var lp=class extends Oi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?gr(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return V.MIN}maxPost(){return new V(an,new Pi("[PRIORITY-POST]",Vw))}makePost(e,n){let r=Lw(e);return new V(n,new Pi("[PRIORITY-POST]",r))}toString(){return".priority"}},ee=new lp;var mk=Math.log(2),up=class{constructor(e){let n=o=>parseInt(Math.log(o)/mk,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ml=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new wt(f,d.node,wt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),v=i(h+1,l);return d=t[h],f=n?n(d):d,new wt(f,d.node,wt.BLACK,p,v)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,v){let D=d-p,M=d;d-=p;let Q=i(D+1,M),T=t[D],le=n?n(T):T;h(new wt(le,T.node,v,null,Q))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),D=Math.pow(2,c.count-(p+1));v?f(D,wt.BLACK):(f(D,wt.BLACK),f(D,wt.RED))}return u},s=new up(t.length),a=o(s);return new lt(r||e,a)};var zh,xi={},Fi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(xi&&ee,"ChildrenNode.ts has not been loaded"),zh=zh||new t({".priority":xi},{".priority":ee}),zh}get(e){let n=ln(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof lt?n:null}hasIndex(e){return Ke(this.indexSet_,e.toString())}addIndex(e,n){g(e!==Lt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(V.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=ml(r,e.getCompare()):a=xi;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Yi(this.indexes_,(i,o)=>{let s=ln(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===xi)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(V.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),ml(a,s.getCompare())}else return xi;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new V(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Yi(this.indexes_,i=>{if(i===xi)return i;{let o=n.get(e.name);return o?i.remove(new V(e.name,o)):i}});return new t(r,this.indexSet_)}};var ds,R=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Fw(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ds||(ds=new t(new lt(og),null,Fi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ds}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?ds:r}}getChild(n){let r=F(n);return r===null?this:this.getImmediateChild(r).getChild(X(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new V(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?ds:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=F(n);if(i===null)return r;{g(F(n)!==".priority"||Rn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(X(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ee,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Pw(this.getPriority().val())+":"),this.forEachChild(ee,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":hw(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new V(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new V(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new V(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,V.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,V.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Os?-1:0}withIndex(n){if(n===Lt||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Lt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ee),o=r.getIterator(ee),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Lt?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),dp=class extends R{constructor(){super(new lt(og),R.EMPTY_NODE,Fi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return R.EMPTY_NODE}isEmpty(){return!1}},Os=new dp;Object.defineProperties(V,{MIN:{value:new V(Nn,R.EMPTY_NODE)},MAX:{value:new V(an,Os)}});gl.__EMPTY_NODE=R.EMPTY_NODE;Pi.__childrenNodeConstructor=R;hk(Os);gk(Os);var vk=!0;function ae(t,e=null){if(t===null)return R.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Pi(n,ae(e))}if(!(t instanceof Array)&&vk){let n=[],r=!1;if(_e(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=ae(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new V(s,c)))}}),n.length===0)return R.EMPTY_NODE;let o=ml(n,fk,s=>s.name,og);if(r){let s=ml(n,ee.getCompare());return new R(o,ae(e),new Fi({".priority":s},{".priority":ee}))}else return new R(o,ae(e),Fi.Default)}else{let n=R.EMPTY_NODE;return _e(t,(r,i)=>{if(Ke(t,r)&&r.substring(0,1)!=="."){let o=ae(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ae(e))}}pk(ae);var Cs=class extends Oi{constructor(e){super(),this.indexPath_=e,g(!L(e)&&F(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?gr(e.name,n.name):o}makePost(e,n){let r=ae(e),i=R.EMPTY_NODE.updateChild(this.indexPath_,r);return new V(n,i)}maxPost(){let e=R.EMPTY_NODE.updateChild(this.indexPath_,Os);return new V(an,e)}toString(){return _s(this.indexPath_,0).join("/")}};var fp=class extends Oi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?gr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return V.MIN}maxPost(){return V.MAX}makePost(e,n){let r=ae(e);return new V(n,r)}toString(){return".value"}},sg=new fp;function jw(t){return{type:"value",snapshotNode:t}}function Li(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ds(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ws(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function yk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Es=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Ds(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Li(n,r)):s.trackChildChange(ws(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ee,(i,o)=>{n.hasChild(i)||r.trackChildChange(Ds(i,o))}),n.isLeafNode()||n.forEachChild(ee,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(ws(i,o,s))}else r.trackChildChange(Li(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?R.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var vl=class t{constructor(e){this.indexedFilter_=new Es(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new V(n,r))||(r=R.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=R.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(R.EMPTY_NODE);let o=this;return n.forEachChild(ee,(s,a)=>{o.matches(new V(s,a))||(i=i.updateImmediateChild(s,R.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var hp=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new V(n,r))||(r=R.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=R.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=R.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(R.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,R.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new V(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(ws(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Ds(n,d));let v=a.updateImmediateChild(n,R.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Li(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Ds(l.name,l.node)),o.trackChildChange(Li(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,R.EMPTY_NODE)):e}};var Is=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ee}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nn}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:an}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ee}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function _k(t){return t.loadsAllData()?new Es(t.getIndex()):t.hasLimit()?new hp(t):new vl(t)}function Ck(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Dk(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function pp(t,e,n){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function wk(t,e,n){let r;return t.index_===Lt||n?r=pp(t,e,n):r=pp(t,e,an),r.startAfterSet_=!0,r}function gp(t,e,n){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ek(t,e,n){let r;return t.index_===Lt||n?r=gp(t,e,n):r=gp(t,e,Nn),r.endBeforeSet_=!0,r}function Fl(t,e){let n=t.copy();return n.index_=e,n}function YD(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ee?n="$priority":t.index_===sg?n="$value":t.index_===Lt?n="$key":(g(t.index_ instanceof Cs,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=de(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=de(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+de(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=de(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+de(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ZD(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ee&&(e.i=t.index_.toString()),e}var mp=class t extends fl{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ks("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=YD(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),ln(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=YD(e._queryParams),r=e._path.toString(),i=new me;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yg(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=zs(a.responseText)}catch{Se("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Se("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var vp=class{constructor(){this.rootNode_=R.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function yl(){return{value:null,children:new Map}}function Hi(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=F(e);t.children.has(r)||t.children.set(r,yl());let i=t.children.get(r);e=X(e),Hi(i,e,n)}}function yp(t,e){if(L(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(ee,(r,i)=>{Hi(t,new G(r),i)}),yp(t,e)}}else if(t.children.size>0){let n=F(e);return e=X(e),t.children.has(n)&&yp(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function _p(t,e,n){t.value!==null?n(e,t.value):Ik(t,(r,i)=>{let o=new G(e.toString()+"/"+r);_p(i,o,n)})}function Ik(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Cp=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_e(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var KD=10*1e3,bk=30*1e3,Sk=5*60*1e3,Dp=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Cp(e);let r=KD+(bk-KD)*Math.random();hs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;_e(e,(i,o)=>{o>0&&Ke(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),hs(this.reportStats_.bind(this),Math.floor(Math.random()*2*Sk))}};var Ft=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ft||{});function ag(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function cg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var wp=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ft.ACK_USER_WRITE,this.source=ag()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new G(e));return new t(W(),n,this.revert)}}else return g(F(this.path)===e,"operationForChild called for unrelated child."),new t(X(this.path),this.affectedTree,this.revert)}};var _l=class t{constructor(e,n){this.source=e,this.path=n,this.type=Ft.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new t(this.source,W()):new t(this.source,X(this.path))}};var Vi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ft.OVERWRITE}operationForChild(e){return L(this.path)?new t(this.source,W(),this.snap.getImmediateChild(e)):new t(this.source,X(this.path),this.snap)}};var bs=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ft.MERGE}operationForChild(e){if(L(this.path)){let n=this.children.subtree(new G(e));return n.isEmpty()?null:n.value?new Vi(this.source,W(),n.value):new t(this.source,W(),n)}else return g(F(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,X(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var jt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;let n=F(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Ep=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Mk(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(yk(s.childName,s.snapshotNode))}),fs(t,i,"child_removed",e,r,n),fs(t,i,"child_added",e,r,n),fs(t,i,"child_moved",o,r,n),fs(t,i,"child_changed",e,r,n),fs(t,i,"value",e,r,n),i}function fs(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>Ak(t,a,c)),s.forEach(a=>{let c=Tk(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Tk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ak(t,e,n){if(e.childName==null||n.childName==null)throw Dr("Should only compare child_ events.");let r=new V(e.childName,e.snapshotNode),i=new V(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Ll(t,e){return{eventCache:t,serverCache:e}}function gs(t,e,n,r){return Ll(new jt(e,n,r),t.serverCache)}function Bw(t,e,n,r){return Ll(t.eventCache,new jt(e,n,r))}function Cl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function pr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Wh,xk=()=>(Wh||(Wh=new lt(TR)),Wh),Pe=class t{constructor(e,n=xk()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return _e(e,(r,i)=>{n=n.set(new G(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:W(),value:this.value};if(L(e))return null;{let r=F(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(X(e),n);return o!=null?{path:ne(new G(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{let n=F(e),r=this.children.get(n);return r!==null?r.subtree(X(e)):new t(null)}}set(e,n){if(L(e))return new t(n,this.children);{let r=F(e),o=(this.children.get(r)||new t(null)).set(X(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(L(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=F(e),r=this.children.get(n);if(r){let i=r.remove(X(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(L(e))return this.value;{let n=F(e),r=this.children.get(n);return r?r.get(X(e)):null}}setTree(e,n){if(L(e))return n;{let r=F(e),o=(this.children.get(r)||new t(null)).setTree(X(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(W(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(ne(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,W(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(L(e))return null;{let o=F(e),s=this.children.get(o);return s?s.findOnPath_(X(e),ne(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,W(),n)}foreachOnPath_(e,n,r){if(L(e))return this;{this.value&&r(n,this.value);let i=F(e),o=this.children.get(i);return o?o.foreachOnPath_(X(e),ne(n,i),r):new t(null)}}foreach(e){this.foreach_(W(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ne(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Et=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Pe(null))}};function ms(t,e,n){if(L(e))return new Et(new Pe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Oe(i,e);return o=o.updateChild(s,n),new Et(t.writeTree_.set(i,o))}else{let i=new Pe(n),o=t.writeTree_.setTree(e,i);return new Et(o)}}}function Ip(t,e,n){let r=t;return _e(n,(i,o)=>{r=ms(r,ne(e,i),o)}),r}function XD(t,e){if(L(e))return Et.empty();{let n=t.writeTree_.setTree(e,new Pe(null));return new Et(n)}}function bp(t,e){return mr(t,e)!=null}function mr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Oe(n.path,e)):null}function JD(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ee,(r,i)=>{e.push(new V(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new V(r,i.value))}),e}function An(t,e){if(L(e))return t;{let n=mr(t,e);return n!=null?new Et(new Pe(n)):new Et(t.writeTree_.subtree(e))}}function Sp(t){return t.writeTree_.isEmpty()}function ji(t,e){return Uw(W(),t.writeTree_,e)}function Uw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=Uw(ne(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ne(t,".priority"),r)),n}}function Vl(t,e){return Ww(e,t)}function Nk(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ms(t.visibleWrites,e,n)),t.lastWriteId=r}function Rk(t,e,n,r){g(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ip(t.visibleWrites,e,n),t.lastWriteId=r}function kk(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function Ok(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&Pk(a,r.path)?i=!1:ct(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return Fk(t),!0;if(r.snap)t.visibleWrites=XD(t.visibleWrites,r.path);else{let a=r.children;_e(a,c=>{t.visibleWrites=XD(t.visibleWrites,ne(r.path,c))})}return!0}else return!1}function Pk(t,e){if(t.snap)return ct(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ct(ne(t.path,n),e))return!0;return!1}function Fk(t){t.visibleWrites=$w(t.allWrites,Lk,W()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Lk(t){return t.visible}function $w(t,e,n){let r=Et.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)ct(n,s)?(a=Oe(n,s),r=ms(r,a,o.snap)):ct(s,n)&&(a=Oe(s,n),r=ms(r,W(),o.snap.getChild(a)));else if(o.children){if(ct(n,s))a=Oe(n,s),r=Ip(r,a,o.children);else if(ct(s,n))if(a=Oe(s,n),L(a))r=Ip(r,W(),o.children);else{let c=ln(o.children,F(a));if(c){let l=c.getChild(X(a));r=ms(r,W(),l)}}}else throw Dr("WriteRecord should have .snap or .children")}}return r}function Hw(t,e,n,r,i){if(!r&&!i){let o=mr(t.visibleWrites,e);if(o!=null)return o;{let s=An(t.visibleWrites,e);if(Sp(s))return n;if(n==null&&!bp(s,W()))return null;{let a=n||R.EMPTY_NODE;return ji(s,a)}}}else{let o=An(t.visibleWrites,e);if(!i&&Sp(o))return n;if(!i&&n==null&&!bp(o,W()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ct(l.path,e)||ct(e,l.path))},a=$w(t.allWrites,s,e),c=n||R.EMPTY_NODE;return ji(a,c)}}}function Vk(t,e,n){let r=R.EMPTY_NODE,i=mr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ee,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=An(t.visibleWrites,e);return n.forEachChild(ee,(s,a)=>{let c=ji(An(o,new G(s)),a);r=r.updateImmediateChild(s,c)}),JD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=An(t.visibleWrites,e);return JD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function jk(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=ne(e,n);if(bp(t.visibleWrites,o))return null;{let s=An(t.visibleWrites,o);return Sp(s)?i.getChild(n):ji(s,i.getChild(n))}}function Bk(t,e,n,r){let i=ne(e,n),o=mr(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=An(t.visibleWrites,i);return ji(s,r.getNode().getImmediateChild(n))}else return null}function Uk(t,e){return mr(t.visibleWrites,e)}function $k(t,e,n,r,i,o,s){let a,c=An(t.visibleWrites,e),l=mr(c,W());if(l!=null)a=l;else if(n!=null)a=ji(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function Hk(){return{visibleWrites:Et.empty(),allWrites:[],lastWriteId:-1}}function Dl(t,e,n,r){return Hw(t.writeTree,t.treePath,e,n,r)}function ug(t,e){return Vk(t.writeTree,t.treePath,e)}function ew(t,e,n,r){return jk(t.writeTree,t.treePath,e,n,r)}function wl(t,e){return Uk(t.writeTree,ne(t.treePath,e))}function zk(t,e,n,r,i,o){return $k(t.writeTree,t.treePath,e,n,r,i,o)}function dg(t,e,n){return Bk(t.writeTree,t.treePath,e,n)}function zw(t,e){return Ww(ne(t.treePath,e),t.writeTree)}function Ww(t,e){return{treePath:t,writeTree:e}}var Mp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ws(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ds(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Li(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ws(r,e.snapshotNode,i.oldSnap));else throw Dr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Tp=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Gw=new Tp,Ss=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new jt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dg(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:pr(this.viewCache_),o=zk(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function Wk(t){return{filter:t}}function Gk(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function qk(t,e,n,r,i){let o=new Mp,s,a;if(n.type===Ft.OVERWRITE){let l=n;l.source.fromUser?s=Ap(t,e,l.path,l.snap,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!L(l.path),s=El(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Ft.MERGE){let l=n;l.source.fromUser?s=Yk(t,e,l.path,l.children,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xp(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Ft.ACK_USER_WRITE){let l=n;l.revert?s=Xk(t,e,l.path,r,i,o):s=Zk(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Ft.LISTEN_COMPLETE)s=Kk(t,e,n.path,r,o);else throw Dr("Unknown operation type: "+n.type);let c=o.getChanges();return Qk(e,s,c),{viewCache:s,changes:c}}function Qk(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Cl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(jw(Cl(e)))}}function qw(t,e,n,r,i,o){let s=e.eventCache;if(wl(r,n)!=null)return e;{let a,c;if(L(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=pr(e),u=l instanceof R?l:R.EMPTY_NODE,d=ug(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=Dl(r,pr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=F(n);if(l===".priority"){g(Rn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=ew(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=X(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=ew(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=dg(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return gs(e,a,s.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function El(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(L(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=F(n);if(!c.isCompleteForPath(n)&&Rn(n)>1)return e;let p=X(n),D=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),D):l=u.updateChild(c.getNode(),h,D,p,Gw,null)}let d=Bw(e,l,c.isFullyInitialized()||L(n),u.filtersNodes()),f=new Ss(i,d,o);return qw(t,d,n,i,f,a)}function Ap(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new Ss(i,e,o);if(L(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=gs(e,l,!0,t.filter.filtersNodes());else{let d=F(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=gs(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=X(n),h=a.getNode().getImmediateChild(d),p;if(L(f))p=r;else{let v=u.getCompleteChild(d);v!=null?ng(f)===".priority"&&v.getChild(kw(f)).isEmpty()?p=v:p=v.updateChild(f,r):p=R.EMPTY_NODE}if(h.equals(p))c=e;else{let v=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=gs(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function tw(t,e){return t.eventCache.isCompleteForChild(e)}function Yk(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=ne(n,c);tw(e,F(u))&&(a=Ap(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=ne(n,c);tw(e,F(u))||(a=Ap(t,a,u,l,i,o,s))}),a}function nw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function xp(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;L(n)?l=r:l=new Pe(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=nw(t,h,f);c=El(t,c,new G(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),v=nw(t,p,f);c=El(t,c,new G(d),v,i,o,s,a)}}),c}function Zk(t,e,n,r,i,o,s){if(wl(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(L(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return El(t,e,n,c.getNode().getChild(n),i,o,a,s);if(L(n)){let l=new Pe(null);return c.getNode().forEachChild(Lt,(u,d)=>{l=l.set(new G(u),d)}),xp(t,e,n,l,i,o,a,s)}else return e}else{let l=new Pe(null);return r.foreach((u,d)=>{let f=ne(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),xp(t,e,n,l,i,o,a,s)}}function Kk(t,e,n,r,i){let o=e.serverCache,s=Bw(e,o.getNode(),o.isFullyInitialized()||L(n),o.isFiltered());return qw(t,s,n,r,Gw,i)}function Xk(t,e,n,r,i,o){let s;if(wl(r,n)!=null)return e;{let a=new Ss(r,e,i),c=e.eventCache.getNode(),l;if(L(n)||F(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Dl(r,pr(e));else{let d=e.serverCache.getNode();g(d instanceof R,"serverChildren would be complete if leaf node"),u=ug(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=F(n),d=dg(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,X(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,R.EMPTY_NODE,X(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Dl(r,pr(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||wl(r,W())!=null,gs(e,l,s,t.filter.filtersNodes())}}var Np=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Es(r.getIndex()),o=_k(r);this.processor_=Wk(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(R.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(R.EMPTY_NODE,a.getNode(),null),u=new jt(c,s.isFullyInitialized(),i.filtersNodes()),d=new jt(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ll(d,u),this.eventGenerator_=new Ep(this.query_)}get query(){return this.query_}};function Jk(t){return t.viewCache_.serverCache.getNode()}function eO(t){return Cl(t.viewCache_)}function tO(t,e){let n=pr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(F(e)).isEmpty())?n.getChild(e):null}function rw(t){return t.eventRegistrations_.length===0}function nO(t,e){t.eventRegistrations_.push(e)}function iw(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function ow(t,e,n,r){e.type===Ft.MERGE&&e.source.queryId!==null&&(g(pr(t.viewCache_),"We should always have a full cache before handling merges"),g(Cl(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=qk(t.processor_,i,e,n,r);return Gk(t.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Qw(t,o.changes,o.viewCache.eventCache.getNode(),null)}function rO(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ee,(o,s)=>{r.push(Li(o,s))}),n.isFullyInitialized()&&r.push(jw(n.getNode())),Qw(t,r,n.getNode(),e)}function Qw(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return Mk(t.eventGenerator_,e,n,i)}var Il,bl=class{constructor(){this.views=new Map}};function iO(t){g(!Il,"__referenceConstructor has already been defined"),Il=t}function oO(){return g(Il,"Reference.ts has not been loaded"),Il}function sO(t){return t.views.size===0}function fg(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),ow(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(ow(s,e,n,r));return o}}function Yw(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Dl(n,i?r:null),c=!1;a?c=!0:r instanceof R?(a=ug(n,r),c=!1):(a=R.EMPTY_NODE,c=!1);let l=Ll(new jt(a,c,!1),new jt(r,i,!1));return new Np(e,l)}return s}function aO(t,e,n,r,i,o){let s=Yw(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),nO(s,n),rO(s,n)}function cO(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=kn(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(iw(l,n,r)),rw(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(iw(c,n,r)),rw(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!kn(t)&&o.push(new(oO())(e._repo,e._path)),{removed:o,events:s}}function Zw(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xn(t,e){let n=null;for(let r of t.views.values())n=n||tO(r,e);return n}function Kw(t,e){if(e._queryParams.loadsAllData())return jl(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Xw(t,e){return Kw(t,e)!=null}function kn(t){return jl(t)!=null}function jl(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Sl;function lO(t){g(!Sl,"__referenceConstructor has already been defined"),Sl=t}function uO(){return g(Sl,"Reference.ts has not been loaded"),Sl}var dO=1,Ml=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=Hk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function hg(t,e,n,r,i){return Nk(t.pendingWriteTree_,e,n,r,i),i?zi(t,new Vi(ag(),e,n)):[]}function fO(t,e,n,r){Rk(t.pendingWriteTree_,e,n,r);let i=Pe.fromObject(n);return zi(t,new bs(ag(),e,i))}function Tn(t,e,n=!1){let r=kk(t.pendingWriteTree_,e);if(Ok(t.pendingWriteTree_,e)){let o=new Pe(null);return r.snap!=null?o=o.set(W(),!0):_e(r.children,s=>{o=o.set(new G(s),!0)}),zi(t,new wp(r.path,o,n))}else return[]}function Ps(t,e,n){return zi(t,new Vi(cg(),e,n))}function hO(t,e,n){let r=Pe.fromObject(n);return zi(t,new bs(cg(),e,r))}function pO(t,e){return zi(t,new _l(cg(),e))}function gO(t,e,n){let r=pg(t,n);if(r){let i=gg(r),o=i.path,s=i.queryId,a=Oe(o,e),c=new _l(lg(s),a);return mg(t,o,c)}else return[]}function Tl(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||Xw(s,e))){let c=cO(s,e,n,r);sO(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>kn(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=yO(f);for(let p=0;p<h.length;++p){let v=h[p],D=v.query,M=nE(t,v);t.listenProvider_.startListening(vs(D),Ms(t,D),M.hashFn,M.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(vs(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Ul(f));t.listenProvider_.stopListening(vs(f),h)}))}_O(t,l)}return a}function Jw(t,e,n,r){let i=pg(t,r);if(i!=null){let o=gg(i),s=o.path,a=o.queryId,c=Oe(s,e),l=new Vi(lg(a),c,n);return mg(t,s,l)}else return[]}function mO(t,e,n,r){let i=pg(t,r);if(i){let o=gg(i),s=o.path,a=o.queryId,c=Oe(s,e),l=Pe.fromObject(n),u=new bs(lg(a),c,l);return mg(t,s,u)}else return[]}function Rp(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Oe(f,i);o=o||xn(h,p),s=s||kn(h)});let a=t.syncPointTree_.get(i);a?(s=s||kn(a),o=o||xn(a,W())):(a=new bl,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=R.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let v=xn(p,W());v&&(o=o.updateImmediateChild(h,v))}));let l=Xw(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Ul(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=CO();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Vl(t.pendingWriteTree_,i),d=aO(a,e,n,u,o,c);if(!l&&!s&&!r){let f=Kw(a,e);d=d.concat(DO(t,e,f))}return d}function Bl(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Oe(s,e),l=xn(a,c);if(l)return l});return Hw(i,e,o,n,!0)}function vO(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Oe(l,n);r=r||xn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||xn(i,W()):(i=new bl,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new jt(r,!0,!1):null,a=Vl(t.pendingWriteTree_,e._path),c=Yw(i,e,a,o?s.getNode():R.EMPTY_NODE,o);return eO(c)}function zi(t,e){return eE(e,t.syncPointTree_,null,Vl(t.pendingWriteTree_,W()))}function eE(t,e,n,r){if(L(t.path))return tE(t,e,n,r);{let i=e.get(W());n==null&&i!=null&&(n=xn(i,W()));let o=[],s=F(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=zw(r,s);o=o.concat(eE(a,c,l,u))}return i&&(o=o.concat(fg(i,t,r,n))),o}}function tE(t,e,n,r){let i=e.get(W());n==null&&i!=null&&(n=xn(i,W()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=zw(r,s),u=t.operationForChild(s);u&&(o=o.concat(tE(u,a,c,l)))}),i&&(o=o.concat(fg(i,t,r,n))),o}function nE(t,e){let n=e.query,r=Ms(t,n);return{hashFn:()=>(Jk(e)||R.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?gO(t,n._path,r):pO(t,n._path);{let o=NR(i,n);return Tl(t,n,null,o)}}}}function Ms(t,e){let n=Ul(e);return t.queryToTagMap.get(n)}function Ul(t){return t._path.toString()+"$"+t._queryIdentifier}function pg(t,e){return t.tagToQueryMap.get(e)}function gg(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new G(t.substr(0,e))}}function mg(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=Vl(t.pendingWriteTree_,e);return fg(r,n,i,null)}function yO(t){return t.fold((e,n,r)=>{if(n&&kn(n))return[jl(n)];{let i=[];return n&&(i=Zw(n)),_e(r,(o,s)=>{i=i.concat(s)}),i}})}function vs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(uO())(t._repo,t._path):t}function _O(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Ul(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function CO(){return dO++}function DO(t,e,n){let r=e._path,i=Ms(t,e),o=nE(t,n),s=t.listenProvider_.startListening(vs(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!kn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!L(l)&&u&&kn(u))return[jl(u).query];{let f=[];return u&&(f=f.concat(Zw(u).map(h=>h.query))),_e(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(vs(u),Ms(t,u))}}return s}var kp=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Op=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ne(this.path_,e);return new t(this.syncTree_,n)}node(){return Bl(this.syncTree_,this.path_)}},wO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sw=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return EO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return IO(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},EO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},IO=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},rE=function(t,e,n,r){return yg(e,new Op(n,t),r)},vg=function(t,e,n){return yg(t,new kp(e),n)};function yg(t,e,n){let r=t.getPriority().val(),i=sw(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=sw(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Pi(a,ae(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Pi(i))),s.forEachChild(ee,(a,c)=>{let l=yg(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Ts=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function $l(t,e){let n=e instanceof G?e:new G(e),r=t,i=F(n);for(;i!==null;){let o=ln(r.node.children,i)||{children:{},childCount:0};r=new Ts(i,r,o),n=X(n),i=F(n)}return r}function vr(t){return t.node.value}function _g(t,e){t.node.value=e,Pp(t)}function iE(t){return t.node.childCount>0}function bO(t){return vr(t)===void 0&&!iE(t)}function Hl(t,e){_e(t.node.children,(n,r)=>{e(new Ts(n,t,r))})}function oE(t,e,n,r){n&&!r&&e(t),Hl(t,i=>{oE(i,e,!0,r)}),n&&r&&e(t)}function SO(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Fs(t){return new G(t.parent===null?t.name:Fs(t.parent)+"/"+t.name)}function Pp(t){t.parent!==null&&MO(t.parent,t.name,t)}function MO(t,e,n){let r=bO(n),i=Ke(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Pp(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Pp(t))}var TO=/[\[\].#$\/\u0000-\u001F\u007F]/,AO=/[\[\].#$\u0000-\u001F\u007F]/,Gh=10*1024*1024,zl=function(t){return typeof t=="string"&&t.length!==0&&!TO.test(t)},sE=function(t){return typeof t=="string"&&t.length!==0&&!AO.test(t)},xO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sE(t)},As=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Pl(t)||t&&typeof t=="object"&&Ke(t,".sv")},Bt=function(t,e,n,r){r&&e===void 0||Ls(Ve(t,"value"),e,n)},Ls=function(t,e,n){let r=n instanceof G?new op(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+dr(r));if(typeof e=="function")throw new Error(t+"contains a function "+dr(r)+" with contents = "+e.toString());if(Pl(e))throw new Error(t+"contains "+e.toString()+" "+dr(r));if(typeof e=="string"&&e.length>Gh/3&&Zi(e)>Gh)throw new Error(t+"contains a string greater than "+Gh+" utf8 bytes "+dr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(_e(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!zl(s)))throw new Error(t+" contains an invalid key ("+s+") "+dr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sk(r,s),Ls(t,a,r),ak(r)}),i&&o)throw new Error(t+' contains ".value" child '+dr(r)+" in addition to actual children.")}},NO=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let o=_s(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!zl(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(ok);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ct(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},aE=function(t,e,n,r){if(r&&e===void 0)return;let i=Ve(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];_e(e,(s,a)=>{let c=new G(s);if(Ls(i,a,ne(n,c)),ng(c)===".priority"&&!As(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),NO(i,o)},Cg=function(t,e,n){if(!(n&&e===void 0)){if(Pl(e))throw new Error(Ve(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!As(e))throw new Error(Ve(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vs=function(t,e,n,r){if(!(r&&n===void 0)&&!zl(n))throw new Error(Ve(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Wi=function(t,e,n,r){if(!(r&&n===void 0)&&!sE(n))throw new Error(Ve(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},RO=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Wi(t,e,n,r)},qe=function(t,e){if(F(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},cE=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!zl(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!xO(n))throw new Error(Ve(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Fp=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Wl(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!rg(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function lE(t,e,n){Wl(t,n),uE(t,r=>rg(r,e))}function Qe(t,e,n){Wl(t,n),uE(t,r=>ct(r,e)||ct(e,r))}function uE(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(kO(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function kO(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();hr&&ye("event: "+n.toString()),$i(r)}}}var dE="repo_interrupt",OO=25,Lp=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yl(),this.transactionQueueTree_=new Ts,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function PO(t,e,n){if(t.stats_=tg(t.repoInfo_),t.forceRestClient_||PR())t.server_=new mp(t.repoInfo_,(r,i,o,s)=>{aw(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>cw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{de(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ig(t.repoInfo_,e,(r,i,o,s)=>{aw(t,r,i,o,s)},r=>{cw(t,r)},r=>{FO(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=LR(t.repoInfo_,()=>new Dp(t.stats_,t.server_)),t.infoData_=new vp,t.infoSyncTree_=new Ml({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Ps(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Dg(t,"connected",!1),t.serverSyncTree_=new Ml({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Qe(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function fE(t){let n=t.infoData_.getNode(new G(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function js(t){return wO({timestamp:fE(t)})}function aw(t,e,n,r,i){t.dataUpdateCount++;let o=new G(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Yi(n,l=>ae(l));s=mO(t.serverSyncTree_,o,c,i)}else{let c=ae(n);s=Jw(t.serverSyncTree_,o,c,i)}else if(r){let c=Yi(n,l=>ae(l));s=hO(t.serverSyncTree_,o,c)}else{let c=ae(n);s=Ps(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Bi(t,o)),Qe(t.eventQueue_,a,s)}function cw(t,e){Dg(t,"connected",e),e===!1&&jO(t)}function FO(t,e){_e(e,(n,r)=>{Dg(t,n,r)})}function Dg(t,e,n){let r=new G("/.info/"+e),i=ae(n);t.infoData_.updateSnapshot(r,i);let o=Ps(t.infoSyncTree_,r,i);Qe(t.eventQueue_,r,o)}function Gl(t){return t.nextWriteId_++}function LO(t,e,n){let r=vO(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=ae(i).withIndex(e._queryParams.getIndex());Rp(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=Ps(t.serverSyncTree_,e._path,o);else{let a=Ms(t.serverSyncTree_,e);s=Jw(t.serverSyncTree_,e._path,o,a)}return Qe(t.eventQueue_,e._path,s),Tl(t.serverSyncTree_,e,n,null,!0),o},i=>(Gi(t,"get for query "+de(e)+" failed: "+i),Promise.reject(new Error(i))))}function wg(t,e,n,r,i){Gi(t,"set",{path:e.toString(),value:n,priority:r});let o=js(t),s=ae(n,r),a=Bl(t.serverSyncTree_,e),c=vg(s,a,o),l=Gl(t),u=hg(t.serverSyncTree_,e,c,l,!0);Wl(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||Se("set at "+e+" failed: "+f);let v=Tn(t.serverSyncTree_,l,!p);Qe(t.eventQueue_,e,v),On(t,i,f,h)});let d=Ig(t,e);Bi(t,d),Qe(t.eventQueue_,d,[])}function VO(t,e,n,r){Gi(t,"update",{path:e.toString(),value:n});let i=!0,o=js(t),s={};if(_e(n,(a,c)=>{i=!1,s[a]=rE(ne(e,a),ae(c),t.serverSyncTree_,o)}),i)ye("update() called with empty data.  Don't do anything."),On(t,r,"ok",void 0);else{let a=Gl(t),c=fO(t.serverSyncTree_,e,s,a);Wl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{let d=l==="ok";d||Se("update at "+e+" failed: "+l);let f=Tn(t.serverSyncTree_,a,!d),h=f.length>0?Bi(t,e):e;Qe(t.eventQueue_,h,f),On(t,r,l,u)}),_e(n,l=>{let u=Ig(t,ne(e,l));Bi(t,u)}),Qe(t.eventQueue_,e,[])}}function jO(t){Gi(t,"onDisconnectEvents");let e=js(t),n=yl();_p(t.onDisconnect_,W(),(i,o)=>{let s=rE(i,o,t.serverSyncTree_,e);Hi(n,i,s)});let r=[];_p(n,W(),(i,o)=>{r=r.concat(Ps(t.serverSyncTree_,i,o));let s=Ig(t,i);Bi(t,s)}),t.onDisconnect_=yl(),Qe(t.eventQueue_,W(),r)}function BO(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&yp(t.onDisconnect_,e),On(t,n,r,i)})}function lw(t,e,n,r){let i=ae(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&Hi(t.onDisconnect_,e,i),On(t,r,o,s)})}function UO(t,e,n,r,i){let o=ae(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&Hi(t.onDisconnect_,e,o),On(t,i,s,a)})}function $O(t,e,n,r){if(Ws(n)){ye("onDisconnect().update() called with empty data.  Don't do anything."),On(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{i==="ok"&&_e(n,(s,a)=>{let c=ae(a);Hi(t.onDisconnect_,ne(e,s),c)}),On(t,r,i,o)})}function HO(t,e,n){let r;F(e._path)===".info"?r=Rp(t.infoSyncTree_,e,n):r=Rp(t.serverSyncTree_,e,n),lE(t.eventQueue_,e._path,r)}function Vp(t,e,n){let r;F(e._path)===".info"?r=Tl(t.infoSyncTree_,e,n):r=Tl(t.serverSyncTree_,e,n),lE(t.eventQueue_,e._path,r)}function hE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(dE)}function zO(t){t.persistentConnection_&&t.persistentConnection_.resume(dE)}function Gi(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ye(n,...e)}function On(t,e,n,r){e&&$i(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function WO(t,e,n,r,i,o){Gi(t,"transaction on "+e);let s={path:e,update:n,onComplete:r,status:null,order:fw(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Eg(t,e,void 0);s.currentInputSnapshot=a;let c=s.update(a.val());if(c===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Ls("transaction failed: Data returned ",c,s.path),s.status=0;let l=$l(t.transactionQueueTree_,e),u=vr(l)||[];u.push(s),_g(l,u);let d;typeof c=="object"&&c!==null&&Ke(c,".priority")?(d=ln(c,".priority"),g(As(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Bl(t.serverSyncTree_,e)||R.EMPTY_NODE).getPriority().val();let f=js(t),h=ae(c,d),p=vg(h,a,f);s.currentOutputSnapshotRaw=h,s.currentOutputSnapshotResolved=p,s.currentWriteId=Gl(t);let v=hg(t.serverSyncTree_,e,p,s.currentWriteId,s.applyLocally);Qe(t.eventQueue_,e,v),ql(t,t.transactionQueueTree_)}}function Eg(t,e,n){return Bl(t.serverSyncTree_,e,n)||R.EMPTY_NODE}function ql(t,e=t.transactionQueueTree_){if(e||Ql(t,e),vr(e)){let n=gE(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&GO(t,Fs(e),n)}else iE(e)&&Hl(e,n=>{ql(t,n)})}function GO(t,e,n){let r=n.map(l=>l.currentWriteId),i=Eg(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Oe(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Gi(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Tn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Ql(t,$l(t.transactionQueueTree_,e)),ql(t,t.transactionQueueTree_),Qe(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)$i(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Se("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Bi(t,e)}},s)}function Bi(t,e){let n=pE(t,e),r=Fs(n),i=gE(t,n);return qO(t,i,r),r}function qO(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Oe(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Tn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=OO)u=!0,d="maxretry",i=i.concat(Tn(t.serverSyncTree_,c.currentWriteId,!0));else{let f=Eg(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Ls("transaction failed: Data returned ",h,c.path);let p=ae(h);typeof h=="object"&&h!=null&&Ke(h,".priority")||(p=p.updatePriority(f.getPriority()));let D=c.currentWriteId,M=js(t),Q=vg(p,f,M);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=Q,c.currentWriteId=Gl(t),s.splice(s.indexOf(D),1),i=i.concat(hg(t.serverSyncTree_,c.path,Q,c.currentWriteId,c.applyLocally)),i=i.concat(Tn(t.serverSyncTree_,D,!0))}else u=!0,d="nodata",i=i.concat(Tn(t.serverSyncTree_,c.currentWriteId,!0))}Qe(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ql(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)$i(r[a]);ql(t,t.transactionQueueTree_)}function pE(t,e){let n,r=t.transactionQueueTree_;for(n=F(e);n!==null&&vr(r)===void 0;)r=$l(r,n),e=X(e),n=F(e);return r}function gE(t,e){let n=[];return mE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function mE(t,e,n){let r=vr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Hl(e,i=>{mE(t,i,n)})}function Ql(t,e){let n=vr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,_g(e,n.length>0?n:void 0)}Hl(e,r=>{Ql(t,r)})}function Ig(t,e){let n=Fs(pE(t,e)),r=$l(t.transactionQueueTree_,e);return SO(r,i=>{qh(t,i)}),qh(t,r),oE(r,i=>{qh(t,i)}),n}function qh(t,e){let n=vr(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Tn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?_g(e,void 0):n.length=o+1,Qe(t.eventQueue_,Fs(e),i);for(let s=0;s<r.length;s++)$i(r[s])}}function QO(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function YO(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Se(`Invalid query segment '${n}' in query '${t}'`)}return e}var jp=function(t,e){let n=ZO(t),r=n.namespace;n.domain==="firebase.com"&&Vt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||SR();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ul(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new G(n.pathString)}},ZO=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=QO(t.substring(u,d)));let f=YO(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var uw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KO=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=uw.charAt(n%64),n=Math.floor(n/64);g(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=uw.charAt(e[i]);return g(s.length===20,"nextPushId: Length should be 20."),s}}();var Al=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+de(this.snapshot.exportVal())}},xl=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var xs=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Nl=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new me;return BO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){qe("OnDisconnect.remove",this._path);let e=new me;return lw(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){qe("OnDisconnect.set",this._path),Bt("OnDisconnect.set",e,this._path,!1);let n=new me;return lw(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){qe("OnDisconnect.setWithPriority",this._path),Bt("OnDisconnect.setWithPriority",e,this._path,!1),Cg("OnDisconnect.setWithPriority",n,!1);let r=new me;return UO(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){qe("OnDisconnect.update",this._path),aE("OnDisconnect.update",e,this._path,!1);let n=new me;return $O(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var Fe=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:ng(this._path)}get ref(){return new Ye(this._repo,this._path)}get _queryIdentifier(){let e=ZD(this._queryParams),n=eg(e);return n==="{}"?"default":n}get _queryObject(){return ZD(this._queryParams)}isEqual(e){if(e=Me(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=rg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ik(this._path)}};function Yl(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Fn(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lt){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Nn)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==an)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===ee){if(e!=null&&!As(e)||n!=null&&!As(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(g(t.getIndex()instanceof Cs||t.getIndex()===sg,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Zl(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ye=class t extends Fe{constructor(e,n){super(e,n,new Is,!1)}get parent(){let e=kw(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Ui=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new G(e),r=Pn(this.ref,e);return new t(this._node.getChild(n),r,ee)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Pn(this.ref,r),ee)))}hasChild(e){let n=new G(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function bg(t,e){return t=Me(t),t._checkNotDeleted("ref"),e!==void 0?Pn(t._root,e):t._root}function Sg(t,e){t=Me(t),t._checkNotDeleted("refFromURL");let n=jp(e,t._repo.repoInfo_.nodeAdmin);cE("refFromURL",n);let r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Vt("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),bg(t,n.path.toString())}function Pn(t,e){return t=Me(t),F(t._path)===null?RO("child","path",e,!1):Wi("child","path",e,!1),new Ye(t._repo,ne(t._path,e))}function vE(t,e){t=Me(t),qe("push",t._path),Bt("push",e,t._path,!0);let n=fE(t._repo),r=KO(n),i=Pn(t,r),o=Pn(t,r),s;return e!=null?s=Kl(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function yE(t){return qe("remove",t._path),Kl(t,null)}function Kl(t,e){t=Me(t),qe("set",t._path),Bt("set",e,t._path,!1);let n=new me;return wg(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _E(t,e){t=Me(t),qe("setPriority",t._path),Cg("setPriority",e,!1);let n=new me;return wg(t._repo,ne(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function CE(t,e,n){if(qe("setWithPriority",t._path),Bt("setWithPriority",e,t._path,!1),Cg("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new me;return wg(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function DE(t,e){aE("update",e,t._path,!1);let n=new me;return VO(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function wE(t){t=Me(t);let e=new xs(()=>{}),n=new Ns(e);return LO(t._repo,t,n).then(r=>new Ui(r,new Ye(t._repo,t._path),t._queryParams.getIndex()))}var Ns=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Al("value",this,new Ui(e.snapshotNode,new Ye(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xl(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Rl=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xl(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=Pn(new Ye(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Al(e.type,this,new Ui(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Bs(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{Vp(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new xs(n,o||void 0),a=e==="value"?new Ns(s):new Rl(e,s);return HO(t._repo,t,a),()=>Vp(t._repo,t,a)}function Xl(t,e,n,r){return Bs(t,"value",e,n,r)}function Mg(t,e,n,r){return Bs(t,"child_added",e,n,r)}function Tg(t,e,n,r){return Bs(t,"child_changed",e,n,r)}function Ag(t,e,n,r){return Bs(t,"child_moved",e,n,r)}function xg(t,e,n,r){return Bs(t,"child_removed",e,n,r)}function Ng(t,e,n){let r=null,i=n?new xs(n):null;e==="value"?r=new Ns(i):e&&(r=new Rl(e,i)),Vp(t._repo,t,r)}var Ze=class{},kl=class extends Ze{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Bt("endAt",this._value,e._path,!0);let n=gp(e._queryParams,this._value,this._key);if(Zl(n),Fn(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fe(e._repo,e._path,n,e._orderByCalled)}};function EE(t,e){return Vs("endAt","key",e,!0),new kl(t,e)}var Bp=class extends Ze{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Bt("endBefore",this._value,e._path,!1);let n=Ek(e._queryParams,this._value,this._key);if(Zl(n),Fn(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fe(e._repo,e._path,n,e._orderByCalled)}};function IE(t,e){return Vs("endBefore","key",e,!0),new Bp(t,e)}var Ol=class extends Ze{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Bt("startAt",this._value,e._path,!0);let n=pp(e._queryParams,this._value,this._key);if(Zl(n),Fn(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fe(e._repo,e._path,n,e._orderByCalled)}};function bE(t=null,e){return Vs("startAt","key",e,!0),new Ol(t,e)}var Up=class extends Ze{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Bt("startAfter",this._value,e._path,!1);let n=wk(e._queryParams,this._value,this._key);if(Zl(n),Fn(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fe(e._repo,e._path,n,e._orderByCalled)}};function SE(t,e){return Vs("startAfter","key",e,!0),new Up(t,e)}var $p=class extends Ze{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fe(e._repo,e._path,Ck(e._queryParams,this._limit),e._orderByCalled)}};function ME(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $p(t)}var Hp=class extends Ze{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fe(e._repo,e._path,Dk(e._queryParams,this._limit),e._orderByCalled)}};function TE(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Hp(t)}var zp=class extends Ze{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Yl(e,"orderByChild");let n=new G(this._path);if(L(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Cs(n),i=Fl(e._queryParams,r);return Fn(i),new Fe(e._repo,e._path,i,!0)}};function AE(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Wi("orderByChild","path",t,!1),new zp(t)}var Wp=class extends Ze{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Yl(e,"orderByKey");let n=Fl(e._queryParams,Lt);return Fn(n),new Fe(e._repo,e._path,n,!0)}};function xE(){return new Wp}var Gp=class extends Ze{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Yl(e,"orderByPriority");let n=Fl(e._queryParams,ee);return Fn(n),new Fe(e._repo,e._path,n,!0)}};function NE(){return new Gp}var qp=class extends Ze{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Yl(e,"orderByValue");let n=Fl(e._queryParams,sg);return Fn(n),new Fe(e._repo,e._path,n,!0)}};function RE(){return new qp}var Qp=class extends Ze{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Bt("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new kl(this._value,this._key)._apply(new Ol(this._value,this._key)._apply(e))}};function kE(t,e){return Vs("equalTo","key",e,!0),new Qp(t,e)}function ut(t,...e){let n=Me(t);for(let r of e)n=r._apply(n);return n}iO(Ye);lO(Ye);var XO="FIREBASE_DATABASE_EMULATOR_HOST",Yp={},JO=!1;function eP(t,e,n,r){t.repoInfo_=new ul(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Rg(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ye("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=jp(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[XO]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=jp(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new ps(ps.OWNER):new Jh(t.name,t.options,e);cE("Invalid Firebase Database URL",s),L(s.path)||Vt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=nP(a,t,u,new Xh(t.name,n));return new Zp(d,t)}function tP(t,e){let n=Yp[e];(!n||n[t.key]!==t)&&Vt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),hE(t),delete n[t.key]}function nP(t,e,n,r){let i=Yp[e.name];i||(i={},Yp[e.name]=i);let o=i[t.toURLString()];return o&&Vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Lp(t,JO,n,r),i[t.toURLString()]=o,o}var Zp=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(PO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ye(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vt("Cannot call "+e+" on a deleted database.")}};function OE(){Rw.IS_TRANSPORT_INITIALIZED&&Se("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function PE(){OE(),ys.forceDisallow()}function FE(){OE(),Ni.forceDisallow(),ys.forceAllow()}function LE(t,e,n,r={}){t=Me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Vt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ps(ps.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Hg(r.mockUserToken,t.app.options.projectId);o=new ps(s)}eP(i,e,n,o)}function VE(t){t=Me(t),t._checkNotDeleted("goOffline"),hE(t._repo)}function jE(t){t=Me(t),t._checkNotDeleted("goOnline"),zO(t._repo)}function BE(t,e){pw(t,e)}function rP(t){Jp(Jg),Ki(new Ut("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Rg(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),un(kD,OD,t),un(kD,OD,"esm2017")}var iP={".sv":"timestamp"};function UE(){return iP}function $E(t){return{".sv":{increment:t}}}var Kp=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function HE(t,e,n){var r;if(t=Me(t),qe("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,o=new me,s=(c,l,u)=>{let d=null;c?o.reject(c):(d=new Ui(u,new Ye(t._repo,t._path),ee),o.resolve(new Kp(l,d)))},a=Xl(t,()=>{});return WO(t._repo,t._path,e,s,a,i),o.promise}ig.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ig.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};rP();var oP="@firebase/database-compat",sP="1.0.7";var aP=new wr("@firebase/database-compat"),zE=function(t){let e="FIREBASE WARNING: "+t;aP.warn(e)};var cP=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Ve(t,e)+"must be a boolean.")},lP=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ve(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var kg=class{constructor(e){this._delegate=e}cancel(e){I("OnDisconnect.cancel",0,1,arguments.length),fe("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){I("OnDisconnect.remove",0,1,arguments.length),fe("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){I("OnDisconnect.set",1,2,arguments.length),fe("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){I("OnDisconnect.setWithPriority",2,3,arguments.length),fe("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if(I("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,zE("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fe("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}};var Og=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return I("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var yr=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return I("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return I("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return I("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return I("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return I("DataSnapshot.child",0,1,arguments.length),e=String(e),Wi("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return I("DataSnapshot.hasChild",1,1,arguments.length),Wi("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return I("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return I("DataSnapshot.forEach",1,1,arguments.length),fe("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return I("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return I("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return I("DataSnapshot.ref",0,0,arguments.length),new cn(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Jl=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;I("Query.on",2,4,arguments.length),fe("Query.on","callback",n,!1);let s=t.getCancelAndContextArgs_("Query.on",r,i),a=(l,u)=>{n.call(s.context,new yr(this.database,l),u)};a.userCallback=n,a.context=s.context;let c=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return Xl(this._delegate,a,c),n;case"child_added":return Mg(this._delegate,a,c),n;case"child_removed":return xg(this._delegate,a,c),n;case"child_changed":return Tg(this._delegate,a,c),n;case"child_moved":return Ag(this._delegate,a,c),n;default:throw new Error(Ve("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(I("Query.off",0,3,arguments.length),lP("Query.off",e,!0),fe("Query.off","callback",n,!0),su("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,Ng(this._delegate,e,i)}else Ng(this._delegate,e)}get(){return wE(this._delegate).then(e=>new yr(this.database,e))}once(e,n,r,i){I("Query.once",1,4,arguments.length),fe("Query.once","callback",n,!0);let o=t.getCancelAndContextArgs_("Query.once",r,i),s=new me,a=(l,u)=>{let d=new yr(this.database,l);n&&n.call(o.context,d,u),s.resolve(d)};a.userCallback=n,a.context=o.context;let c=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(e){case"value":Xl(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":Mg(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":xg(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":Tg(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":Ag(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(Ve("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return I("Query.limitToFirst",1,1,arguments.length),new t(this.database,ut(this._delegate,ME(e)))}limitToLast(e){return I("Query.limitToLast",1,1,arguments.length),new t(this.database,ut(this._delegate,TE(e)))}orderByChild(e){return I("Query.orderByChild",1,1,arguments.length),new t(this.database,ut(this._delegate,AE(e)))}orderByKey(){return I("Query.orderByKey",0,0,arguments.length),new t(this.database,ut(this._delegate,xE()))}orderByPriority(){return I("Query.orderByPriority",0,0,arguments.length),new t(this.database,ut(this._delegate,NE()))}orderByValue(){return I("Query.orderByValue",0,0,arguments.length),new t(this.database,ut(this._delegate,RE()))}startAt(e=null,n){return I("Query.startAt",0,2,arguments.length),new t(this.database,ut(this._delegate,bE(e,n)))}startAfter(e=null,n){return I("Query.startAfter",0,2,arguments.length),new t(this.database,ut(this._delegate,SE(e,n)))}endAt(e=null,n){return I("Query.endAt",0,2,arguments.length),new t(this.database,ut(this._delegate,EE(e,n)))}endBefore(e=null,n){return I("Query.endBefore",0,2,arguments.length),new t(this.database,ut(this._delegate,IE(e,n)))}equalTo(e,n){return I("Query.equalTo",1,2,arguments.length),new t(this.database,ut(this._delegate,kE(e,n)))}toString(){return I("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return I("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(I("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,fe(e,"cancel",i.cancel,!0),i.context=r,su(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Ve(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new cn(this.database,new Ye(this._delegate._repo,this._delegate._path))}},cn=class t extends Jl{constructor(e,n){super(e,new Fe(n._repo,n._path,new Is,!1)),this.database=e,this._delegate=n}getKey(){return I("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return I("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,Pn(this._delegate,e))}getParent(){I("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return I("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){I("Reference.set",1,2,arguments.length),fe("Reference.set","onComplete",n,!0);let r=Kl(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(I("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,zE("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qe("Reference.update",this._delegate._path),fe("Reference.update","onComplete",n,!0);let r=DE(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){I("Reference.setWithPriority",2,3,arguments.length),fe("Reference.setWithPriority","onComplete",r,!0);let i=CE(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){I("Reference.remove",0,1,arguments.length),fe("Reference.remove","onComplete",e,!0);let n=yE(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){I("Reference.transaction",1,3,arguments.length),fe("Reference.transaction","transactionUpdate",e,!1),fe("Reference.transaction","onComplete",n,!0),cP("Reference.transaction","applyLocally",r,!0);let i=HE(this._delegate,e,{applyLocally:r}).then(o=>new Og(o.committed,new yr(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){I("Reference.setPriority",1,2,arguments.length),fe("Reference.setPriority","onComplete",n,!0);let r=_E(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){I("Reference.push",0,2,arguments.length),fe("Reference.push","onComplete",n,!0);let r=vE(this._delegate,e),i=r.then(s=>new t(this.database,s));n&&i.then(()=>n(null),s=>n(s));let o=new t(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return qe("Reference.onDisconnect",this._delegate._path),new kg(new Nl(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var _r=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:PE,forceLongPolling:FE}}useEmulator(e,n,r={}){LE(this._delegate,e,n,r)}ref(e){if(I("database.ref",0,1,arguments.length),e instanceof cn){let n=Sg(this._delegate,e.toString());return new cn(this,n)}else{let n=bg(this._delegate,e);return new cn(this,n)}}refFromURL(e){I("database.refFromURL",1,1,arguments.length);let r=Sg(this._delegate,e);return new cn(this,r)}goOffline(){return I("database.goOffline",0,0,arguments.length),VE(this._delegate)}goOnline(){return I("database.goOnline",0,0,arguments.length),jE(this._delegate)}};_r.ServerValue={TIMESTAMP:UE(),increment:t=>$E(t)};function uP({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){Jp(n);let a=new au("database-standalone"),c=new Gs("auth-internal",a);c.setComponent(new Ut("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new Gs("app-check-internal",a),l.setComponent(new Ut("app-check-internal",()=>i,"PRIVATE"))),{instance:new _r(Rg(t,c,l,e,s),t),namespace:o}}var dP=Object.freeze({__proto__:null,initStandalone:uP});var fP=_r.ServerValue;function hP(t){t.INTERNAL.registerComponent(new Ut("database-compat",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new _r(i,r)},"PUBLIC").setServiceProps({Reference:cn,Query:Jl,Database:_r,DataSnapshot:yr,enableLogging:BE,INTERNAL:dP,ServerValue:fP}).setMultipleInstances(!0)),t.registerVersion(oP,sP)}hP(je);function Us(t,e,n="on",r=no){return new j(i=>{let o=null;return o=t[n](e,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),n==="on"?{unsubscribe(){o!=null&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(S(i=>{let{snapshot:o,prevKey:s}=i,a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),oo())}function pP(t){return typeof t=="string"}function gP(t){return typeof t.exportVal=="function"}function YE(t){return t==null}function ZE(t){return typeof t.set=="function"}function WE(t,e){return ZE(e)?e:t.ref(e)}function KE(t,e){if(pP(t))return e.stringCase();if(ZE(t))return e.firebaseCase();if(gP(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function XE(t){return(YE(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function JE(t,e,n){e=XE(e);let r=e.map(i=>Us(t,i,"on",n));return Pr(...r)}function mP(t,e,n){let r=JE(t,e).pipe(Vr((i,o)=>[...i,o],[]));return yP(t,r,n)}function vP(t,e){return Us(t,"value","on",e).pipe(S(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function yP(t,e,n){return vP(t,n).pipe(Pu(e),S(([i,o])=>{let s=i.lastKeyToLoad,a=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),Ru(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),S(i=>i.actions))}function GE(t,e){return function(r,i){return KE(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function _P(t){return function(n){return n?KE(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function CP(t,e,n){return Us(t,"value","once",n).pipe(ie(r=>{let i=[b(r)];return e.forEach(o=>i.push(Us(t,o,"on",n))),Pr(...i).pipe(Vr(wP,[]))}),Au())}function eI(t,e){let n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function DP(t,e){if(YE(e))return 0;{let n=eI(t,e);return n===-1?t.length:n+1}}function wP(t,e){let{payload:n,prevKey:r,key:i}=e,o=eI(t,i),s=DP(t,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(c=>{let l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,t=[...t,l],!1})}return t;case"child_added":if(o>-1)(t[o-1]?.key||null)!==r&&(t=t.filter(c=>c.payload.key!==n.key),t.splice(s,0,e));else{if(r==null)return[e,...t];t=t.slice(),t.splice(s,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===i?e:a);case"child_moved":if(o>-1){let a=t.splice(o,1)[0];return t=t.slice(),t.splice(s,0,a),t}return t;default:return t}}function qE(t,e,n){return e=XE(e),CP(t,e,n)}function EP(t,e){let n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:GE(r,"update"),set:GE(r,"set"),push:i=>r.push(i),remove:_P(r),snapshotChanges(i){return qE(t,i,n).pipe(sn)},stateChanges(i){return JE(t,i,n).pipe(sn)},auditTrail(i){return mP(t,i,n).pipe(sn)},valueChanges(i,o){return qE(t,i,n).pipe(S(a=>a.map(c=>o&&o.idField?$(y({},c.payload.val()),{[o.idField]:c.key}):c.payload.val())),sn)}}}function QE(t,e){return function(){return Us(t,"value","on",e)}}function IP(t,e){return{query:t,snapshotChanges(){return QE(t,e.schedulers.outsideAngular)().pipe(sn)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return QE(t,e.schedulers.outsideAngular)().pipe(sn,S(r=>r.payload.exists()?r.payload.val():null))}}}var bP=new C("angularfire2.realtimeDatabaseURL"),SP=new C("angularfire2.database.use-emulator"),Pg=(()=>{class t{schedulers;database;constructor(n,r,i,o,s,a,c,l,u,d,f,h,p,v,D){this.schedulers=a;let M=c,Q=cs(n,s,r);l&&Bh(Q,s,u,f,h,p,d,v),this.database=al(`${Q.name}.database.${i}`,"AngularFireDatabase",Q.name,()=>{let T=s.runOutsideAngular(()=>Q.database(i||void 0));return M&&T.useEmulator(...M),T},[M])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>WE(this.database,n)),o=i;return r&&(o=r(i)),EP(o,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>WE(this.database,n));return IP(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||t)(m(Ti),m(Ai,8),m(bP,8),m(st),m(q),m(il),m(SP,8),m(RD,8),m(Oh,8),m(Ph,8),m(Fh,8),m(Lh,8),m(Vh,8),m(jh,8),m(ur,8))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),tI=(()=>{class t{constructor(){je.registerVersion("angularfire",Mi.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ee({type:t});static \u0275inj=we({providers:[Pg]})}return t})();var nI={production:!1,firebaseConfig:{apiKey:"AIzaSyCMxk-T_rbU0bK4I4bYlViNu8EDlazNWy8",authDomain:"idx-shopping-list.firebaseapp.com",databaseURL:"https://idx-shopping-list-default-rtdb.firebaseio.com",projectId:"idx-shopping-list",storageBucket:"idx-shopping-list.appspot.com",messagingSenderId:"262125008286",appId:"1:262125008286:web:52ca2de49c883cca55128f"}};var qi=class t{lightModeEnabled=!1;constructor(){}ngOnInit(){localStorage.getItem("shoppingListLightMode")==="true"?(this.lightModeEnabled=!0,document.body.classList.add("light-mode")):(this.lightModeEnabled=!1,document.body.classList.remove("light-mode"))}toggleTheme(){document.body.classList.toggle("light-mode"),document.body.classList.contains("light-mode")?(localStorage.setItem("shoppingListLightMode","true"),this.lightModeEnabled=!0):(localStorage.setItem("shoppingListLightMode","false"),this.lightModeEnabled=!1)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Rt({type:t,selectors:[["theme-toggle"]],standalone:!0,features:[En],decls:4,vars:1,consts:[[1,"ui-switch"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"slider"],[1,"circle"]],template:function(n,r){n&1&&(se(0,"label",0)(1,"input",1),bo("ngModelChange",function(o){return Dc(r.lightModeEnabled,o)||(r.lightModeEnabled=o),o}),Re("ngModelChange",function(){return r.toggleTheme()}),ue(),se(2,"div",2),en(3,"div",3),ue()()),n&2&&($e(),Io("ngModel",r.lightModeEnabled))},dependencies:[bn,nl,Ch,el,ss],styles:['@charset "UTF-8";.ui-switch[_ngcontent-%COMP%]{--switch-bg: rgb(135, 150, 165);--switch-width: 48px;--switch-height: 20px;--circle-diameter: 32px;--circle-bg: var(--accent-p);--circle-inset: calc((var(--circle-diameter) - var(--switch-height)) / 2)}.ui-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:var(--switch-width);height:var(--switch-height);background:var(--switch-bg);border-radius:999px;position:relative;cursor:pointer}.slider[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{top:calc(var(--circle-inset) * -1);left:0;width:var(--circle-diameter);height:var(--circle-diameter);position:absolute;background:var(--circle-bg);border-radius:inherit;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjAiIHdpZHRoPSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiNmZmYiCiAgICAgICAgZD0iTTkuMzA1IDEuNjY3VjMuNzVoMS4zODlWMS42NjdoLTEuMzl6bS00LjcwNyAxLjk1bC0uOTgyLjk4Mkw1LjA5IDYuMDcybC45ODItLjk4Mi0xLjQ3My0xLjQ3M3ptMTAuODAyIDBMMTMuOTI3IDUuMDlsLjk4Mi45ODIgMS40NzMtMS40NzMtLjk4Mi0uOTgyek0xMCA1LjEzOWE0Ljg3MiA0Ljg3MiAwIDAwLTQuODYyIDQuODZBNC44NzIgNC44NzIgMCAwMDEwIDE0Ljg2MiA0Ljg3MiA0Ljg3MiAwIDAwMTQuODYgMTAgNC44NzIgNC44NzIgMCAwMDEwIDUuMTM5em0wIDEuMzg5QTMuNDYyIDMuNDYyIDAgMDExMy40NzEgMTBhMy40NjIgMy40NjIgMCAwMS0zLjQ3MyAzLjQ3MkEzLjQ2MiAzLjQ2MiAwIDAxNi41MjcgMTAgMy40NjIgMy40NjIgMCAwMTEwIDYuNTI4ek0xLjY2NSA5LjMwNXYxLjM5aDIuMDgzdi0xLjM5SDEuNjY2em0xNC41ODMgMHYxLjM5aDIuMDg0di0xLjM5aC0yLjA4NHpNNS4wOSAxMy45MjhMMy42MTYgMTUuNGwuOTgyLjk4MiAxLjQ3My0xLjQ3My0uOTgyLS45ODJ6bTkuODIgMGwtLjk4Mi45ODIgMS40NzMgMS40NzMuOTgyLS45ODItMS40NzMtMS40NzN6TTkuMzA1IDE2LjI1djIuMDgzaDEuMzg5VjE2LjI1aC0xLjM5eiIgLz4KPC9zdmc+);background-repeat:no-repeat;background-position:center center;-webkit-transition:left .15s cubic-bezier(.4,0,.2,1) 0ms,-webkit-transform .15s cubic-bezier(.4,0,.2,1) 0ms;-o-transition:left .15s cubic-bezier(.4,0,.2,1) 0ms,transform .15s cubic-bezier(.4,0,.2,1) 0ms;transition:left .15s cubic-bezier(.4,0,.2,1) 0ms,transform .15s cubic-bezier(.4,0,.2,1) 0ms,-webkit-transform .15s cubic-bezier(.4,0,.2,1) 0ms;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}.slider[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:#ffffffbf;border-radius:inherit;-webkit-transition:all .5s;-o-transition:all .5s;transition:all .5s;opacity:0}.ui-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{left:calc(100% - var(--circle-diameter));background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjAiIHdpZHRoPSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiNmZmYiCiAgICAgICAgZD0iTTQuMiAyLjVsLS43IDEuOC0xLjguNyAxLjguNy43IDEuOC42LTEuOEw2LjcgNWwtMS45LS43LS42LTEuOHptMTUgOC4zYTYuNyA2LjcgMCAxMS02LjYtNi42IDUuOCA1LjggMCAwMDYuNiA2LjZ6IiAvPgo8L3N2Zz4=)}.ui-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active + .slider[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:before{-webkit-transition:0s;-o-transition:0s;transition:0s;opacity:1;width:0;height:0}']})};function AP(t,e){if(t&1){let n=Eo();se(0,"i",3),Re("click",function(){Xn(n);let i=tn();return Jn(i.markAsPurchasedClick())}),ue()}}function xP(t,e){if(t&1){let n=Eo();se(0,"i",4),Re("click",function(){Xn(n);let i=tn();return Jn(i.markAsInCartClick())}),ue()}}var Qi=class t{label;checked;markAsPurchased=new te;markAsInCart=new te;markAsInCartClick(){this.markAsInCart.emit()}markAsPurchasedClick(){this.markAsPurchased.emit()}checkedChange=new te;onCheckChanged(){this.checkedChange.emit(this.checked)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Rt({type:t,selectors:[["check-box"]],inputs:{label:"label",checked:"checked"},outputs:{markAsPurchased:"markAsPurchased",markAsInCart:"markAsInCart",checkedChange:"checkedChange"},standalone:!0,features:[En],decls:3,vars:2,consts:[[1,"checkbox-container"],["class","fas fa-check orange",3,"click",4,"ngIf"],["class","fas fa-xmark",3,"click",4,"ngIf"],[1,"fas","fa-check","orange",3,"click"],[1,"fas","fa-xmark",3,"click"]],template:function(n,r){n&1&&(se(0,"div",0),tr(1,AP,1,0,"i",1)(2,xP,1,0,"i",2),ue()),n&2&&($e(),kt("ngIf",r.checked),$e(),kt("ngIf",!r.checked))},dependencies:[bn,Tc],styles:[".checkbox-container[_ngcontent-%COMP%]{border:2px solid var(--text-color);cursor:pointer;position:relative;transition:all .3s ease-in-out}.checkbox-container[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_border-rotate 1s infinite linear}.checkbox-container[_ngcontent-%COMP%]   .fa-xmark[_ngcontent-%COMP%]{padding:.5rem .6rem}.checkbox-container[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{padding:.5rem}@keyframes _ngcontent-%COMP%_border-rotate{0%{border-color:var(--text-color) transparent transparent transparent}25%{border-color:var(--text-color) var(--text-color) transparent transparent}50%{border-color:transparent var(--text-color) var(--text-color) transparent}75%{border-color:transparent transparent var(--text-color) var(--text-color)}to{border-color:var(--text-color) transparent transparent var(--text-color)}}"]})};var eu=class t{constructor(e){this.db=e}getShoppingList(){return this.db.list("shoppingList").valueChanges()}generateItemKey(){return this.db.database.ref("shoppingList").push().key}addShoppingItemWithKey(e){return this.db.object(`shoppingList/${e.key}`).set(e).then(()=>Promise.resolve()).catch(n=>Promise.reject(n))}updateShoppingItem(e,n){return this.db.object(`shoppingList/${e}`).update(n).then(()=>Promise.resolve()).catch(r=>Promise.reject(r))}deleteShoppingItem(e){return this.db.object(`shoppingList/${e}`).remove().then(()=>Promise.resolve()).catch(n=>Promise.reject(n))}static \u0275fac=function(n){return new(n||t)(m(Pg))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};var tu=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Rt({type:t,selectors:[["app-loader"]],standalone:!0,features:[En],decls:2,vars:0,consts:[[1,"loader-wrapper"],[1,"loader"]],template:function(n,r){n&1&&(se(0,"div",0),en(1,"div",1),ue())},styles:[".loader[_ngcontent-%COMP%]{width:45px;height:40px;background:linear-gradient(#0000 calc(1*100%/6),#fff 0 50%,#0000 0),linear-gradient(#0000 calc(2*100%/6),#ee652f 0 calc(4*100%/6),#0000 0),linear-gradient(#0000 50%,#fff 0 calc(5*100%/6),#0000 0);background-size:10px 400%;background-repeat:no-repeat;animation:_ngcontent-%COMP%_matrix 1s infinite linear}@keyframes _ngcontent-%COMP%_matrix{0%{background-position:0% 100%,50% 100%,100% 100%}to{background-position:0% 0%,50% 0%,100% 0%}}.loader-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center}"]})};var nu=class t{constructor(e,n){this.templateRef=e;this.viewContainer=n}set appLoading(e){this.viewContainer.clear(),e?this.viewContainer.createComponent(tu):this.viewContainer.createEmbeddedView(this.templateRef)}static \u0275fac=function(n){return new(n||t)(z(ci),z(wn))};static \u0275dir=Ie({type:t,selectors:[["","appLoading",""]],inputs:{appLoading:"appLoading"},standalone:!0})};function OP(t,e){if(t&1){let n=Eo();se(0,"li",11),Re("panleft",function(){let i=Xn(n).$implicit,o=tn(3);return Jn(o.onSwipeLeft(i))}),se(1,"check-box",12),Re("markAsInCart",function(){let i=Xn(n).$implicit,o=tn(3);return Jn(o.markAsPurchased(i))})("markAsPurchased",function(){let i=Xn(n).$implicit,o=tn(3);return Jn(o.removeFromList(i))}),ue(),se(2,"span"),ui(3),ue()()}if(t&2){let n=e.$implicit;$e(),kt("checked",n.purchased),$e(),nr("purchased",n.purchased),$e(),ff(n.name)}}function PP(t,e){if(t&1&&(se(0,"div")(1,"ul",9),tr(2,OP,4,4,"li",10),ue()()),t&2){let n=tn(2);$e(2),kt("ngForOf",n.shoppingList)}}function FP(t,e){t&1&&(se(0,"div",13)(1,"p"),ui(2,"No items in the shopping list."),ue()())}function LP(t,e){if(t&1&&(se(0,"div"),tr(1,PP,3,1,"div",7)(2,FP,3,0,"div",8),ue()),t&2){let n=tn();$e(),kt("ngIf",n.shoppingList.length>0),$e(),kt("ngIf",n.shoppingList.length===0&&!n.loading)}}var Lg=class t{constructor(e){this.dbService=e}loading=!0;removeFromList(e){e.key&&this.dbService.deleteShoppingItem(e.key).then(()=>{console.log("Item deleted after being unpurchased."),this.shoppingList=this.shoppingList.filter(n=>n.key!==e.key)}).catch(n=>console.error("Error deleting item:",n))}markAsPurchased(e){e.key&&(e.purchased=!0,this.dbService.updateShoppingItem(e.key,e).then(()=>console.log("Item updated as purchased.")).catch(n=>console.error("Error updating item:",n)))}title="myapp";lightModeEnabled=!1;shoppingList=[];newItemName;newItemQuantity;ngOnInit(){this.dbService.getShoppingList().subscribe(e=>{console.log(e),this.shoppingList=e,console.log(this.shoppingList),this.loading=!1})}addItem(){if(this.newItemName){(this.newItemQuantity===0||this.newItemQuantity===void 0||this.newItemQuantity===null)&&(this.newItemQuantity=1);let n={key:this.dbService.generateItemKey(),name:this.newItemName,quantity:this.newItemQuantity,purchased:!1};this.dbService.addShoppingItemWithKey(n).then(()=>{this.newItemName="",this.newItemQuantity=0,document.querySelector('input[name="newItemName"]').focus()}).catch(r=>console.error("Error adding item:",r))}}onSwipeLeft(e){e.key&&this.dbService.deleteShoppingItem(e.key).then(()=>{console.log("Item deleted successfully.")}).catch(n=>console.error("Error deleting item:",n))}static \u0275fac=function(n){return new(n||t)(z(eu))};static \u0275cmp=Rt({type:t,selectors:[["app-root"]],decls:12,vars:4,consts:[[1,"d-flex","flex-column","container","centered"],[1,"container-header","d-flex","flex-center","gap-1","align-items-center"],[4,"appLoading"],[1,"mt-3",3,"ngSubmit"],[1,"field"],["type","text","name","newItemName","placeholder","Enter item name",3,"ngModelChange","ngModel"],["type","submit",1,"d-flex","flex-center","w-100"],[4,"ngIf"],["class","info-box",4,"ngIf"],[1,"list-group"],["class","list-item",3,"panleft",4,"ngFor","ngForOf"],[1,"list-item",3,"panleft"],[3,"markAsInCart","markAsPurchased","checked"],[1,"info-box"]],template:function(n,r){n&1&&(se(0,"main",0)(1,"h2",1),ui(2," Shopping List"),en(3,"theme-toggle"),ue(),tr(4,LP,3,2,"div",2),se(5,"form",3),Re("ngSubmit",function(){return r.addItem()}),se(6,"div",4)(7,"label"),ui(8,"Item Name"),ue(),se(9,"input",5),bo("ngModelChange",function(o){return Dc(r.newItemName,o)||(r.newItemName=o),o}),ue()(),se(10,"button",6),ui(11,"+ ADD ITEM"),ue()()()),n&2&&(nr("light-mode",r.lightModeEnabled),$e(4),kt("appLoading",r.loading),$e(5),Io("ngModel",r.newItemName))},dependencies:[q_,Tc,pD,Jc,el,cD,ss,bh,qi,Qi,nu],styles:[".purchased[_ngcontent-%COMP%]{text-decoration:line-through;color:gray}"]})},ru=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ee({type:t,bootstrap:[Lg]});static \u0275inj=we({providers:[zC(WC)],imports:[iC,nl,bn,aC,ND.initializeApp(nI.firebaseConfig),tI,qi,Qi]})};rC().bootstrapModule(ru).catch(t=>console.error(t));
